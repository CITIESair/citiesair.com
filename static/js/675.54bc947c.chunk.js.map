{"version":3,"file":"static/js/675.54bc947c.chunk.js","mappings":"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","sources":["Graphs/Subchart/SeriesSelector.jsx","Graphs/GoogleChartHelper.jsx","Graphs/Subchart/GoogleChartStyleWrapper.jsx","Graphs/Subchart/NivoCalendarChart.jsx","Graphs/Subchart/SubChart.jsx","Components/CollapsibleSubtitle.jsx","Graphs/ChartControl.jsx","Graphs/ChartSubstituteComponents/AirQualityIndexTable.jsx","Graphs/ChartSubstituteComponents/ChartSubstituteComponentLoader.jsx","Components/AirQualityHelper.jsx","Components/DatasetDownload/DatasetDownloadDialog.jsx","Components/ScreenDialog.jsx","Pages/Dashboard/SchoolSelector.jsx","Utils/AirQualityExplanation.jsx","Pages/Project/Project.jsx","Pages/Dashboard/Dashboard.jsx","Pages/Project/ExpandableSection.jsx","Graphs/ChartSubstituteComponents|lazy|/^/.//.*$/|groupOptions: {}|namespace object"],"sourcesContent":["/* eslint-disable */\nimport { useState, useEffect } from 'react';\nimport { Stack, Grid, MenuItem, FormControl, Select, Chip, Radio, Checkbox, Typography, Switch } from \"@mui/material\";\nimport { useTheme } from '@mui/material/styles';\n\nimport VisibilityIcon from '@mui/icons-material/Visibility';\n\nconst SELECT_ALL = 'Display All Series';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\n\nexport default function SeriesSelector(props) {\n  const { items: itemsFromChart, selectorID, allowMultiple, onSeriesSelection } = props;\n\n  const theme = useTheme();\n\n  const MenuProps = {\n    PaperProps: {\n      style: {\n        maxHeight: ITEM_HEIGHT * 5.55 + ITEM_PADDING_TOP,\n        overflow: 'visible !important',\n        background: theme.palette.customAlternateBackground\n      }\n    },\n    anchorOrigin: {\n      vertical: -6,\n      horizontal: \"left\"\n    },\n    transformOrigin: {\n      vertical: \"bottom\",\n      horizontal: \"left\"\n    },\n    getContentAnchorEl: null\n  };\n\n  const [items, setItems] = useState(itemsFromChart);\n  const [selectAll, setSelectAll] = useState(allowMultiple); // default: all is selected if multiSelect is true\n\n  useEffect(() => {\n    setItems(itemsFromChart);\n  }, [itemsFromChart]);\n\n  useEffect(() => {\n    setSelectAll(items.every(item => item.selected)); // set selectAll if all items are selected\n  }, [items]);\n\n  const handleChange = (event) => {\n    // Get the array of the currently selected value(s)\n    const {\n      target: { value }\n    } = event;\n\n    // If the current selection has SELECT_ALL\n    // Behavior:\n    // - If SELECT_ALL is being selected now, then set all items to selected\n    // - IF SELECT_ALL is being de-selected now, then set all items but the first one to be unselected \n    // (to make sure there's always at least 1 item being selected)\n    if (value.includes(SELECT_ALL)) {\n      const updatedItems = items.map((item, index) => ({ ...item, selected: index == 0 ? true : !selectAll }));\n      onSeriesSelection(updatedItems);\n      setSelectAll(!selectAll);\n    }\n    // Else, if an ordinary item is selected/de-selected:\n    else {\n      const selectedItems = items.filter(item => value.includes(item.label));\n      const updatedItems = items.map(item => ({\n        ...item,\n        selected: selectedItems.some(selectedItem => selectedItem.label === item.label)\n      }));\n      onSeriesSelection(updatedItems);\n      setSelectAll(false);\n    }\n  };\n\n  const handleItemToggle = (item) => {\n    const updatedItems = items.map(existingItem =>\n      existingItem.label === item.label ? { ...existingItem, selected: !existingItem.selected } : existingItem\n    );\n    onSeriesSelection(updatedItems);\n  };\n\n  const renderedLabel = (selected) => {\n    return (\n      <Stack direction=\"row\" alignItems=\"center\" spacing={0.5}>\n        <VisibilityIcon fontSize=\"1.5rem\" sx={{ color: theme.palette.text.secondary }} />\n        <Typography variant=\"caption\" color=\"text.secondary\">\n          { /* show # of series selected if multiSelect. show cur selected serie if singleSelect */}\n          {allowMultiple ? `${selected.length} series displayed${selectAll ? ` (all)` : \"\"}`\n            : selected\n          }\n        </Typography>\n      </Stack>\n    )\n  };\n\n  return (\n    <Stack spacing={1} direction=\"row\" alignItems=\"center\">\n      <FormControl sx={{\n        [theme.breakpoints.down('sm')]: { width: '100%' },\n        minWidth: '200px',\n        '& .MuiInputBase-root': { mt: 1, borderRadius: theme.spacing(1) }\n      }} size=\"small\">\n        <Select\n          labelId={`${selectorID}-label`}\n          id={selectorID}\n          multiple={allowMultiple}\n          value={items.filter(item => item.selected).map(item => item.label)}\n          onChange={handleChange}\n          MenuProps={MenuProps}\n          renderValue={(selected) => renderedLabel(selected)}\n          sx={{ fontSize: '0.75em' }}\n        >\n          {/* Display all available items, together with checkbox for each item to select from */}\n          {items.map((item) => (\n            <MenuItem\n              disabled={\n                // If there is only 1 selected item and this is the selected item\n                // Then, prevent user from de-select this item too\n                // To ensure at least there is 1 selected item at all times\n                (items.filter(item => item.selected).length === 1 && item.selected) ? true : false\n              }\n              key={item.label}\n              value={item.label}\n              sx={{\n                backgroundColor: 'unset !important',\n                \"&:hover\": {\n                  backgroundColor: 'inherit !important',\n                }\n              }}\n            >\n              { /* checkboxes for MultiSelect, radioButtons for singleSelect*/}\n              {allowMultiple ? <Checkbox\n                checked={item.selected}\n                onClick={() => handleItemToggle(item)}\n\n                sx={{ p: 0.25, transform: 'scale(0.8)' }} />\n                : <Radio\n                  checked={item.selected}\n                  onChange={() => handleChange(item)}\n\n                  sx={{ p: 0.25, transform: 'scale(0.8)' }} />\n              }\n              <Typography variant='caption'>{item.label}</Typography>\n            </MenuItem>\n          ))}\n\n          {/* Show the option to select all if multiSelect is true*/}\n          {allowMultiple && <MenuItem key={SELECT_ALL} value={SELECT_ALL} sx={{\n            borderTop: 'solid 0.5px', borderColor: theme.palette.text.secondary,\n            position: 'sticky', bottom: 0, zIndex: 99999, marginBottom: theme.spacing(-1),\n            background: theme.palette.customAlternateBackground,\n            \"&:hover\": {\n              background: theme.palette.customAlternateBackground\n            }\n          }}>\n            <Stack direction='row' width='100%' alignItems='center' justifyContent='space-between'>\n              <Typography fontWeight={500} variant='caption' sx={{ pl: 1 }}>{SELECT_ALL}</Typography>\n              <Switch\n                checked={selectAll}\n                onClick={() => handleItemToggle(SELECT_ALL)}\n                sx={{ transform: 'scale(0.8)' }}\n              />\n            </Stack>\n          </MenuItem>\n          }\n        </Select>\n      </FormControl>\n\n      {/* Display only selected items in the Grids, and only in landscape mode and if multiSelect is true*/}\n      {allowMultiple && <Grid container spacing={1}\n        sx={{\n          [theme.breakpoints.down('sm')]: {\n            display: 'none'\n          },\n        }}\n      >\n        {items.filter(item => item.selected).map((item) => (\n          <Grid item key={item.label}>\n            <Chip\n              label={<Typography variant='caption'>{item.label}</Typography>}\n              size=\"small\"\n              {...(items.filter(item => item.selected).length !== 1 && { onDelete: () => handleItemToggle(item) })}\n            />\n          </Grid>\n        ))}\n      </Grid>}\n\n\n    </Stack>\n  );\n}\n","/* eslint-disable */\n\nexport const ChartControlType = {\n  CategoryFilter: { position: 'top', stackDirection: 'column' },\n  DateRangeFilter: { position: 'bottom', stackDirection: 'column-reverse' },\n  ChartRangeFilter: { position: 'bottom', stackDirection: 'column-reverse' },\n  NumberRangeFilter: { position: 'top', stackDirection: 'column' }\n}\n// Async function to fetch data from sheet using Google Visualization query language\nexport const fetchDataFromSheet = ({ chartData, subchartIndex }) => {\n  const urlParams =\n    subchartIndex == null\n      ? {\n        headers: chartData.headers || 1,\n        query: chartData.query,\n        gid: chartData.gid,\n      }\n      : {\n        headers:\n          chartData.headers\n          || chartData.subcharts[subchartIndex].headers\n          || null,\n        query:\n          chartData.query\n          || chartData.subcharts[subchartIndex].query\n          || null,\n        gid:\n          chartData.gid\n          || chartData.subcharts[subchartIndex].gid\n          || null,\n      };\n\n  const url = `https://docs.google.com/spreadsheets/d/${chartData.sheetId}/gviz/tq?gid=${urlParams.gid}&headers=${urlParams.headers}&tqx${urlParams.query ? `&tq=${encodeURIComponent(urlParams.query)}` : ''}`;\n  const query = new google.visualization.Query(url);\n\n  return new Promise((resolve, reject) => {\n    query.send(response => {\n      if (response.isError()) {\n        reject(response.getMessage() + ' ' + response.getDetailedMessage());\n      } else {\n        resolve(response);\n      }\n    });\n  });\n};\n\nexport const transformDataForNivo = (dataTable, dataColumn, tooltipColumn) => {\n  const data = JSON.parse(dataTable.toJSON())\n  const transformed = [];\n\n  const parseDate = (dateString) => {\n    const date = new Date(dateString);\n    const year = date.getFullYear();\n    const month = date.getMonth() + 1;\n    const day = date.getDate();\n    const formattedDate = `${year}-${month < 10 ? '0' + month : month}-${day < 10 ? '0' + day : day}`;\n    return formattedDate;\n  }\n\n  data.rows.forEach(row => {\n    // Get the date string from the first column \n    const dateString = row.c[0].f;\n    // Parse and convert the date string to a 'YYYY-MM-DD' format\n    const formattedDate = parseDate(dateString);\n    // Get the data from the appropriate column\n    const value = row.c[dataColumn]?.v;\n    // Get the tooltip from the appropriate column\n    const tooltip = row.c[tooltipColumn]?.v;\n\n    // If the date string and value are both valid, push them into the result array\n    if (dateString && value !== undefined && value !== null) {\n      transformed.push({\n        day: formattedDate,\n        value: value,\n        tooltip: tooltip\n      });\n    }\n  });\n\n  // Get dateRange (from - to)\n  const dateStrings = transformed.map(item => item.day);\n  const dateRange = getDateRangeForCalendarChart(dateStrings);\n\n  // Get valueRange (min - max)\n  const values = transformed.map(item => item.value);\n  const valueRange = getValueRangeForCalendarChart(values);\n\n  return {\n    data: transformed,\n    dateRange: dateRange,\n    valueRange: valueRange\n  };\n};\nexport const getDateRangeForCalendarChart = (dateStrings) => {\n  return {\n    min: dateStrings.reduce((min, current) => (current < min ? current : min)),\n    max: dateStrings.reduce((max, current) => (current > max ? current : max))\n  }\n}\nexport const getValueRangeForCalendarChart = (values) => {\n  return { min: Math.min(...values), max: Math.max(...values) }\n}\n\n// Function to generate a random ID for the google chart container\nexport const generateRandomID = () => {\n  return Math.random().toString(36).substr(2, 9); // Generates a random string of length 9\n}\n\n// -------- Chart options --------\n\nconst hideAnnotations = {\n  stem: {\n    length: 0,\n  },\n  textStyle: {\n    opacity: 0,\n  },\n  boxStyle: null,\n};\n\nconst returnResponsiveFontSizeInPixels = ({ isPortrait, isSmaller }) => {\n  return (\n    isSmaller ? (isPortrait ? 6 : 8) : (isPortrait ? 8 : 10)\n  );\n}\n\nexport const returnGenericOptions = (props) => {\n  const { chartData, subchartIndex, isPortrait, isHomepage, theme } = props;\n\n  // Define some shared styling rules for the chart\n  const axisTitleTextStyle = {\n    italic: false,\n    bold: true,\n    color: theme.palette.chart.axisTitle,\n    fontSize: returnResponsiveFontSizeInPixels({ isPortrait })\n  };\n  const axisTextStyle = {\n    color: theme.palette.chart.axisText,\n    fontSize: returnResponsiveFontSizeInPixels({ isPortrait })\n  };\n\n  // ---- Formulate the options for this specific chart:\n  // 1. Populate first with subchart's options (if any)\n  let options = chartData.subcharts?.[subchartIndex].options\n    ? { ...chartData.subcharts[subchartIndex].options }\n    : {};\n\n  // 2. Append own chart's options and then populate with universal options for all charts\n  options = {\n    ...options,\n    ...chartData.options,\n    theme: 'material',\n    curveType: options.curveType || chartData.options?.curveType || 'function',\n    crosshair: { orientation: 'both', trigger: 'focus', opacity: 0.5 },\n    backgroundColor: { fill: 'transparent' },\n    chartArea: {\n      ...chartData.options?.chartArea,\n      width: isPortrait ? (chartData.options?.chartArea?.width?.portrait || '80%') : (chartData.options?.chartArea?.width?.landscape || '75%'),\n      height: isPortrait ? (chartData.options?.chartArea?.height?.portrait || '60%') : (chartData.options?.chartArea?.height?.landscape || '70%'),\n    },\n    width: isPortrait ? (chartData.options?.width?.portrait || '100%') : (chartData.options?.width?.landscape || '100%'),\n    // if there is a filter, we make space for the chartFilter from the chart's height.\n    // value is divided in 2 because the calculation is applied twice due to\n    // how react-google-charts nest components\n    height: chartData.height || '100%',\n    tooltip: {\n      isHtml: true,\n      showColorCode: false\n    },\n    legend: {\n      alignment: isPortrait ? 'center' : 'start',\n      position:\n        chartData.options?.legend?.position\n        ?? (isPortrait ? 'top' : 'right'),\n      scrollArrows: {\n        activeColor: theme.palette.chart.axisTitle,\n        inactiveColor: theme.palette.text.secondary,\n      },\n      pagingTextStyle: {\n        fontSize: 10,\n        color: theme.palette.chart.axisTitle,\n        bold: true,\n      }\n    }\n  };\n\n  // 3. Append to vAxis and hAxis properties\n  options.vAxis = {\n    ...options.vAxis,\n    format: options.vAxis?.format ?? 'decimal',\n    title: options.vAxis?.title ?? '',\n    viewWindow: {\n      min: options.vAxis?.viewWindow?.min ?? 0,\n    },\n  };\n  options.hAxis = {\n    ...options.hAxis,\n    title: options.hAxis?.title ?? '',\n  };\n  // 3.1. If in portrait mode, slant the text of the hAxis\n  if (isPortrait) {\n    options.hAxis = {\n      ...options.hAxis,\n      slantedText: true,\n      slantedTextAngle: 30,\n    };\n  }\n\n  // 4. Override with custom colors:\n  // 4.1. Color scheme of all the series of this chart\n  if (typeof options.colors === 'string' || !options.colors) options.colors = theme.palette.chart.optionsColors[options.colors || 'multiColor'];\n  // 4.2. Individual color of a single serie (if given)\n  if (options.series) {\n    Object.values(options.series).forEach((_serie) => {\n      const serie = _serie;\n      if (serie.color === 'default') {\n        serie.color = theme.palette.primary.main;\n      }\n    });\n  }\n  // 4.3. Color of the trendline\n  if (options.trendlines) {\n    options.trendlines.forEach((_item) => {\n      const item = _item;\n      item.color = theme.palette.primary.main;\n    });\n  }\n  // 4.4. Color axis of the Calendar chart\n  if (options.colorAxis) {\n    switch (options.colorAxis.colors) {\n      case 'matchingColor':\n        options.colorAxis.colors = [\n          theme.palette.chart.colorAxisFirstColor,\n          theme.palette.chart.optionsColors.multiColor[options.colorAxis.colorIndex],\n        ];\n        break;\n      case 'default':\n        options.colorAxis.colors = [\n          theme.palette.chart.colorAxisFirstColor,\n          theme.palette.NYUpurple,\n        ];\n        break;\n      case 'aqi':\n        options.colorAxis = theme.palette.chart.aqiColorAxis;\n        break;\n      default:\n        break;\n    }\n  }\n  // 4.5. Colors of other elements of the chart (typographies and gridlines)\n  options.vAxis = {\n    ...options.vAxis,\n    titleTextStyle: axisTitleTextStyle,\n    textStyle: axisTextStyle,\n    gridlines: {\n      ...options.vAxis?.gridlines,\n      color: options.vAxis?.gridlines?.color || theme.palette.chart.gridlines\n    },\n    minorGridlines: { count: 0 },\n  };\n  options.hAxis = {\n    ...options.hAxis,\n    titleTextStyle: axisTitleTextStyle,\n    textStyle: axisTextStyle,\n    gridlines: {\n      ...options.hAxis?.gridlines,\n      color: options.hAxis?.gridlines?.color || theme.palette.chart.gridlines\n    },\n    minorGridlines: {\n      ...options.hAxis?.minorGridlines,\n      color: options.hAxis?.gridlines?.color || theme.palette.chart.gridlines,\n    },\n  };\n  options.legend = {\n    ...options.legend,\n    textStyle: axisTextStyle,\n  };\n  options.annotations = {\n    ...options.annotations,\n    highContrast: true,\n    textStyle: {\n      color: theme.palette.primary.contrastText,\n      fontSize: returnResponsiveFontSizeInPixels({ isPortrait, isSmaller: true }),\n      opacity: 0.8\n    },\n    stem: {\n      ...options.annotations?.stem,\n      color: theme.palette.chart.axisTitle,\n      thickness: 2\n    },\n    boxStyle: {\n      rx: theme.shape.borderRadius, // rounded corners\n      ry: theme.shape.borderRadius,\n      fill: theme.palette.chart.annotationBoxFill,\n      fillOpacity: 0.5\n    },\n  };\n\n  // 5. If the chart is displayed on the homepage, override the options with:\n  if (isHomepage) {\n    options = {\n      ...options,\n      chartArea: {\n        ...options.chartArea,\n        width: '80%',\n        height: '80%'\n      },\n      seriesSelector: false,\n      pointSize: 0,\n      enableInteractivity: false,\n      annotations: hideAnnotations,\n      legend: 'none',\n      vAxis: {\n        ...options.vAxis,\n        textPosition: 'none',\n        titleTextStyle: {\n          ...options.vAxis.titleTextStyle,\n          bold: false\n        },\n        gridlines: { color: 'transparent', count: 0 },\n        viewWindowMode: 'maximized'\n      },\n      hAxis: {\n        ...options.hAxis,\n        textPosition: 'none',\n        gridlines: { color: 'transparent', count: 0 },\n        titleTextStyle: {\n          ...options.hAxis.titleTextStyle,\n          bold: false\n        }\n      },\n    };\n  }\n\n  return options;\n}\n\nexport const returnCalendarChartOptions = (existingOptions) => {\n  const calendarDimensions = calculateCalendarDimensions({ cellSizeMin: 14, cellSizeMax: 18 });\n  return {\n    ...existingOptions,\n    width: calendarDimensions.chartWidth,\n    calendar: {\n      cellSize: calendarDimensions.cellSize,\n      yearLabel: {\n        fontSize: calendarDimensions.yearLabelFontSize\n      }\n    },\n    noDataPattern: {\n      backgroundColor: 'none',\n      color: 'none',\n    },\n  }\n}\n\nexport const returnChartControlUI = (props) => {\n  const { chartControl, mainChartData, mainChartOptions, subchartIndex, theme, isPortrait } = props;\n  let chartControlUI = {\n    ...chartControl.options?.ui,\n    snapToData: true\n  };\n\n  // Assign the appropriate UI for chartControl based on controlType (if existed)\n  if (chartControl.controlType === 'ChartRangeFilter') {\n    chartControlUI = {\n      ...chartControlUI,\n      chartType: mainChartData.chartType,\n      chartView: {\n        columns:\n          mainChartData.columns\n          || (mainChartData.subcharts\n            && mainChartData.subcharts[subchartIndex].columns)\n          || null\n          || null,\n      },\n      chartOptions: {\n        ...mainChartOptions,\n        ...chartControl.options?.ui?.chartOptions,\n        hAxis: {\n          ...chartControl.options?.ui?.chartOptions?.hAxis,\n          textPosition: 'out',\n          textStyle: { color: theme.palette.chart.axisText, fontSize: returnResponsiveFontSizeInPixels({ isPortrait, isSmaller: true }) }\n        },\n        vAxis: {\n          ...chartControl.options?.ui?.chartOptions?.vAxis,\n          title: null\n        },\n        annotations: hideAnnotations,\n        legend: null,\n      }\n    };\n  }\n  return chartControlUI;\n}\n\nconst calculateCalendarDimensions = ({ cellSizeMin, cellSizeMax }) => {\n  const cellSize = Math.min(Math.max((window.innerWidth * 0.9) / 58, cellSizeMin), cellSizeMax);\n  return {\n    chartWidth: cellSize * 56, // fixed ratio\n    cellSize,\n    yearLabelFontSize: cellSize * 2\n  };\n};\n\nexport const addTouchEventListenerForChartControl = ({ controlWrapper, chartID }) => {\n  const touchHandler = (event) => {\n    var touches = event.changedTouches,\n      first = touches[0],\n      type = '';\n\n    switch (event.type) {\n      case 'touchstart':\n        type = 'mousedown';\n        break;\n      case 'touchmove':\n        type = 'mousemove';\n        break;\n      case 'touchend':\n        type = 'mouseup';\n        break;\n      default:\n        return;\n    }\n\n    var simulatedEvent = new MouseEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      view: window,\n      detail: 1,\n      screenX: first.screenX,\n      screenY: first.screenY,\n      clientX: first.clientX,\n      clientY: first.clientY,\n      button: 0, // left button\n      relatedTarget: null,\n    });\n\n    first.target.dispatchEvent(simulatedEvent);\n    event.preventDefault();\n  }\n\n  let isMounted = true; // Flag to track component's mount status\n  if (!controlWrapper) return;\n\n  const controlDOM = document.querySelector(`#control-${chartID}`);\n  if (!controlDOM) return;\n\n  ['touchstart', 'touchmove', 'touchend', 'touchcancel']\n    .forEach((touchEvent) => {\n      controlDOM.addEventListener(touchEvent, touchHandler, { capture: true });\n    });\n\n  return () => {\n    isMounted = false; // Component is unmounting\n\n    ['touchstart', 'touchmove', 'touchend', 'touchcancel'].forEach((touchEvent) => {\n      controlDOM.removeEventListener(touchEvent, touchHandler, { capture: true });\n    });\n  };\n}","import { Box } from '@mui/material/';\nimport { styled } from '@mui/material/styles';\n\nconst GoogleChartStyleWrapper = styled(Box)(({ theme, isPortrait }) => ({\n  // CSS for HTML tooltip\n  '& .google-visualization-tooltip, .nivo-tooltip': {\n    width: 'unset !important',\n    maxWidth: '350px',\n    height: 'unset',\n    padding: '1em',\n    boxShadow: '0px 2px 2px 0px rgba(204, 204, 204, 0.6)',\n    mozBoxShadow: '0px 2px 2px 0px rgba(204, 204, 204, 0.6)',\n    webkitBoxShadow: '0px 2px 2px 0px rgba(204, 204, 204, 0.6)',\n    border: 'solid 1px',\n    borderColor: theme.palette.text.secondaryRGB,\n    fontSize: `${isPortrait ? 9 : 12}px`,\n    color: theme.palette.chart.tooltip.text,\n    background: theme.palette.chart.tooltip.background,\n    borderRadius: theme.spacing(1 / 2),\n    '& ul': {\n      margin: '0 !important',\n      '& li': {\n        margin: '0 !important',\n        padding: '0 !important',\n        '& span': {\n          fontSize: `${isPortrait ? 9 : 12}px !important`,\n          color: `${theme.palette.chart.tooltip.text} !important`,\n        }\n      }\n    }\n  },\n\n  // -------- chartControl's additional stylings\n  '& .goog-menuitem-highlight, .goog-menuitem-hover': {\n    backgroundColor: `${theme.palette.primary} !important`\n  },\n\n  // CategoryFilter\n  '& .google-visualization-controls-categoryfilter': {\n    fontSize: '0.85rem',\n    marginTop: '0.75rem',\n    marginBottom: '-0.75rem',\n\n    '& .goog-inline-block > .goog-menu-button': {\n      marginTop: 0\n    },\n\n    '& .goog-menu-button-hover .goog-menu-button-outer-box, .goog-menu-button-hover .goog-menu-button-inner-box': {\n      borderColor: 'inherit !important'\n    },\n\n    '& .google-visualization-controls-label': {\n      color: theme.palette.text.secondary,\n      fontWeight: 500,\n      verticalAlign: 'middle',\n      marginBottom: '0.25rem'\n    },\n    '& .goog-menu-button-outer-box': {\n      backgroundColor: theme.palette.background.paper,\n      border: 'unset',\n\n      '& .goog-menu-button-inner-box': {\n        paddingTop: theme.spacing(0.5),\n        paddingBottom: theme.spacing(0.5),\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2),\n        border: 'solid',\n        borderWidth: '0.5px',\n        borderRadius: theme.spacing(0.5),\n        borderColor: theme.palette.text.secondary,\n\n        '& .goog-menu-button-caption': {\n          color: theme.palette.text.secondary\n        }\n      }\n    }\n  },\n\n  // DateRangeFilter\n  '& .google-visualization-controls-rangefilter': {\n    width: '100%',\n    fontSize: '0.75rem',\n    '& .goog-inline-block': {\n      width: '100%',\n    },\n    '& .google-visualization-controls-slider-horizontal': {\n      width: '90%',\n      margin: '0 5%',\n    },\n    '& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(1)': {\n      position: 'absolute',\n      top: '1.5em',\n      left: '5%'\n    },\n    '& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(2)': {\n      position: 'absolute',\n      top: '1.5em',\n      right: '5%'\n    },\n    '& .google-visualization-controls-slider-handle': {\n      background: theme.palette.primary.main\n    },\n    '& .google-visualization-controls-rangefilter-thumblabel': {\n      color: theme.palette.text.secondary,\n      padding: 0,\n      fontWeight: 500\n    },\n    '& .google-visualization-controls-slider-thumb': {\n      background: theme.palette.primary.main,\n      border: 'unset',\n      borderRadius: '4px'\n    }\n  },\n\n  // These are the paths showing on top of the line chart\n  // and the stroke around the bar/column chart\n  // when the user hovers on the legend to make the serie stand out\n  // by Google Chart's default doesn't change color based on light/dark theme, but we modify here:\n  '& path[stroke-opacity=\"0.3\"], path[stroke-opacity=\"0.1\"], path[stroke-opacity=\"0.05\"], rect[stroke-opacity]': {\n    stroke: theme.palette.text.primary,\n    strokeWidth: 3\n  },\n\n  // Cursor of series in legends\n  '& [column-id]:not(:empty)': {\n    cursor: 'pointer',\n    ':hover': {\n      fontWeight: 600\n    }\n  }\n}));\n\nexport default GoogleChartStyleWrapper;\n","/* eslint-disable */\nimport { ResponsiveCalendar } from '@nivo/calendar';\nimport { useEffect, useRef } from 'react';\nimport { useTheme } from '@mui/material/styles';\nimport { Box, Chip } from '@mui/material';\n\nimport parse from 'html-react-parser';\nimport { replacePlainHTMLWithMuiComponents } from '../../Utils/Utils';\n\nexport const yearSpacing = 40;\n\nexport const getCalendarChartMargin = (isPortrait) => {\n    return isPortrait\n        ? { top: 20, right: 0, bottom: 0, left: 20 }\n        : { top: 30, right: 40, bottom: 0, left: 40 }\n}\n\nexport const CalendarChart = (props) => {\n    const { data, dateRange, valueRange, isPortrait, options } = props;\n\n    const calendarChartMargin = getCalendarChartMargin(isPortrait);\n\n    const theme = useTheme();\n\n    // Function to extract tooltip text from HTML tooltip\n    const extractTooltipText = (tooltip) => {\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(tooltip, 'text/html');\n        return doc.body.innerHTML;\n    };\n\n    // Function to check if a date is in the first two rows of the chart\n    // Used to anchor the tooltip to the bottom while hovering over\n    // the first two rows of the chart\n    const inFirstTwoRowsOfChart = (dateStr, dateRange) => {\n        const date = new Date(dateStr);\n        const dayOfWeek = date.getDay();\n\n        // Check if the date is Sunday (0) or Monday (1)\n        const isFirstTwoDaysOfWeek = dayOfWeek === 0 || dayOfWeek === 1;\n\n        // Extract the first year from the date range once\n        const firstYear = new Date(dateRange.min).getFullYear();\n\n        // Check if the date is in the first year of the date range\n        const isInFirstYear = date.getFullYear() === firstYear;\n\n        return isFirstTwoDaysOfWeek && isInFirstYear;\n    };\n\n    // Function to get color of the Calendar cells\n    const colors = options?.colorAxis?.isGradient ?\n        generateColorGradient(options?.colorAxis?.colors[0], options?.colorAxis?.colors[1], 100) :\n        options?.colorAxis?.colors;\n\n    const showLegend = () => {\n        return (\n            <GradientBox\n                valueRange={valueRange}\n                colors={options?.colorAxis?.colors}\n                isPortrait={isPortrait}\n            />\n        )\n    }\n\n    return (\n        <>\n            {options?.legend?.position !== \"none\" && showLegend()}\n            <ResponsiveCalendar\n                data={data}\n                from={dateRange?.min}\n                to={dateRange?.max}\n                emptyColor={'transparent'}\n                theme={{\n                    text: {\n                        fill: theme.palette.text.secondary,\n                    },\n                    tooltip: {\n                        container: {\n                            background: theme.palette.mode === 'dark' ? '#2b2b2b' : '#fff',\n                            color: theme.palette.text.primary,\n                        },\n                    },\n                    axis: {\n                        ticks: {\n                            line: {\n                                stroke: theme.palette.mode === 'dark' ? '#2b2b2b' : '#fff',\n                            },\n                            text: {\n                                fill: theme.palette.text.primary,\n                            },\n                        },\n                    },\n                    grid: {\n                        line: {\n                            stroke: theme.palette.mode === 'dark' ? '#2b2b2b' : '#fff',\n                        },\n                    },\n                }}\n                colors={colors}\n                minValue={options?.colorAxis?.minValue}\n                maxValue={options?.colorAxis?.maxValue}\n                margin={calendarChartMargin}\n                yearSpacing={yearSpacing}\n                monthBorderColor={theme.palette.text.primary}\n                monthBorderWidth={1}\n                daySpacing={0.25}\n                dayBorderWidth={0}\n                tooltip={({ day, value, color }) => {\n                    const tooltipData = data.find(item => item.day === day);\n                    const tooltipText = tooltipData ? extractTooltipText(tooltipData.tooltip) : '';\n\n                    return (\n                        <CustomTooltip\n                            day={day}\n                            color={color}\n                            tooltipText={tooltipText}\n                            dateRange={dateRange}\n                            inFirstTwoRowsOfChart={inFirstTwoRowsOfChart}\n                        />\n                    );\n                }}\n            />\n        </>\n    );\n};\n\n// Custom tooltip component for the Calendar chart\nconst CustomTooltip = ({ day, color, tooltipText, dateRange, inFirstTwoRowsOfChart }) => {\n    const tooltipBoxRef = useRef(null);\n\n    // If the cell hovered over is in the first two rows of the chart,\n    // move the tooltip to the bottom of the chart\n    // Read subsequent comments to understand why we need to do this\n    useEffect(() => {\n        if (tooltipBoxRef.current && inFirstTwoRowsOfChart(day, dateRange)) {\n            const parentDiv = tooltipBoxRef.current.parentElement;\n            if (parentDiv) {\n                parentDiv.style.top = '11vh';\n            }\n        }\n    }, [tooltipBoxRef, inFirstTwoRowsOfChart]);\n\n\n    // Note that our Box is just a container 'inside' the tooltip\n    // The tooltip itself is actually the Box's parent div\n    return (\n        <Box ref={tooltipBoxRef} className='nivo-tooltip'>\n            <Chip sx={{ backgroundColor: color, mr: 0.5, height: '10px', width: '10px', borderRadius: '50%' }} />\n            {parse(tooltipText, { replace: replacePlainHTMLWithMuiComponents })}\n        </Box>\n    );\n};\n\nconst GradientBox = ({ valueRange, colors, isPortrait }) => {\n\n    if (valueRange?.min === null || valueRange?.max === null) return null;\n\n    const theme = useTheme();\n\n    // Create a gradient string from all colors in the colors array\n    const gradient = colors.map((color, index, array) => {\n        // Calculate the percentage position for each color\n        const position = (index / (array.length - 1)) * 100;\n        return `${color} ${position}%`;\n    }).join(', ');\n\n    const containerStyle = {\n        position: 'sticky',\n        width: 'fit-content',\n        marginTop: '1rem',\n        left: (isPortrait ? '58%' : '74%'),\n    }\n\n    const gradientStyle = {\n        background: `linear-gradient(to right, ${gradient})`,\n        color: theme.palette.text.primary,\n        border: `1px solid ${theme.palette.text.primary}`,\n        minWidth: '150px',\n        height: '1.1rem',\n        maxHeight: '1.25rem',\n        display: 'flex',\n        justifyContent: 'space-between',\n    };\n\n    const labelStyle = {\n        position: 'relative',\n        top: '-1.15rem',\n        fontSize: '0.8rem',\n    };\n\n    return (\n        <Box style={containerStyle}>\n            <Box style={gradientStyle}>\n                <span style={labelStyle}>{valueRange.min}</span>\n                <span style={labelStyle}>{valueRange.max}</span>\n            </Box>\n        </Box>\n    );\n};\n\n// Function to return an array of STEPS discrete colors in a gradient from startColor and endColor\nconst generateColorGradient = (startColor, endColor, steps) => {\n    function hexToRgb(hex) {\n        // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n        const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)]\n            : [null, null, null];\n    }\n\n    function rgbToHex(r, g, b) {\n        return \"#\" + [r, g, b].map(x => {\n            const hex = x.toString(16);\n            return hex.length === 1 ? '0' + hex : hex;\n        }).join('');\n    }\n\n    function interpolateColor(color1, color2, factor) {\n        let result = color1.slice();\n        for (let i = 0; i < 3; i++) {\n            result[i] = Math.round(result[i] + factor * (color2[i] - color1[i]));\n        }\n        return result;\n    }\n\n    let startRGB = hexToRgb(startColor);\n    let endRGB = hexToRgb(endColor);\n    let colorArray = [];\n\n    for (let i = 0; i < steps; i++) {\n        let factor = i / (steps - 1);\n        let interpolatedColor = interpolateColor(startRGB, endRGB, factor);\n        colorArray.push(rgbToHex(...interpolatedColor));\n    }\n\n    return colorArray;\n}","/* eslint-disable */\n\nimport { useState, useEffect, useContext, useMemo } from 'react';\n\nimport { GoogleContext } from '../../ContextProviders/GoogleContext';\n\nimport { Box, Stack } from '@mui/material/';\n\nimport { useTheme } from '@mui/material/styles';\nimport SeriesSelector from './SeriesSelector';\n\nimport { generateRandomID, returnGenericOptions, returnCalendarChartOptions, returnChartControlUI, ChartControlType, addTouchEventListenerForChartControl, getDateRangeForCalendarChart, getValueRangeForCalendarChart } from '../GoogleChartHelper';\n\nimport GoogleChartStyleWrapper from './GoogleChartStyleWrapper';\n\nimport LoadingAnimation from '../../Components/LoadingAnimation';\n\nimport ChartSubstituteComponentLoader from '../ChartSubstituteComponents/ChartSubstituteComponentLoader';\n\nimport { CalendarChart, getCalendarChartMargin, yearSpacing } from './NivoCalendarChart';\n\nexport default function SubChart(props) {\n  // Props\n  const { chartData, subchartIndex, windowSize, isPortrait, isHomepage, height, maxHeight } = props;\n  // Early return if this doesn't contain a normal Google Chart but a chartSubstituteComponent\n  const chartSubstituteComponentName = chartData.subcharts?.[subchartIndex].chartSubstituteComponentName;\n  if (chartSubstituteComponentName) {\n    return <ChartSubstituteComponentLoader chartSubstituteComponentName={chartSubstituteComponentName} />;\n  }\n\n  // Formulate the className\n  const className = chartData.customClassName ? `${chartData.chartType} ${chartData.customClassName}` : chartData.chartType;\n\n  // Use GoogleContext for loading and manipulating the Google Charts\n  const [google, _] = useContext(GoogleContext);\n\n  // States of the Google Charts\n  const [dataTable, setDataTable] = useState();\n  const [chartWrapper, setChartWrapper] = useState();\n  const [dashboardWrapper, setDashboardWrapper] = useState();\n  const [controlWrapper, setControlWrapper] = useState();\n\n  // Get the current theme\n  const theme = useTheme();\n\n  // To determine the first time the chart renders to show/hide the LoadingAnimation\n  const [isFirstRender, setIsFirstRender] = useState(true);\n\n  // Keep track of the columns (series) of the chart\n  const [allInitialColumns, setAllInitialColumns] = useState();\n  const [dataColumns, setDataColumns] = useState();\n  const [initialVAxisRange, setInitialVAxisRage] = useState();\n\n  // Define the DOM container's ID for drawing the google chart inside\n  const [chartID, __] = useState(generateRandomID());\n\n  // Calendar chart's properties\n  const [chartTotalHeight, setChartTotalHeight] = useState(200);\n\n  // Get the options object for chart\n  let options = useMemo(() => {\n    let opts = returnGenericOptions({ ...props, theme });\n    if (chartData.chartType === 'Calendar') {\n      opts = returnCalendarChartOptions(opts);\n    }\n    return opts;\n  }, [props, theme, chartData.chartType]);\n  // State to store transformed data for CalendarChart\n  const [calendarData, setCalendarData] = useState(null);\n  const [calendarHeight, setCalendarHeight] = useState(200);\n  const [containerWidth, setContainerWidth] = useState(1200); // max width of the chart container\n  // Early exit for 'Calendar' chartType\n  if (chartData.chartType === 'Calendar') {\n    useEffect(() => {\n      const dataArray = chartData.dataArray\n        || (chartData.subcharts\n          && chartData.subcharts[subchartIndex].dataArray)\n        || null\n        || null;\n      if (!dataArray) return; // early return if there is no data to render\n\n      const dateStrings = dataArray.map(item => item.day);\n      const values = dataArray.map(item => item.value);\n      const dateRange = getDateRangeForCalendarChart(dateStrings);\n\n      setCalendarData({\n        data: dataArray,\n        dateRange: dateRange,\n        valueRange: getValueRangeForCalendarChart(values)\n      });\n\n      // Get the number of years in the dateRange\n      const startYear = new Date(dateRange.min).getFullYear();\n      const endYear = new Date(dateRange.max).getFullYear();\n      const numberOfYear = endYear - startYear + 1;\n\n      // Calculate the size of each cell\n      const cellSize = Math.min(containerWidth / 60, 20); // max cell size of 20\n      const yearHeight = cellSize * 7; // Height for one year\n\n      const calendarChartMargin = getCalendarChartMargin(isPortrait);\n\n      // Calculate the total height based on the number of years and margins\n      let totalHeight;\n      if (numberOfYear == 1) {\n        totalHeight = yearHeight + yearSpacing + calendarChartMargin.top + calendarChartMargin.bottom\n      }\n      else {\n        totalHeight = numberOfYear * (yearHeight + yearSpacing) + calendarChartMargin.top + calendarChartMargin.bottom;\n      }\n      setCalendarHeight(totalHeight);\n\n    }, [chartData]);\n\n    return (\n      <GoogleChartStyleWrapper\n        isPortrait={isPortrait}\n        className={className}\n        position=\"relative\"\n        minWidth=\"700px\"\n        minHeight={isPortrait ? '200px' : calendarHeight + 'px'}\n        height={calendarHeight + 'px'}\n        maxHeight={isPortrait && '550px'}\n      >\n        {calendarData ?\n          <CalendarChart\n            data={calendarData.data}\n            dateRange={calendarData.dateRange}\n            valueRange={calendarData.valueRange}\n            isPortrait={isPortrait}\n            options={options}\n          />\n          :\n          (\n            <Box sx={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\n              <LoadingAnimation />\n\n            </Box>\n          )\n        }\n      </GoogleChartStyleWrapper>\n    );\n  }\n\n  // Properties for chart control (if existed)\n  let hasChartControl = false;\n  let chartControlOptions;\n  // Only show the chart control if:\n  // It exists in the database (either for all subcharts or just for a particular subchart)\n  // And if the chart is currently not shown on homePage\n  let chartControl = chartData.control || chartData.subcharts?.[subchartIndex].control;\n  if (chartControl && (isHomepage !== true)) {\n    hasChartControl = true;\n\n    // Get the options for chartControl if hasChartControl\n    chartControlOptions = {\n      ...chartControl.options,\n      ui: returnChartControlUI({\n        chartControl,\n        mainChartData: chartData,\n        mainChartOptions: options,\n        subchartIndex,\n        theme,\n        isPortrait\n      })\n    };\n\n    // Swap touch events for mouse events on ChartRangeControl\n    // as it doesn't support touch events on mobile\n    if (chartControl.controlType === 'ChartRangeFilter') {\n      useEffect(() => {\n        const cleanupTouchEventListener = addTouchEventListenerForChartControl({ controlWrapper, chartID });\n        return cleanupTouchEventListener;\n      }, [controlWrapper]);\n    }\n  }\n\n  // Properties for selecting (showing or hiding) the serie(s)\n  const seriesSelector = options.seriesSelector || false;\n\n  // Set new options prop and re-render the chart if theme or isPortrait changes\n  useEffect(() => {\n    if (seriesSelector) handleSeriesSelection(dataColumns); // this function set new options, too\n    else {\n      chartWrapper?.setOptions({\n        ...options,\n        ...(chartData.chartType === 'Calendar' && { height: chartTotalHeight })\n      });\n\n      chartWrapper?.draw();\n      if (hasChartControl) {\n        controlWrapper?.setOptions(chartControlOptions);\n        controlWrapper?.draw();\n      }\n    }\n  }, [theme, isPortrait, windowSize, chartTotalHeight]);\n\n  // Set new initialColumnsColors if the theme changes\n  // This only applies to when seriesSelector.method == \"setViewColumn\"\n  useEffect(() => {\n    if (!dataColumns) return;\n    if (seriesSelector && seriesSelector.method == \"setViewColumn\") {\n      setInitialColumnsColors({ dataColumns: dataColumns });\n      handleSeriesSelection(dataColumns);\n    }\n  }, [theme]);\n\n  const getInitialColumns = ({ chartWrapper, dataTable, seriesSelector }) => {\n    // Update the initial DataView's columns (often, all of the series are displayed initially)\n    var initialView = chartWrapper.getView();\n    // If (optional) columns is not specified in database\n    // Assign it from DataTable\n    if (initialView.columns == null) {\n      const viewFromDataTable = new google.visualization.DataView(dataTable);\n      chartWrapper.setView({\n        columns: viewFromDataTable.columns\n      });\n      initialView = chartWrapper.getView();\n    }\n\n    let shouldAssignDomainRoleToFistColumn = true; // variable to only assign type: 'domain' to the very first column\n    let dataSeriesIndex = 0;\n    const allInitialColumns = initialView.columns.map((col, index) => {\n      // A column can either be a number (that denotes the index of the sourceColumn) or an object\n      // The code below harmonize all columns to be an object to store crucial data to toggle their visibility\n      if (typeof col === 'number') col = {\n        role: shouldAssignDomainRoleToFistColumn ? 'domain' : 'data',\n        sourceColumn: col\n      }\n      col.label = dataTable.getColumnLabel(col.sourceColumn);\n      col.indexInAllInitialColumns = index;\n\n      shouldAssignDomainRoleToFistColumn = shouldAssignDomainRoleToFistColumn && false;\n\n      // Set the visibility of data column, \n      if (col.role === 'data') {\n        // initially, all data columns are selected if multiple series are selectable\n        if (seriesSelector?.allowMultiple) {\n          col.selected = true;\n        } else {\n          // else for single serie selector, only first data column is selected\n          if (dataSeriesIndex === 0) {\n            col.selected = true;\n          } else {\n            col.selected = false;\n          }\n        }\n        col.seriesIndex = dataSeriesIndex;\n        dataSeriesIndex++;\n      }\n      return col;\n    });\n    setAllInitialColumns(allInitialColumns);\n    const initialVAxisRange = getInitialVAxisRange({ dataTable: dataTable, allInitialColumns: allInitialColumns });\n    setInitialVAxisRage(initialVAxisRange);\n    // To track selection, only get the columns that are:\n    // role === 'data'\n    // visibleInLegend !== false\n    const dataColumns = allInitialColumns.filter((col) => {\n      return col.role === 'data' && options.series?.[col.seriesIndex]?.visibleInLegend !== false;\n    });\n\n    if (seriesSelector.method === \"setViewColumn\") setInitialColumnsColors({ dataColumns: dataColumns });\n\n    setDataColumns(dataColumns);\n    return dataColumns;\n  };\n\n  const setInitialColumnsColors = ({ dataColumns }) => {\n    dataColumns.forEach((col) => {\n      // Assign inherit color to this data column\n      col.color = options.colors[col.seriesIndex % options.colors.length];\n      // Assign other inherit attributes from its serie object (if existed)\n      col.serieAttribute = options.series?.[col.seriesIndex];\n    });\n  }\n\n  const getInitialVAxisRange = ({ dataTable, allInitialColumns }) => {\n    let vAxisMin, vAxisMax;\n    allInitialColumns.forEach((col, index) => {\n      if (index === 0) return; // the first column is the domain (hAxis)\n      const range = dataTable.getColumnRange(col.sourceColumn);\n      if (!isNaN(range.min) && range.min) vAxisMin = vAxisMin ? Math.min(vAxisMin, range.min) : range.min;\n      if (!isNaN(range.max) && range.max) vAxisMax = vAxisMax ? Math.max(vAxisMax, range.max) : range.max;\n    });\n    return { min: vAxisMin, max: vAxisMax };\n  }\n\n  const handleSeriesSelection = (newDataColumns, _chartWrapper = chartWrapper) => {\n    if (!allInitialColumns) return;\n\n    setDataColumns(newDataColumns);\n\n    if (seriesSelector.method === \"toggleVisibility\" || seriesSelector.method === null) {\n      const hiddenSeriesObject = {};\n      newDataColumns.forEach((col) => {\n        if (!col.selected)\n          hiddenSeriesObject[col.seriesIndex] = {\n            color: 'transparent',\n            enableInteractivity: false,\n            visibleInLegend: false\n          }; // 'hide' the serie by making it transparent\n      });\n\n      _chartWrapper?.setOptions({\n        ...options,\n        series: {\n          ...options.series,\n          ...hiddenSeriesObject\n        }\n      });\n    }\n    else if (seriesSelector.method === \"setViewColumn\") {\n      let newViewColumns = [];\n      newViewColumns.push(0); // this is the domain column\n      newDataColumns.forEach((dataColumn) => {\n        if (dataColumn.selected) {\n          newViewColumns.push(dataColumn);\n          // Find this dataColumn's supporting columns (whose role !== 'data')\n          // A dataColumn has its supporting columns (can be many) follow it immediately\n          for (let i = dataColumn.indexInAllInitialColumns + 1; i < allInitialColumns.length; i++) {\n            if (allInitialColumns[i].role !== 'data') {\n              newViewColumns.push(allInitialColumns[i]);\n            }\n            // If this loop encounter the next dataColumn, break the loop, all supporting columns for this dataColumn have been discovered\n            else {\n              break;\n            }\n          }\n        }\n      });\n      _chartWrapper?.setView({ columns: newViewColumns });\n\n      const newOptions = { ...options };\n      // Preserve the initial vAxis range so that the vAxis doesn't shift based on the visible serie(s)\n      // newOptions.vAxis.viewWindow = {\n      //   min: (options.vAxis.viewWindow.min == null) ? initialVAxisRange.min : options.vAxis.viewWindow.min,\n      //   max: (options.vAxis.viewWindow.max == null) ? initialVAxisRange.max : options.vAxis.viewWindow.max,\n      // }\n      // Set the new color array\n      newOptions.colors = newDataColumns.filter((col) => col.selected).map((col) => col.color);\n      // Set the new series object (if any)\n      // this contains other series' attributes (lineWidth, seriesType...)\n      const series = {};\n      let selectedSeriesCount = 0;\n      newDataColumns.forEach((col) => {\n        if (!col.selected) return;\n        if (col.serieAttribute != null) {\n          series[selectedSeriesCount] = col.serieAttribute;\n        }\n        selectedSeriesCount++;\n      })\n      newOptions.series = series;\n      _chartWrapper?.setOptions(newOptions);\n    }\n\n    // Call draw to apply the new DataView and 'refresh' the chart\n    _chartWrapper?.draw();\n\n    if (hasChartControl) {\n      controlWrapper?.draw();\n    }\n  };\n\n  const reconstructFunctionFromJSONstring = (columns) => {\n    if (!columns) return;\n\n    const evaluatedColumns = [];\n    for (const column of columns) {\n      if (typeof column === 'number') {\n        // If it's a number, add it as-is\n        evaluatedColumns.push(column);\n      } else if (typeof column === 'object') {\n        if (column.calc && column.calc !== 'stringify') {\n          // If it's an object with a 'calc' property, evaluate the 'calc' function\n          // using new Function() and add the result to the evaluatedColumns array\n          const calcFunction = new Function(\"dataTable\", \"rowNum\", column.calc);\n          evaluatedColumns.push({\n            ...column,\n            calc: calcFunction,\n          });\n        } else {\n          // If it's an object without a 'calc' property, or with calc = 'stringify', add it as-is\n          evaluatedColumns.push(column);\n        }\n      }\n    }\n    return evaluatedColumns;\n  }\n\n\n  // Call this function to fetch the data and draw the initial chart\n  useEffect(() => {\n    if (google && chartData) {\n      // Not applicable for Calendar chart\n      if (chartData.chartType === \"Calendar\") return;\n\n      // Get and set the dataArray \n      const dataArray = chartData.dataArray\n        || (chartData.subcharts\n          && chartData.subcharts[subchartIndex].dataArray)\n        || null\n        || null;\n      if (!dataArray) return; // early return if there is no data to render\n\n      const thisDataTable = google.visualization.arrayToDataTable(dataArray);\n      setDataTable(thisDataTable);\n\n      // Get dataColumn views\n      const columns = chartData.columns\n        || (chartData.subcharts\n          && chartData.subcharts[subchartIndex].columns)\n        || null\n        || null;\n      const reconstructedColumns = reconstructFunctionFromJSONstring(columns);\n\n      // Create chartWrapper\n      const thisChartWrapper = new google.visualization.ChartWrapper({\n        chartType: chartData.chartType,\n        dataTable: (!hasChartControl) ? thisDataTable : undefined,\n        options: options,\n        view: {\n          columns: reconstructedColumns\n        },\n        containerId: chartID\n      });\n      setChartWrapper(thisChartWrapper);\n\n      if (hasChartControl) {\n        const thisDashboardWrapper = new google.visualization.Dashboard(\n          document.getElementById(`dashboard-${chartID}`));\n        setDashboardWrapper(thisDashboardWrapper);\n\n        google.visualization.events.addListener(thisDashboardWrapper, 'ready', onChartReady);\n\n        const thisControlWrapper = new google.visualization.ControlWrapper({\n          controlType: chartControl.controlType,\n          options: chartControlOptions,\n          containerId: `control-${chartID}`\n        });\n        setControlWrapper(thisControlWrapper);\n\n        // Establish dependencies\n        thisDashboardWrapper.bind(thisControlWrapper, thisChartWrapper);\n\n        thisDashboardWrapper.draw(thisDataTable);\n      }\n      else {\n        google.visualization.events.addListener(thisChartWrapper, 'ready', onChartReady);\n        thisChartWrapper.draw();\n      }\n\n      // Run the seriesSelector for the first time\n      if (seriesSelector) {\n        const initColumns = getInitialColumns({ chartWrapper: thisChartWrapper, dataTable: thisDataTable, seriesSelector: seriesSelector });\n        handleSeriesSelection(initColumns, thisChartWrapper);\n      }\n    }\n  }, [google, chartData]);\n\n  const renderChart = () => {\n    if (hasChartControl) {\n      return (\n        <Stack\n          id={`dashboard-${chartID}`}\n          direction={ChartControlType[chartControl.controlType]?.stackDirection || 'column-reverse'}\n          sx={{ height: '100%' }}\n        >\n          <Box\n            id={`control-${chartID}`}\n            sx={{\n              height: `calc(${height} / 8)`,\n              opacity: 0.8,\n              filter: 'saturate(0.3)'\n            }}\n          />\n          <Box id={chartID} sx={{ height: height, maxHeight: maxHeight }} />\n        </Stack>\n      )\n    }\n    else return <Box id={chartID} sx={{ height: height, maxHeight: maxHeight }} />;\n  }\n\n  const onChartReady = () => {\n    if (!isFirstRender) return;\n    // Hide the circleProgress when chart finishes rendering the first time\n    setIsFirstRender(false);\n  };\n\n  return (\n    <GoogleChartStyleWrapper\n      isPortrait={isPortrait}\n      className={className}\n      position=\"relative\"\n      height=\"100%\"\n      minHeight={chartData.chartType === 'Calendar' && '200px'}\n    >\n      {/* Conditionally display loading animation here */}\n      {isFirstRender && (\n        <Box sx={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\n          <LoadingAnimation />\n        </Box>\n      )}\n\n      {/* Conditionally display seriesSelector here */}\n      {(seriesSelector && !isFirstRender) && (\n        <SeriesSelector\n          items={dataColumns}\n          allowMultiple={seriesSelector.allowMultiple}\n          selectorID={`${chartData.title}-selector`}\n          onSeriesSelection={handleSeriesSelection}\n        />\n      )}\n\n      {/* Display chart here */}\n      {renderChart()}\n    </GoogleChartStyleWrapper>\n  );\n}","import { useState, useRef } from 'react';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport ClickAwayListener from '@mui/material/ClickAwayListener';\nimport parse from 'html-react-parser';\nimport { useMediaQuery, useTheme } from '@mui/material';\nimport { replacePlainHTMLWithMuiComponents } from '../Utils/Utils';\n\nfunction CollapsibleSubtitle({ text, wordLimit = 40, reference }) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const subtitleRef = useRef(null);\n\n  const words = text.split(' ');\n\n  // If not on mobile or words are within limit, just display the full text\n  if (!isMobile || words.length / wordLimit <= 1.4) {\n    return (\n      <Box>\n        <Typography>{parse(text, { replace: replacePlainHTMLWithMuiComponents })}</Typography>\n        {reference && (\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            {parse(reference, { replace: replacePlainHTMLWithMuiComponents })}\n          </Typography>\n        )}\n      </Box>\n    );\n  }\n\n  let displayText = words.slice(0, wordLimit).join(' ');\n  const lastFullStop = displayText.lastIndexOf('.');\n\n  if (lastFullStop !== -1) {\n    displayText = displayText.slice(0, lastFullStop + 1);\n  }\n\n  // Do not collapse if the user clicks on the chart associated with the subtitle\n  const isClickWithinSharedParent = (event) => {\n    let { target } = event;\n    // .MuiContainer-root - Container for both the subtitle and the chart\n    const subtitleParent = subtitleRef.current.closest('.MuiContainer-root');\n    // Elements used to detect if the click is on a chart\n    const chartElements = new Set(['rect', 'path', 'svg', 'circle']);\n\n    while (target != null) {\n      // Check if a chart is clicked\n      if (chartElements.has(target.tagName)) {\n        // If the chart element and the subtitle element share the same container\n        // it means that the click is on the chart associated with the subtitle\n        // As such, we should not collapse the subtitle\n        const targetParent = target.closest('.MuiContainer-root');\n        return targetParent === subtitleParent;\n      }\n      target = target.parentNode; // Move up the DOM tree\n    }\n    return false;\n  };\n\n  // Custom onClickAway handler\n  const handleOnClickAway = (event) => {\n    if (!isClickWithinSharedParent(event)) {\n      setIsExpanded(false);\n    }\n  };\n\n  return (\n    <ClickAwayListener onClickAway={handleOnClickAway}>\n      <Box ref={subtitleRef} onClick={() => setIsExpanded(!isExpanded)} style={{ cursor: 'pointer' }}>\n        {isExpanded ? (\n          <>\n            <Typography>{parse(text, { replace: replacePlainHTMLWithMuiComponents })}</Typography>\n            {reference && <Typography variant=\"caption\" color=\"text.secondary\">{parse(reference, { replace: replacePlainHTMLWithMuiComponents })}</Typography>}\n          </>\n        ) : (\n          <>\n            <Typography display=\"inline\">\n              {parse(displayText, { replace: replacePlainHTMLWithMuiComponents })}\n              ...\n            </Typography>\n            <Typography display=\"inline\" color=\"text.primary\" fontWeight=\"500\" sx={{ ml: 0.5, '& :hover': { textDecoration: 'underline' } }}>\n              See more\n            </Typography>\n          </>\n        )}\n      </Box>\n    </ClickAwayListener>\n  );\n}\n\nexport default CollapsibleSubtitle;\n","import { useState, useEffect } from 'react';\nimport { styled } from '@mui/material/styles';\nimport { Box, Tabs, Tab, useMediaQuery, Typography } from '@mui/material/';\n\nimport SubChart from './Subchart/SubChart';\n\nimport CollapsibleSubtitle from './../Components/CollapsibleSubtitle';\nimport { index } from 'd3';\n\nconst debounceMilliseconds = 100;\n\nconst ChartStyleWrapper = styled(Box)(({ theme }) => ({\n  // CSS for dark theme only\n  ...(theme.palette.mode === 'dark' && {\n    // De-saturate a bit\n    filter: 'saturate(0.85)',\n    // Invert iframe\n    '& .heat-map-iframe': {\n      filter: 'invert(0.848) hue-rotate(180deg)',\n    }\n  }),\n  // Special CSS for historical-snapshot-aqi chart\n  '& .historical-snapshot-aqi svg [clip-path*=\"ABSTRACT_RENDERER\"] > g:nth-of-type(1), .historical-snapshot-aqi [id*=\"googlechart-control\"] svg [clip-path*=\"ABSTRACT_RENDERER\"] > g:nth-of-type(2)': {\n    opacity: 0.6\n  },\n  // Center Calendar chart in wrapper\n  '& .Calendar [dir]:not(:empty)': {\n    margin: 'auto'\n  },\n\n  // add horizontal scrollbar to Calendar charts\n  '& .Calendar > div > div:last-of-type > div': {\n    overflowX: 'auto',\n    overflowY: 'hidden',\n    scrollbarGutter: 'stable'\n  }\n}));\n\nconst StyledTabs = styled(Tabs)(({ theme }) => ({\n  '& .MuiTabScrollButton-root': {\n    color: theme.palette.text.primary\n  },\n  '& .MuiTab-root': {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '0.75rem',\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1)\n    },\n  }\n}));\n\n// eslint-disable-next-line max-len\nfunction ChartControl(props) {\n  const {\n    generalChartSubtitle,\n    generalChartReference,\n    chartData: passedChartData,\n    chartHeight: passedChartHeight,\n    isHomepage\n  } = props;\n  const isSmallWidth = useMediaQuery((theme) => theme.breakpoints.down('sm'));\n\n  const [isPortrait, setIsPortrait] = useState(window.matchMedia('(orientation: portrait)').matches);\n  const [windowSize, setWindowSize] = useState([\n    window.innerWidth,\n    window.innerHeight,\n  ]);\n\n  let chartMaxHeight;\n  let chartHeight = passedChartHeight;\n  const chartData = passedChartData;\n\n  // Props for tab panels (multiple data visualizations in the same chart area, navigate with tab panels)\n  const [currentTab, setCurrentTab] = useState(0); // start with the first tab\n\n  // eventListener for window resize\n  // redraw \"Calendar\" charts and charts with a time filter upon window resize.\n  // Filter & Calendar charts are not automatically respnsive, so we have to redraw them.\n  // redraw other charts when device orientation changes\n  useEffect(() => {\n    setCurrentTab(0); // set tab back to 0 if chartData changes (changed school)\n\n    let timeoutID = null;\n\n    const handleWindowResize = () => {\n      clearTimeout(timeoutID);\n\n      // debounce before triggering re-render. as user is resizing window, the state could\n      // change multiple times causing many expensive rerenders. we try to rerender at the\n      // end of the resize.\n      timeoutID = setTimeout(() => {\n        // Redraw all charts on device orientation change, as the chartWrapperHeights\n        // have changed.\n        setIsPortrait(window.matchMedia('(orientation: portrait)').matches);\n\n        // Redraw all charts on window resized\n        setWindowSize([window.innerWidth, window.innerHeight]);\n      }, debounceMilliseconds);\n    };\n\n    // listen to window resize events\n    window.addEventListener('resize', handleWindowResize);\n\n    return () => {\n      window.removeEventListener('resize', handleWindowResize);\n    };\n  }, [chartData]);\n\n  if (chartData.chartType !== 'Calendar' && !chartHeight) {\n    chartHeight = isPortrait ? '80vw' : '35vw';\n    chartMaxHeight = isPortrait ? '800px' : '500px';\n  }\n\n  // Handle tab change\n  const handleChange = (__, newValue) => {\n    setCurrentTab(newValue);\n  };\n\n  // Function to render only one chart (no subchart --> no tab control)\n  const renderOnlyOneChart = () => {\n    return (\n      <SubChart\n        chartData={chartData}\n        isPortrait={isPortrait}\n        isHomepage={isHomepage}\n        windowSize={windowSize}\n        height={chartData.height ? chartData.height : chartHeight}\n      />\n    );\n  }\n\n  // Function to render multiple subcharts with tab control\n  const renderMultipleSubcharts = () => {\n    return (\n      <>\n        <StyledTabs\n          value={currentTab}\n          onChange={handleChange}\n          variant={isSmallWidth ? 'fullWidth' : 'standard'}\n        >\n          {chartData.subcharts.map((element, index) => (\n            <Tab\n              key={index}\n              value={index}\n              label={chartData.subcharts[index].subchartTitle}\n            />\n          ))}\n        </StyledTabs>\n        <Box\n          position=\"relative\"\n          sx={{\n            overflowX: isPortrait && 'auto',\n            WebkitOverflowScrolling: isPortrait && 'touch',\n            overflowY: 'hidden',\n          }}\n        >\n          {chartData.subcharts.map((__, index) => (\n            <Box\n              key={index}\n              width=\"100%\"\n              height=\"100%\"\n              role=\"tabpanel\"\n              sx={{\n                transition: '0.35s',\n                position: (index === 0) ? '' : 'absolute',\n                opacity: currentTab === index ? '1' : '0',\n                pointerEvents: currentTab === index ? 'auto' : 'none',\n                top: (index === 0) ? '' : 0,\n              }}\n            >\n              <SubChart\n                chartData={chartData}\n                subchartIndex={index}\n                isPortrait={isPortrait}\n                isHomepage={isHomepage}\n                windowSize={windowSize}\n                height={chartData.height ? chartData.height : chartHeight}\n                maxHeight={\n                  ['Calendar'].includes(chartData.chartType)\n                    ? ''\n                    : chartMaxHeight\n                }\n              />\n            </Box>\n          ))}\n        </Box>\n      </>\n    )\n  };\n\n  // Function to render remaining subtitles and references for chart with multiple subcharts\n  const getSubtitles = () => {\n    let text = generalChartSubtitle || '';\n    if (chartData.subcharts && chartData.subcharts[currentTab]?.subchartSubtitle) {\n      text += '<br/>'\n      text += chartData.subcharts[currentTab].subchartSubtitle;\n    }\n    return text;\n  }\n  const getReferences = () => {\n    let text = generalChartReference || '';\n    if (chartData.subcharts && chartData.subcharts[currentTab]?.reference) {\n      text += '<br/>'\n      text += chartData.subcharts[currentTab].reference;\n    }\n    return text;\n  }\n\n  return (\n    <ChartStyleWrapper height=\"100%\">\n      {chartData.subcharts ? renderMultipleSubcharts() : renderOnlyOneChart()}\n\n      {/* Render subtitle and reference below */}\n      <Box sx={{ my: 3 }}>\n        <Typography\n          component=\"div\"\n          variant=\"body1\"\n          color=\"text.secondary\"\n          sx={{ mb: 1 }}\n        >\n          <CollapsibleSubtitle\n            text={getSubtitles()}\n            reference={getReferences()}\n          />\n        </Typography>\n      </Box>\n    </ChartStyleWrapper>\n  );\n}\n\nexport default ChartControl;\n","import { Box, Table, TableBody, TableCell, TableHead, TableRow, styled } from '@mui/material';\nimport parse from 'html-react-parser';\nimport { replacePlainHTMLWithMuiComponents } from '../../Utils/Utils';\nimport ChartControl from '../ChartControl';\nimport AQIdatabase from '../../Utils/AirQualityIndexHelper';\nimport ThemePreferences from '../../Themes/ThemePreferences';\n\nexport const StyledTable = styled(Table)(({ theme, isTiny }) => ({\n  minWidth: isTiny || 700,\n  '& th, td': {\n    fontSize: isTiny ? '0.625rem' : '0.6875rem',\n    color: theme.palette.text.secondary,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: isTiny ? '0.5rem' : '0.6875rem',\n    },\n  },\n  '& th': {\n    fontWeight: 500,\n    color: theme.palette.text.primary,\n    lineHeight: '1rem'\n  }\n}));\n\nfunction AirQualityIndexTable(props) {\n  const { isTiny, hideAQIDescription, themePreference } = props;\n\n  const renderAQIchart = ({ shouldRender }) => {\n    let aqiChart = null;\n\n    if (shouldRender) {\n      const dataArray = [['category'], ['US AQI']];\n      for (let i = 0; i < AQIdatabase.length; i += 1) {\n        dataArray[0].push(AQIdatabase[i].category);\n        dataArray[1].push(\n          Math.ceil((AQIdatabase[i].aqiUS.high - AQIdatabase[i].aqiUS.low) / 50) * 50\n        );\n      }\n\n      aqiChart = (\n        <ChartControl\n          chartHeight=\"4rem\"\n          chartData={\n            {\n              dataArray,\n              chartType: 'BarChart',\n              options: {\n                enableInteractivity: false,\n                legend: { position: 'none' },\n                hAxis: {\n                  ticks: [0, 50, 100, 150, 200, 300, 500]\n                },\n                chartArea:\n                {\n                  width: { portrait: '98%', landscape: '50%' },\n                  height: { portrait: '20%', landscape: '30%' }\n                },\n                isStacked: true,\n                colors: 'aqi',\n                bar: { groupWidth: '100%' }\n              }\n            }\n          }\n        />\n      );\n    }\n\n    return aqiChart;\n  };\n\n  return (\n    <>\n      <Box overflow=\"auto\">\n        <StyledTable size=\"small\" isTiny={isTiny}>\n          <TableHead>\n            <TableRow>\n              <TableCell sx={{ pr: 0 }}>\n                <Box sx={{ width: '1em', height: '1em' }} />\n              </TableCell>\n              <TableCell sx={{ pl: 1 }}>\n                Category\n              </TableCell>\n              <TableCell align=\"right\">US AQI</TableCell>\n              <TableCell align=\"right\">\n                PM2.5 Concentration\n                (g/m\n                <sup>3</sup>\n                )\n              </TableCell>\n              {!hideAQIDescription && <TableCell align=\"left\">Description</TableCell>}\n              {!hideAQIDescription && <TableCell align=\"left\">CITIESair&apos; Suggested Actions</TableCell>}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {AQIdatabase.map((element, index) => (\n              <TableRow\n                key={index}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n              >\n                <TableCell sx={{ pr: 0 }}>\n                  <Box sx={{ width: '1em', height: '1em', backgroundColor: themePreference === ThemePreferences.light ? element.lightThemeColor : element.darkThemeColor }} />\n                </TableCell>\n                <TableCell sx={{ pl: 1 }}>\n                  {element.category}\n                </TableCell>\n                <TableCell align=\"right\">\n                  {element.aqiUS.low}\n                  &nbsp;\n                  -\n                  &nbsp;\n                  {element.aqiUS.high}\n                </TableCell>\n                <TableCell align=\"right\">\n                  {element.rawPM2_5.low}\n                  &nbsp;\n                  -\n                  &nbsp;\n                  {element.rawPM2_5.high}\n                </TableCell>\n                {!hideAQIDescription && <TableCell align=\"left\">{element.description}</TableCell>}\n                {!hideAQIDescription\n                  && (\n                    <TableCell align=\"left\">\n                      {\n                        parse(element.healthSuggestions.outdoors, {\n                          replace: replacePlainHTMLWithMuiComponents,\n                        })\n                      }\n                    </TableCell>\n                  )}\n              </TableRow>\n            ))}\n          </TableBody>\n        </StyledTable>\n      </Box>\n      {renderAQIchart({ shouldRender: !hideAQIDescription })}\n    </>\n\n  );\n}\n\nexport default AirQualityIndexTable;\n","import { lazy, Suspense } from 'react';\nimport LoadingAnimation from '../../Components/LoadingAnimation';\n\nexport default function ChartSubstituteComponentLoader({ chartSubstituteComponentName }) {\n  return (\n    <Suspense fallback={<LoadingAnimation />}>\n      {(() => {\n        const ChartSubstituteComponent = lazy(\n          () => import(`./${chartSubstituteComponentName}`)\n        );\n        return <ChartSubstituteComponent />;\n      })()}\n    </Suspense>\n  );\n}\n","import { useState } from 'react';\nimport { isMobile } from 'react-device-detect';\n\nimport { Fab, Fade, Popper, Paper, Typography, Stack } from '@mui/material';\nimport AirIcon from '@mui/icons-material/Air';\nimport { FadeInButtonForSpeedDial } from './Header/FadeInButtonForSpeedDial';\n\nimport * as Tracking from '../Utils/Tracking';\nimport AirQualityIndexTable from '../Graphs/ChartSubstituteComponents/AirQualityIndexTable';\n\nexport default function AirQualityIndexLegendQuickGlance(props) {\n  // Mechanism for opening and closing the Quick Glance on hover\n  const [anchorEl, setAnchorEl] = useState(null);\n  const handlePopperOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n    Tracking.sendEventAnalytics(Tracking.Events.airQualityIndexLegendQuickGlance);\n  };\n  const handlePopperClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n\n  return (\n    <>\n      <FadeInButtonForSpeedDial {...props} distanceFromBottomOfWindow=\"5.5rem\">\n        <Fab\n          sx={{ mt: 1 }}\n          aria-owns={open ? Tracking.Events.airQualityIndexLegendQuickGlance : undefined}\n          aria-haspopup=\"true\"\n          onMouseEnter={handlePopperOpen}\n          onMouseLeave={handlePopperClose}\n          onClick={(event) => isMobile && (open ? handlePopperClose() : handlePopperOpen(event))}\n          aria-label={Tracking.Events.airQualityIndexLegendQuickGlance}\n          color=\"primary\"\n        >\n          <Stack direction=\"column\" alignItems=\"center\">\n            <AirIcon fontSize=\"1rem\" />\n            <Typography variant=\"body2\" fontWeight=\"500\">\n              AQI\n            </Typography>\n          </Stack>\n        </Fab>\n      </FadeInButtonForSpeedDial>\n\n      <Popper\n        id={Tracking.Events.airQualityIndexLegendQuickGlance}\n        sx={{\n          pointerEvents: 'none',\n          mt: -1\n        }}\n        open={open}\n        anchorEl={anchorEl}\n        placement=\"top-end\"\n        onClose={handlePopperClose}\n        keepMounted\n        disableRestoreFocus\n        transition\n      >\n        {({ TransitionProps }) => (\n          <Fade {...TransitionProps} timeout={350}>\n            <Paper elevation={8} sx={{ py: 0.5, mb: 1 }}>\n              <Typography sx={{ mx: 2, mt: 1 }} color=\"text.disabled\" variant=\"body1\" fontWeight={500}>\n                AQI at quick glance\n              </Typography>\n              <AirQualityIndexTable isTiny hideAQIDescription themePreference />\n            </Paper>\n          </Fade>\n        )}\n\n      </Popper>\n    </>\n  );\n}\n","// disable eslint for this file\n/* eslint-disable */\nimport { useState, useEffect } from 'react';\nimport { Box, Link, Typography, Stack, Select, FormControl, MenuItem, Grid, Chip, Dialog, Button, DialogActions, DialogContent, useMediaQuery, Table, TableBody, TableCell, TableHead, TableRow } from '@mui/material';\nimport { useTheme } from '@mui/material/styles';\n\nimport DownloadIcon from '@mui/icons-material/Download';\nimport DataObjectIcon from '@mui/icons-material/DataObject';\nimport ChevronLeftIcon from '@mui/icons-material/ChevronLeft';\n\nimport * as Tracking from '../../Utils/Tracking';\nimport { fetchDataFromURL } from './DatasetFetcher';\nimport { RawDatasetType, getRawDatasetUrl } from '../../Utils/ApiUtils';\nimport LoadingAnimation from '../LoadingAnimation';\n\nexport default function DatasetDownloadDialog(props) {\n  const { schoolID, initialSensorList } = props;\n\n  const [sensorsDatasets, updateSensorsDatasets] = useState(initialSensorList);\n\n  const [previewingDataset, setPreviewingDataset] = useState(\"placeholder\");\n\n  // Update initialSensorList once if sensorsDatasets is an empty object\n  useEffect(() => {\n    updateSensorsDatasets(initialSensorList);\n  }, [initialSensorList]);\n\n  const theme = useTheme();\n  const smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const [open, setOpen] = useState(false);\n  const handleOpen = () => {\n    setPreviewingDataset(null);\n    setOpen(true);\n  }\n  const handleClose = () => {\n    updateSensorsDatasets(initialSensorList);\n    setOpen(false);\n  }\n\n  return (\n    <>\n      <Button\n        onClick={() => {\n          handleOpen();\n          Tracking.sendEventAnalytics(Tracking.Events.rawDatasetButtonClicked);\n        }}\n        variant=\"contained\"\n      >\n        <DataObjectIcon sx={{ fontSize: '1rem' }} />&nbsp;Raw Dataset\n      </Button>\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        maxWidth=\"lg\"\n        fullWidth\n        fullScreen={smallScreen}\n        keepMounted\n      >\n        {(\n          smallScreen &&\n          <DialogActions justifyContent=\"flex-start\">\n            <Button autoFocus onClick={handleClose}>\n              <ChevronLeftIcon sx={{ fontSize: '1rem' }} />Back\n            </Button>\n          </DialogActions>\n        )}\n\n        <DialogContent sx={{\n          px: smallScreen ? 2 : 3,\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'start',\n          height: '100%'\n        }}>\n          <Chip label={schoolID ? `School: ${schoolID.toUpperCase()}` : \"No School\"} size=\"small\" sx={{ mb: 1 }} />\n          <Typography variant=\"h6\" >\n            Preview and download raw dataset(s)\n          </Typography>\n\n          <DatasetSelectorAndPreviewer\n            sensorsDatasets={sensorsDatasets}\n            updateSensorsDatasets={updateSensorsDatasets}\n            previewingDataset={previewingDataset}\n            setPreviewingDataset={setPreviewingDataset}\n            smallScreen={smallScreen}\n            schoolID={schoolID}\n          />\n          {\n            sensorsDatasets &&\n            <Typography variant=\"caption\" sx={{ my: 3, fontStyle: 'italic' }} >\n              These datasets are provided by CITIESair from sensors operated by CITIESair. Should you intend to utilize them for your project, research, or publication, we kindly request that you notify us at <Link href='mailto:nyuad.cities@nyu.edu'>nyuad.cities@nyu.edu</Link> to discuss citation requirements.\n            </Typography>\n          }\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n\nconst DatasetSelectorAndPreviewer = (props) => {\n  const { sensorsDatasets, updateSensorsDatasets, previewingDataset, setPreviewingDataset, smallScreen, schoolID } = props;\n\n  // Preview the hourly type of the first sensor initially\n  useEffect(() => {\n    if (Object.keys(sensorsDatasets).length > 0 && !previewingDataset) {\n      const firstSensor = Object.keys(sensorsDatasets)[0];\n      const initialDatasetType = RawDatasetType.hourly;\n\n      setPreviewingDataset({\n        sensor: firstSensor,\n        datasetType: initialDatasetType\n      });\n\n      // If this dataset has been fetched before, early return\n      if (sensorsDatasets[firstSensor].rawDatasets[initialDatasetType].sample) return;\n\n      const url = getRawDatasetUrl({\n        school_id: schoolID,\n        sensor_location_short: firstSensor,\n        datasetType: initialDatasetType,\n        isSample: true\n      });\n\n      fetchDataFromURL({ url, extension: 'csv', needsAuthorization: true })\n        .then((data) => {\n          const tmp = { ...sensorsDatasets };\n          tmp[firstSensor].rawDatasets[initialDatasetType].sample = data;\n          updateSensorsDatasets(tmp);\n        })\n        .catch((error) => console.log(error));\n    }\n  }, [sensorsDatasets, previewingDataset]);\n\n  return (\n    <Grid container justifyContent=\"center\" alignItems=\"start\" spacing={3}>\n      <Grid item sm={12} md={6}>\n        <DatasetsTable\n          schoolID={schoolID}\n          sensorsDatasets={sensorsDatasets}\n          updateSensorsDatasets={updateSensorsDatasets}\n          smallScreen={smallScreen}\n          previewingDataset={previewingDataset}\n          setPreviewingDataset={setPreviewingDataset}\n        />\n      </Grid>\n      <Grid item sm={12} md={6} maxWidth={smallScreen ? '100%' : 'unset'} sx={{ mt: 1 }}>\n        <PreviewDataset\n          sensorsDatasets={sensorsDatasets}\n          updateSensorsDatasets={updateSensorsDatasets}\n          previewingDataset={previewingDataset}\n          schoolID={schoolID}\n          smallScreen={smallScreen}\n        />\n      </Grid>\n    </Grid>\n  )\n};\n\nconst DatasetsTable = (props) => {\n  const { schoolID, sensorsDatasets, smallScreen, previewingDataset, setPreviewingDataset, updateSensorsDatasets } = props;\n  return (\n    <Table\n      size=\"small\"\n      sx={{\n        tableLayout: 'fixed',\n        '& td, div, .MuiMenuItem-root': {\n          fontSize: smallScreen ? '0.625rem' : '0.8rem'\n        }\n      }}\n    >\n      <TableHead>\n        <TableRow>\n          <TableCell sx={{ pl: 1 }}>\n            Sensor Location\n          </TableCell>\n          <TableCell sx={{ width: smallScreen ? '9.5rem' : '11rem' }}>\n            Dataset Type\n          </TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {Object.keys(sensorsDatasets).map((location_short) => (\n          <Dataset\n            schoolID={schoolID}\n            smallScreen={smallScreen}\n            sensor={location_short}\n            sensorsDatasets={sensorsDatasets}\n            previewingDataset={previewingDataset}\n            setPreviewingDataset={setPreviewingDataset}\n            isPreviewing={location_short === previewingDataset?.sensor}\n            updateSensorsDatasets={updateSensorsDatasets}\n          />\n        ))}\n      </TableBody>\n    </Table>\n  )\n}\n\nconst Dataset = (props) => {\n  const { schoolID, sensorsDatasets, sensor, previewingDataset, setPreviewingDataset, isPreviewing, updateSensorsDatasets } = props;\n\n  const [selectedDatasetType, setSelectedDatasetType] = useState(RawDatasetType.hourly);\n\n  useEffect(() => {\n    if (selectedDatasetType !== RawDatasetType.hourly) setSelectedDatasetType(RawDatasetType.hourly);\n  }, [schoolID])\n\n  const handleDatasetTypeChange = (event) => {\n    const selectedVal = event.target.value;\n    setSelectedDatasetType(selectedVal);\n    setPreviewingDataset({ datasetType: selectedVal, sensor });\n    fetchThisDataset(selectedVal);\n  };\n\n  const fetchThisDataset = (datasetType) => {\n    // If this dataset version hasn't been fetched yet,\n    // fetch it and append it into the object fetchedDatasets\n    if (!sensorsDatasets[sensor].rawDatasets[datasetType].sample) {\n      const url = getRawDatasetUrl({\n        school_id: schoolID,\n        sensor_location_short: sensorsDatasets[sensor].location_short,\n        datasetType: datasetType,\n        isSample: true\n      });\n\n      fetchDataFromURL({ url, extension: 'csv', needsAuthorization: true })\n        .then((data) => {\n          const tmp = { ...sensorsDatasets };\n          tmp[sensor].rawDatasets[datasetType].sample = data;\n          updateSensorsDatasets(tmp);\n        });\n    }\n  }\n\n  const setThisSensorToPreview = () => {\n    if (previewingDataset?.sensor !== sensor) {\n      setPreviewingDataset({\n        datasetType: selectedDatasetType,\n        sensor: sensor\n      });\n      fetchThisDataset(selectedDatasetType);\n    }\n  }\n\n  const theme = useTheme();\n\n  return (\n    <>\n      <TableRow key={sensor}>\n        <TableCell\n          sx={{\n            pl: 1,\n            cursor: 'pointer',\n            background: isPreviewing && theme.palette.background.NYUpurpleLight\n          }}\n          onClick={setThisSensorToPreview}>\n          {sensorsDatasets[sensor].location_long}\n        </TableCell>\n\n        <TableCell\n          sx={{\n            position: 'relative',\n            background: isPreviewing && theme.palette.background.NYUpurpleLight\n          }}>\n          <FormControl size=\"small\">\n            <Select\n              value={selectedDatasetType}\n              onChange={handleDatasetTypeChange}\n              variant=\"standard\"\n              MenuProps={{ disablePortal: true }}\n            >\n              {Object.keys(sensorsDatasets[sensor].rawDatasets).reverse().map((datasetType, index) => (\n                <MenuItem\n                  key={index}\n                  value={datasetType}\n                >\n                  <Stack direction=\"row\" alignItems=\"center\">\n                    {datasetType.charAt(0).toUpperCase() + datasetType.slice(1).toLowerCase()}\n                  </Stack>\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </TableCell>\n      </TableRow >\n    </>\n  )\n}\n\nconst PreviewDataset = (props) => {\n  const { sensorsDatasets, updateSensorsDatasets, previewingDataset, schoolID, smallScreen } = props;\n  const theme = useTheme();\n\n  const [previewingDatasetName, setPreviewingDatasetName] = useState(\"Not previewing any dataset\");\n  const [csvFileName, setCsvFileName] = useState(\"No dataset\");\n  const [isDatasetLoading, setIsDatasetLoading] = useState(false);\n\n  const downloadPreviewingDataset = () => {\n    if (!previewingDataset) return;\n\n    const fetchedDataset = sensorsDatasets[previewingDataset.sensor].rawDatasets[previewingDataset.datasetType].full;\n\n    // Fetch the full dataset if it has not been fetched before\n    if (!fetchedDataset) {\n      const url = getRawDatasetUrl({\n        school_id: schoolID,\n        sensor_location_short: previewingDataset.sensor,\n        datasetType: previewingDataset.datasetType,\n        isSample: false\n      });\n\n      fetchDataFromURL({ url, extension: 'csv', needsAuthorization: true }).then((data) => {\n        const tmp = { ...sensorsDatasets };\n        tmp[previewingDataset.sensor].rawDatasets[previewingDataset.datasetType].full = data;\n        updateSensorsDatasets(tmp);\n\n        convertCSVforDownload(data);\n      });\n    }\n    else {\n      convertCSVforDownload(fetchedDataset);\n    }\n\n  };\n\n  const convertCSVforDownload = (dataset) => {\n    const blob = new Blob([dataset], { type: 'application/octet-stream' }); // create a Blob with the raw data\n    const url = URL.createObjectURL(blob); // create a download link for the Blob\n    const downloadLink = document.createElement('a');\n    downloadLink.href = url;\n    downloadLink.download = csvFileName;\n    document.body.appendChild(downloadLink);\n    downloadLink.click(); // simulate a click on the download link\n    URL.revokeObjectURL(url); // clean up by revoking the object URL\n    document.body.removeChild(downloadLink);\n  }\n\n  const [formattedData, setFormattedData] = useState('');\n  const [rowNumber, setRowNumber] = useState('');\n\n  useEffect(() => {\n    // If no dataset is chosen to be previewed, early return\n    if (!previewingDataset) return;\n\n    // Update previewing dataset name regardless if the dataset preview has finished loading\n    setPreviewingDatasetName(`Previewing: ${previewingDataset.sensor} (${previewingDataset.datasetType})`);\n\n    // Get the raw dataset\n    const csvData = sensorsDatasets[previewingDataset.sensor]?.rawDatasets[previewingDataset.datasetType]?.sample;\n\n    // If it is empty, then it hasn't been loaded yet\n    if (!csvData) {\n      setRowNumber(null);\n      setFormattedData(null);\n      setCsvFileName(\"Loading...\");\n      setIsDatasetLoading(true);\n      return;\n    };\n\n    if (isDatasetLoading) setIsDatasetLoading(false);\n\n    const lines = csvData.split('\\n');\n\n    const headers = lines[0].split(',');\n    const rows = lines.slice(1);\n\n    setRowNumber([\n      \"\",\n      ...rows.map(row => row.split(',')[0])\n    ].join('\\n'));\n\n    setFormattedData([\n      headers.slice(1).join(','), // Keep the headers for the rest of the columns\n      ...rows.map(row => row.split(',').slice(1).join(',')) // Remove the first column from each row\n    ].join('\\n'));\n\n    // Get the second column of the last row and extract the date part to set the csv's file name\n    let dateString;\n    if (rows.length > 0) {\n      const lastRow = rows[rows.length - 1];\n      const columns = lastRow.split(',');\n      if (columns.length >= 2) {\n        const dateTimeString = columns[1]; // Get the second column\n        dateString = dateTimeString.split('T')[0]; // Extract the date part\n      }\n    }\n\n    const csvFileName = `${schoolID}-${previewingDataset.sensor}-${previewingDataset.datasetType}-${dateString}.csv`;\n    setCsvFileName(csvFileName);\n  }, [previewingDataset, sensorsDatasets]);\n\n  return (\n    <Stack spacing={1}>\n      <Box sx={{ '& *': { fontFamily: \"monospace !important\" } }}>\n        <Stack direction=\"row\">\n          <Typography variant='body2' gutterBottom fontWeight={500}>\n            {previewingDatasetName}\n          </Typography>\n        </Stack>\n\n        <Box\n          component=\"pre\"\n          sx={{\n            overflowX: 'auto',\n            color: theme.palette.text.secondary,\n            backgroundColor: theme.palette.customBackground,\n            p: 2,\n            pt: 1.5,\n            borderRadius: theme.spacing(1),\n            borderTopLeftRadius: 0,\n            height: smallScreen ? '11.8rem' : '14rem',\n            width: smallScreen ? '100%' : 'unset',\n            marginTop: 0\n          }}\n        >\n          <Stack\n            direction=\"row\"\n            sx={{ fontSize: smallScreen ? '0.625rem !important' : '0.8rem !important' }}\n          >\n            {\n              formattedData ?\n                <>\n                  <Box sx={{ mr: 2, userSelect: 'none' }}>\n                    {rowNumber}\n                  </Box>\n                  <Box>\n                    {formattedData}\n                  </Box>\n                </>\n                :\n                <LoadingAnimation optionalText=\"Loading\" />\n            }\n          </Stack>\n        </Box>\n      </Box>\n      <Box textAlign=\"center\" >\n        <Button\n          variant=\"contained\"\n          sx={{\n            textTransform: 'none',\n            textAlign: 'left',\n            lineHeight: 1.1,\n            px: 1.5,\n            py: 1\n          }}\n          onClick={() => {\n            downloadPreviewingDataset();\n            Tracking.sendEventAnalytics(Tracking.Events.rawDatasetDownloaded, {\n              dataset_type: previewingDataset?.datasetType,\n              sensor: previewingDataset?.sensor\n            });\n          }}\n          disabled={isDatasetLoading}\n        >\n          <DownloadIcon sx={{ fontSize: '1.25rem', mr: 0.5 }} />\n          {csvFileName}\n        </Button>\n      </Box>\n    </Stack >\n  )\n}","// disable eslint for this file\n/* eslint-disable */\nimport { Button, Box } from \"@mui/material\";\nimport { Link } from 'react-router-dom';\nimport TvIcon from '@mui/icons-material/Tv';\nimport HoverMenu from 'material-ui-popup-state/HoverMenu';\nimport PopupState, { bindHover, bindFocus, bindMenu } from 'material-ui-popup-state';\nimport MenuItemAsNavLink from \"./Header/MenuItemAsNavLink\";\nimport NavLinkBehavior from \"./Header/NavLinkBehavior\";\n\nconst ScreenDialog = ({ schoolID, screens }) => {\n  if (!Array.isArray(screens)) return null;\n\n  if (screens.length <= 1) return <LinkButtonToScreen url={`/screen/${schoolID}`} />\n  else return <DialogToScreen schoolID={schoolID} screens={screens} />\n};\n\nconst DialogToScreen = ({ schoolID, screens }) => {\n  return (\n    <PopupState variant=\"popover\" popupId=\"tv-screens-list\">\n      {(popupState) => (\n        <>\n          <Button\n            variant=\"contained\"\n            {...bindHover(popupState)}\n            {...bindFocus(popupState)}\n          >\n            <TvIcon sx={{ fontSize: '1rem' }} />&nbsp;TV Screens List\n          </Button>\n          <HoverMenu\n            {...bindMenu(popupState)}\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n            onClick={popupState.close}\n          >\n            {\n              screens.map((screen, index) => (\n                <MenuItemAsNavLink\n                  key={index}\n                  behavior={NavLinkBehavior.toNewPage}\n                  to={`/screen/${schoolID}/${screen.screen_name}`}\n                  label={screen.location_long}\n                  sx={{ fontSize: '0.8rem' }}\n                />\n              ))}\n          </HoverMenu>\n        </>\n      )}\n    </PopupState>\n  )\n}\n\nconst LinkButtonToScreen = ({ url }) => {\n  return (\n    <Button\n      variant=\"contained\"\n      component={Link}\n      to={url}\n    >\n      <TvIcon sx={{ fontSize: '1rem' }} />&nbsp;TV Screen\n    </Button>\n  )\n}\n\nexport default ScreenDialog;","// disable eslint for this file\n/* eslint-disable */\n\nimport { useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nimport { Menu, MenuItem, MenuList } from \"@mui/material\";\nimport { CustomChip } from \"../Project/Project\";\n\nimport PlaceIcon from '@mui/icons-material/Place';\nimport { LocalStorage } from \"../../Utils/LocalStorage\";\nimport { UniqueRoutes } from \"../../Utils/RoutesUtils\";\n\nimport * as Tracking from '../../Utils/Tracking';\n\nexport const SchoolSelector = (props) => {\n  const { allowSelect, currentSchoolID, currentSchoolName, allowedSchools, fetchDataForDashboard } = props;\n\n  if (allowSelect === false || !Array.isArray(allowedSchools) || allowedSchools.length <= 1)\n    return (\n      <CustomChip\n        icon={<PlaceIcon />}\n        label={currentSchoolName}\n        tooltipTitle={\"School\"}\n      />\n    );\n\n  const [schoolID, setSchoolID] = useState('');\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const navigate = useNavigate();\n\n  const handleItemSelect = (schoolID) => () => {\n    if (currentSchoolID !== schoolID) {\n      localStorage.setItem(LocalStorage.schoolID, schoolID)\n      setSchoolID(schoolID);\n\n      Tracking.sendEventAnalytics(Tracking.Events.internalNavigation,\n        {\n          origin_school: currentSchoolID,\n          destination_school_id: schoolID,\n          origin_id: 'school_selector'\n        });\n\n      navigate(`${UniqueRoutes.dashboard}/${schoolID}`)\n    }\n    handleClose();\n  };\n\n\n  return (\n    <>\n      <CustomChip\n        icon={<PlaceIcon />}\n        label={currentSchoolName}\n        tooltipTitle={\"Click to Select School\"}\n        clickable\n        onClick={handleClick}\n        aria-controls={open ? 'basic-menu' : undefined}\n        aria-haspopup=\"true\"\n        aria-expanded={open ? 'true' : undefined}\n      />\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n        MenuListProps={{\n          'aria-labelledby': 'basic-button',\n        }}\n      >\n        <MenuList dense>\n          {allowedSchools.map((school, index) => (\n            <MenuItem\n              key={index}\n              onClick={handleItemSelect(school.school_id)}\n            >\n              {school.name}\n            </MenuItem>\n          ))}\n        </MenuList>\n      </Menu>\n    </>\n  );\n};\n\n","const AirQualityExplanation = {\n  title: \"Explanation of the US Air Quality Index (AQI)\",\n  subtitle: \"CITIESair uses the <a href='https://www.airnow.gov/aqi/aqi-basics/'>Air Quality Index (AQI)</a> developed by the United States Environmental Protection Agency (EPA) to effectively communicate different levels of PM2.5 air pollution. To calculate the AQI from the raw measurement of PM2.5 concentration (g/m), different breakpoints and piecewise linear function are utilized (read more <a href='https://en.wikipedia.org/wiki/Air_quality_index#United_States'>here</a>). Higher AQI values correspond to poorer air quality and greater heath risks to humans.<br><br>The US EPA sets thresholds for PM2.5 concentration: <sup>[1]</sup><ul><li><b>Annual average</b>: 12.0 g/m, corresponding to US AQI <b>50</b></li><li><b>24-hour average</b>: 35.0 g/m, corresponding to US AQI <b>100</b></li></ul>In 2021, the World's Heath Organization (WHO) proposed a new guideline for PM2.5<sup>[2]</sup> with stricter thresholds than those of the US EPA:<ul><li><b>Annual average</b>: 5.0 g/m, corresponding to US AQI <b>21</b></li><li><b>24-hour average</b>: 15.0 g/m, corresponding to US AQI <b>56</b></li></ul>\",\n  reference: \"[1] \\\"National Ambient Air Quality Standards (NAAQS) for PM.\\\" EPA, Environmental Protection Agency, https://www.epa.gov/pm-pollution/national-ambient-air-quality-standards-naaqs-pm.<br>[2] World Health Organization. \\\"WHO global air quality guidelines: particulate matter (PM2. 5 and PM10), ozone, nitrogen dioxide, sulfur dioxide and carbon monoxide: executive summary.\\\" (2021).\",\n}\n\nexport default AirQualityExplanation;","// disable eslint for this file\n/* eslint-disable */\nimport { useState, useEffect, useContext } from 'react';\nimport { LinkContext } from '../../ContextProviders/LinkContext';\nimport parse from 'html-react-parser';\nimport ChartControl from '../../Graphs/ChartControl';\nimport UppercaseTitle from '../../Components/UppercaseTitle';\nimport CommentSection, { PAGE_NAME } from '../../Components/CommentSection';\nimport { Box, Typography, Container, Divider, Chip, Grid, Tooltip, Stack, Skeleton } from '@mui/material';\n\nimport { useTheme } from '@mui/material/styles';\n\nimport ThemePreferences from '../../Themes/ThemePreferences';\n\nimport AirQualityIndexLegendQuickGlance from '../../Components/AirQualityHelper';\n\nimport jsonData from '../../section_data.json';\n\nimport PersonIcon from '@mui/icons-material/Person';\nimport EmailIcon from '@mui/icons-material/Email';\nimport PublishedWithChangesIcon from '@mui/icons-material/PublishedWithChanges';\nimport BarChartIcon from '@mui/icons-material/BarChart';\nimport CommentIcon from '@mui/icons-material/Comment';\n\nimport { replacePlainHTMLWithMuiComponents } from '../../Utils/Utils';\nimport DatasetDownloadDialog from '../../Components/DatasetDownload/DatasetDownloadDialog';\nimport ScreenDialog from '../../Components/ScreenDialog';\n\nimport { scrollToSection } from '../../Components/Header/MenuItemAsNavLink';\nimport FullWidthBox from '../../Components/FullWidthBox';\n\nimport * as Tracking from '../../Utils/Tracking';\n\nimport CurrentAQIGrid from '../../Components/CurrentAQIGrid';\nimport { SchoolSelector } from \"../Dashboard/SchoolSelector\";\n\nimport AirQualityIndexTable from '../../Graphs/ChartSubstituteComponents/AirQualityIndexTable';\nimport ExpandableSection from './ExpandableSection';\nimport AirQualityExplanation from '../../Utils/AirQualityExplanation';\nimport { UserContext } from '../../ContextProviders/UserContext';\nimport LoadingAnimation from '../../Components/LoadingAnimation';\n\nimport { CommentCountsContext } from '../../ContextProviders/CommentCountsContext';\n\nimport AQImap, { LocationTitle, TileOptions } from '../../Components/AQImap';\nimport { RawDatasetType } from '../../Utils/ApiUtils';\n\n// Custom Chip component to display metadata\nexport const CustomChip = (props) => {\n  const { tooltipTitle, label, ...otherProps } = props;\n  return (\n    <Tooltip title={tooltipTitle} enterDelay={0} leaveDelay={200}>\n      <Chip\n        size=\"small\"\n        label={label || <Skeleton variant=\"text\" sx={{ minWidth: '5rem' }} />}\n        {...otherProps}\n      />\n    </Tooltip>\n  );\n}\n\n\n\nconst Project = ({ themePreference, schoolMetadata, currentData, dashboardData, fetchDataForDashboard, temperatureUnitPreference }) => {\n  const [_, __, ___, setChartsTitlesList] = useContext(LinkContext);\n\n  let lastUpdate;\n\n  const { user } = useContext(UserContext);\n\n  const [commentCounts, fetchCommentCounts, setCommentCounts] = useContext(CommentCountsContext);\n\n  const [displayCommentSection, setDisplayCommentSection] = useState(false);\n  const [displayMapOfSensors, setDisplayMapOfSensors] = useState(false);\n\n  const [listOfSensors, setListOfSensors] = useState({});\n\n  useEffect(() => {\n    if (schoolMetadata?.school_id === 'nyuad') {\n      setDisplayCommentSection(true);\n      setDisplayMapOfSensors(true);\n      return;\n    }\n    setDisplayCommentSection(false);\n    setDisplayMapOfSensors(false);\n  }, [schoolMetadata])\n\n  useEffect(() => {\n    if (!displayCommentSection) return;\n\n    if (commentCounts !== null) return;\n\n    // Fetch comment count for page if it is nyuad\n    fetchCommentCounts().then((data) => {\n      setCommentCounts(data);\n    });\n  }, [displayCommentSection]);\n\n  // Update the chart title list for quick navigation\n  useEffect(() => {\n    if (!dashboardData?.charts) return;\n\n    const chartsTitles = dashboardData?.charts.map((element, index) => ({ chartTitle: element.title, chartID: `chart-${index + 1}` }));\n    setChartsTitlesList(chartsTitles);\n  }, [dashboardData]);\n\n  // Update the list of sensor locations of this school for dataset download button\n  useEffect(() => {\n    if (!currentData) return;\n\n    const sensors = currentData\n      .filter(item => item && item.sensor)  // Filter out null or undefined items and sensors\n      .reduce((acc, item) => {\n        // Use location_short as the key for each sensor\n        const key = item.sensor.location_short;\n        acc[key] = {\n          location_type: item.sensor.location_type,\n          location_short: item.sensor.location_short,\n          location_long: item.sensor.location_long,\n          last_seen: item.sensor.last_seen.split('T')[0],\n          rawDatasets: Object.keys(RawDatasetType).reduce((datasetAcc, datasetKey) => {\n            datasetAcc[RawDatasetType[datasetKey]] = {\n              sample: null,\n              full: null\n            };\n            return datasetAcc;\n          }, {})\n        };\n        return acc;\n      }, {});\n\n    setListOfSensors(sensors);\n\n  }, [currentData]);\n\n  const theme = useTheme();\n\n  const getDashboardTitle = () => {\n    if (schoolMetadata?.school_id) return `Air Quality | ${schoolMetadata?.school_id}`\n  }\n\n  const GridOfMetadataChips = () => {\n    return (\n      <Grid container spacing={1} sx={{ mt: -3, pb: 3 }}>\n        <Grid item>\n          <SchoolSelector\n            currentSchoolID={schoolMetadata?.school_id}\n            currentSchoolName={schoolMetadata?.name}\n            allowedSchools={user.allowedSchools}\n            fetchDataForDashboard={fetchDataForDashboard}\n          />\n        </Grid>\n\n        <Grid item>\n          <CustomChip\n            icon={<PersonIcon />}\n            label={schoolMetadata?.contactPerson}\n            tooltipTitle=\"Contact Person\"\n          />\n        </Grid>\n\n        <Grid item>\n          <CustomChip\n            icon={<EmailIcon />}\n            label={schoolMetadata?.contactEmail}\n            tooltipTitle=\"Contact Email\"\n            component=\"a\"\n            href={`mailto:${schoolMetadata?.contactEmail}`}\n            clickable\n          />\n        </Grid>\n\n        <Grid item>\n          <CustomChip\n            icon={<BarChartIcon />}\n            label={`${dashboardData?.charts?.length || \"...\"} Chart${dashboardData?.charts?.length !== 1 ? 's' : ''}`}\n            tooltipTitle=\"Number of Charts\"\n            onClick={() => {\n              scrollToSection(jsonData.charts.id);\n              Tracking.sendEventAnalytics(Tracking.Events.internalNavigation,\n                {\n                  destination_id: jsonData.charts.id,\n                  destination_label: jsonData.dashboardData?.toString(),\n                  origin_id: 'chip'\n                });\n            }}\n          />\n        </Grid>\n\n        {\n          lastUpdate &&\n          <Grid item>\n            <CustomChip\n              icon={<PublishedWithChangesIcon />}\n              label={`Last update: ${lastUpdate}`}\n              tooltipTitle=\"Last Update\" />\n          </Grid>\n        }\n\n        {(displayCommentSection === true && commentCounts !== null) &&\n          <Grid item>\n            <CustomChip\n              icon={<CommentIcon />}\n              label={`${commentCounts[PAGE_NAME]} Comment${commentCounts[PAGE_NAME] > 1 ? \"s\" : \"\"}`}\n              tooltipTitle=\"Number of Comments\"\n              onClick={() => {\n                scrollToSection(jsonData.commentSection.id);\n                Tracking.sendEventAnalytics(Tracking.Events.internalNavigation,\n                  {\n                    destination_id: jsonData.commentSection.id,\n                    destination_label: jsonData.commentSection.toString(),\n                    origin_id: 'chip'\n                  })\n              }}\n            />\n          </Grid>}\n      </Grid>\n    )\n  }\n\n  return (\n    <Box width=\"100%\">\n      <AirQualityIndexLegendQuickGlance themePreference={themePreference} />\n\n      <FullWidthBox backgroundColor='customAlternateBackground'>\n        <Container sx={{ pt: 5 }}>\n          <UppercaseTitle text={getDashboardTitle()} />\n          <GridOfMetadataChips />\n        </Container>\n      </FullWidthBox>\n      {displayMapOfSensors === true &&\n        <iframe src='http://localhost:3000/nyuadBanner?host=intranet&isWidget=false' width=\"100%\" height=\"500px\" />\n        // (\n        //   <FullWidthBox id=\"map\">\n        //     <AQImap\n        //       tileOption={TileOptions.nyuad}\n        //       themePreference={themePreference}\n        //       temperatureUnitPreference={temperatureUnitPreference}\n        //       placeholderText={\"Map of CITIESair air quality sensors on NYUAD campus.\"}\n        //       centerCoordinates={[24.524, 54.43449]}\n        //       maxBounds={[\n        //         [24.52038, 54.42612],\n        //         [24.52808, 54.44079]\n        //       ]}\n        //       defaultZoom={17}\n        //       minZoom={17}\n        //       maxZoom={18}\n        //       displayMinimap={false}\n        //       locationTitle={LocationTitle.short}\n        //       rawMapData={currentData}\n        //       markerSizeInRem={0.8}\n        //     />\n        //   </FullWidthBox>\n        // )\n      }\n      <FullWidthBox backgroundColor='customAlternateBackground'>\n        <Container sx={{ pt: 3, pb: 3 }}>\n          {/* <Box textAlign=\"center\" sx={{ mb: 2 }}>\n            <CurrentAQIGrid\n              currentSensorsData={currentData}\n              isScreen={false}\n              temperatureUnitPreference={temperatureUnitPreference}\n            />\n          </Box> */}\n\n          <Typography\n            component=\"div\"\n            variant=\"body1\"\n            color=\"text.secondary\"\n            sx={{\n              textAlign: 'justify', pb: 2, mb: 0, \"& table *\": {\n                color: `${theme.palette.text.secondary}`\n              }\n            }}\n            gutterBottom\n          >\n            {\n              dashboardData?.description ?\n                parse(dashboardData?.description || '', {\n                  replace: replacePlainHTMLWithMuiComponents,\n                })\n                :\n                Array.from({ length: 3 }).map((_, index) => (\n                  <Skeleton key={index} variant='text' />\n                ))\n            }\n          </Typography>\n\n          <Stack direction=\"row\" spacing={2}>\n            <ScreenDialog\n              schoolID={schoolMetadata?.school_id}\n              screens={schoolMetadata?.screens}\n            />\n            <DatasetDownloadDialog\n              schoolID={schoolMetadata?.school_id}\n              initialSensorList={listOfSensors}\n            />\n          </Stack>\n\n          <ExpandableSection\n            title={AirQualityExplanation.title}\n            content={(\n              <>\n                <AirQualityIndexTable themePreference={themePreference} />\n                <Typography\n                  component=\"div\"\n                  variant=\"body1\"\n                  color=\"text.secondary\"\n                  sx={{ mt: 2 }}\n                >\n                  {parse(AirQualityExplanation.subtitle, {\n                    replace: replacePlainHTMLWithMuiComponents,\n                  })}\n                </Typography>\n                <ExpandableSection\n                  title={\"Reference\"}\n                  content={(\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {parse(AirQualityExplanation.reference, {\n                        replace: replacePlainHTMLWithMuiComponents,\n                      })}\n                    </Typography>\n                  )}\n                />\n              </>\n            )}\n          />\n        </Container>\n      </FullWidthBox>\n\n      <Box id={jsonData.charts.id}>\n        {\n          dashboardData?.charts ?\n            dashboardData?.charts?.map((element, index) => (\n              <FullWidthBox\n                key={index}\n                backgroundColor={\n                  index % 2 != 0 && 'customAlternateBackground'\n                }\n              >\n                <Container\n                  sx={{ pt: 4, pb: 4 }}\n                  height=\"auto\"\n                  className={themePreference === ThemePreferences.dark ? 'dark' : ''}\n                  id={`chart-${index + 1}`}\n                >\n                  <Typography variant=\"h6\" color=\"text.primary\">\n                    {index + 1}. {element.title}\n                  </Typography>\n\n                  <ChartControl\n                    generalChartSubtitle={element.subtitle}\n                    generalChartReference={element.reference}\n                    chartData={{\n                      chartIndex: index,\n                      ...element,\n                    }}\n                  />\n                </Container>\n              </FullWidthBox>\n            ))\n            :\n            <LoadingAnimation optionalText=\"Loading Dashboard\" />\n        }\n\n      </Box>\n      <Divider />\n\n      {displayCommentSection === true &&\n        <FullWidthBox id={jsonData.commentSection.id} sx={{ pt: 3, pb: 4 }}>\n          <CommentSection pageID={PAGE_NAME} />\n        </FullWidthBox>\n      }\n    </Box >\n  );\n};\n\nexport default Project;\n","// disable eslint for this file\n/* eslint-disable */\n\nimport { useState, useEffect, useContext } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nimport { fetchDataFromURL } from \"../../Components/DatasetDownload/DatasetFetcher\";\nimport Project from \"../Project/Project\";\nimport { EndPoints, fetchAndProcessCurrentSensorsData, getApiUrl } from \"../../Utils/ApiUtils\";\nimport { LinkContext } from \"../../ContextProviders/LinkContext\";\n\nimport { UserContext } from \"../../ContextProviders/UserContext\";\nimport { LocalStorage } from \"../../Utils/LocalStorage\";\nimport { UniqueRoutes } from \"../../Utils/RoutesUtils\";\n\nconst Dashboard = ({ themePreference, temperatureUnitPreference }) => {\n  const { school_id_param } = useParams();\n  const navigate = useNavigate();\n\n  // Update the page's title based on school_id_param\n  useEffect(() => {\n    if (!school_id_param) return;\n\n    document.title = `CITIESair | ${school_id_param.toUpperCase()}`;\n  }, [school_id_param]);\n\n  const [_, setCurrentPage, __, ___] = useContext(LinkContext);\n  useEffect(() => {\n    setCurrentPage(UniqueRoutes.dashboard);\n  }, []);\n\n  const { user } = useContext(UserContext);\n\n  const emptySchoolMetadata = {};\n  const [schoolMetadata, setSchoolMetadata] = useState(emptySchoolMetadata);\n  const emptyCurrentData = null;\n  const [currentData, setCurrentData] = useState(emptyCurrentData);\n  const emptyChartDataForDashboard = {};\n  const [chartDataForDashboard, setChartDataForDashboard] = useState(emptyChartDataForDashboard);\n\n  useEffect(() => {\n    // NYUAD is public --> skip authentication and just fetch data\n    if (school_id_param === \"nyuad\") {\n      fetchDataForDashboard('nyuad');\n      return;\n    };\n\n    if (user.checkedAuthentication === true && user.authenticated === false) {\n      navigate('/login');\n    }\n\n    const allowedSchools = user.allowedSchools;\n\n    if (Array.isArray(allowedSchools) && allowedSchools.length > 0) {\n      // If no school_id_param is given\n      if (!school_id_param) {\n        let school_id;\n\n        // If there has been a previouslySelectedSchoolID, then load dashboard data for this one\n        const previouslySelectedSchoolID = localStorage.getItem(LocalStorage.schoolID);\n        if (allowedSchools.map((school) => school.school_id).includes(previouslySelectedSchoolID)) school_id = previouslySelectedSchoolID;\n        // If not existed yet, then just get the first school in the list\n        else {\n          school_id = allowedSchools[0].school_id;\n          localStorage.setItem(LocalStorage.schoolID, school_id)\n        }\n\n        // If there is no schoolMetadata or currentData or chartData, then fetch them\n        if (Object.keys(schoolMetadata).length === 0 ||\n          !currentData ||\n          Object.keys(chartDataForDashboard).length === 0\n        ) {\n          fetchDataForDashboard(school_id);\n        }\n\n        navigate(school_id, { replace: true }); // navigate to the correct url: /dashboard/:school_id_param\n      }\n\n      // If there is school_id_param, check if school_id_param is in the allowedSchools\n      if (allowedSchools.map((school) => school.school_id).includes(school_id_param)) {\n        fetchDataForDashboard(school_id_param);\n        localStorage.setItem(LocalStorage.schoolID, school_id_param);\n        return;\n      }\n    }\n  }, [user, school_id_param]);\n\n  const fetchDataForDashboard = async (school_id) => {\n    try {\n\n      const schoolMetadataUrl = getApiUrl({\n        endpoint: EndPoints.schoolmetadata,\n        school_id: school_id\n      });\n\n      setSchoolMetadata(emptySchoolMetadata);\n      setCurrentData(emptyCurrentData);\n      setChartDataForDashboard({ ...chartDataForDashboard, charts: null });\n\n      const currentUrl = getApiUrl({\n        endpoint: EndPoints.current,\n        school_id: school_id\n      });\n\n      const dashboardData = await Promise.all([\n        fetchDataFromURL({ url: schoolMetadataUrl, extension: 'json', needsAuthorization: true }),\n        fetchAndProcessCurrentSensorsData(currentUrl)\n      ])\n\n      const schoolMetadata = dashboardData[0];\n      const currentData = dashboardData[1];\n      setSchoolMetadata(schoolMetadata);\n      setCurrentData(currentData);\n    } catch (error) {\n      console.log(error);\n    }\n\n    const chartDataUrl = getApiUrl({\n      endpoint: EndPoints.chartdata,\n      school_id: school_id\n    });\n\n    fetchDataFromURL({ url: chartDataUrl, extension: 'json', needsAuthorization: true })\n      .then(data => {\n        setChartDataForDashboard(data);\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n\n\n  }\n\n  return (\n    <>\n      <Project\n        themePreference={themePreference}\n        schoolMetadata={schoolMetadata}\n        currentData={currentData}\n        dashboardData={chartDataForDashboard}\n        fetchDataForDashboard={fetchDataForDashboard}\n        temperatureUnitPreference={temperatureUnitPreference}\n      />\n    </>\n  )\n};\n\nexport default Dashboard;","// disable eslint for this file\n/* eslint-disable */\nimport { useState } from 'react';\nimport { styled } from '@mui/material/styles';\n\nimport MuiAccordion from '@mui/material/Accordion';\nimport MuiAccordionSummary from '@mui/material/AccordionSummary';\nimport MuiAccordionDetails from '@mui/material/AccordionDetails';\nimport { Box, Typography, Tooltip } from '@mui/material';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\n\nimport * as Tracking from '../../Utils/Tracking';\n\nconst StyledAccordion = styled(MuiAccordion)(({ theme, expanded }) => ({\n  color: theme.palette.text.secondary,\n  backgroundImage: 'none',\n  backgroundColor: expanded ? theme.palette.background.default : 'transparent',\n  boxShadow: expanded ? theme.shadows : 'none',\n  transition: 'none',\n}));\n\nconst StyledAccordionSummary = styled(MuiAccordionSummary)(({ theme, expanded }) => ({\n  marginTop: expanded ? theme.spacing(3) : 0,\n  flexDirection: 'row-reverse',\n  paddingLeft: expanded ? theme.spacing(1) : 0,\n  '& .MuiTypography-root': {\n    color: theme.palette.text.primary,\n    textDecoration: 'underline',\n    transition: 'none',\n    '&:hover': {\n      color: theme.palette.primary.main,\n    },\n  },\n}));\n\nconst ExpandableSection = ({ title, content }) => {\n  const [expanded, setExpanded] = useState(undefined);\n\n  const handleAccordionChange = (panel) => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : undefined);\n    Tracking.sendEventAnalytics(\n      isExpanded ? Tracking.Events.expandSection : Tracking.Events.collapseSection,\n      {\n        section: title\n      }\n    );\n  };\n\n  return (\n    <Box>\n      <StyledAccordion\n        expanded={expanded === \"panel1\"}\n        onChange={handleAccordionChange(\"panel1\")}\n        transitionDuration={0}\n      >\n        <StyledAccordionSummary expanded={expanded} expandIcon={<ExpandMoreIcon />} aria-controls=\"panel1a-content\" id=\"panel1a-header\">\n          <Tooltip title={expanded ? \"Click to collapse\" : \"Click to expand\"} enterDelay={0} leaveDelay={200}>\n            <Typography component=\"a\" variant=\"body2\">\n              {title}\n            </Typography>\n          </Tooltip>\n        </StyledAccordionSummary>\n        <MuiAccordionDetails>\n          {content}\n        </MuiAccordionDetails>\n      </StyledAccordion>\n    </Box>\n  );\n}\n\nexport default ExpandableSection;","var map = {\n\t\"./AirQualityIndexTable\": 8416,\n\t\"./AirQualityIndexTable.jsx\": 8416,\n\t\"./ChartSubstituteComponentLoader\": 5276,\n\t\"./ChartSubstituteComponentLoader.jsx\": 5276\n};\n\nfunction webpackAsyncContext(req) {\n\treturn Promise.resolve().then(() => {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\n\t\tvar id = map[req];\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 6598;\nmodule.exports = webpackAsyncContext;"],"names":["SELECT_ALL","ITEM_HEIGHT","ITEM_PADDING_TOP","SeriesSelector","props","items","itemsFromChart","selectorID","allowMultiple","onSeriesSelection","theme","useTheme","MenuProps","PaperProps","style","maxHeight","overflow","background","palette","customAlternateBackground","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","setItems","useState","selectAll","setSelectAll","useEffect","every","item","selected","handleChange","event","target","value","includes","updatedItems","map","index","selectedItems","filter","label","some","selectedItem","handleItemToggle","existingItem","_jsxs","Stack","spacing","direction","alignItems","children","_jsx","FormControl","sx","breakpoints","down","width","minWidth","mt","borderRadius","size","Select","labelId","concat","id","multiple","onChange","renderValue","VisibilityIcon","fontSize","color","text","secondary","Typography","variant","length","renderedLabel","MenuItem","disabled","backgroundColor","Checkbox","checked","onClick","p","transform","Radio","borderTop","borderColor","position","bottom","zIndex","marginBottom","justifyContent","fontWeight","pl","Switch","Grid","container","display","Chip","onDelete","ChartControlType","CategoryFilter","stackDirection","DateRangeFilter","ChartRangeFilter","NumberRangeFilter","getDateRangeForCalendarChart","dateStrings","min","reduce","current","max","getValueRangeForCalendarChart","values","Math","generateRandomID","random","toString","substr","hideAnnotations","stem","textStyle","opacity","boxStyle","returnResponsiveFontSizeInPixels","_ref2","isPortrait","isSmaller","returnGenericOptions","_chartData$subcharts","_chartData$options","_chartData$options2","_chartData$options3","_chartData$options3$c","_chartData$options3$c2","_chartData$options4","_chartData$options4$c","_chartData$options4$c2","_chartData$options5","_chartData$options5$c","_chartData$options5$c2","_chartData$options6","_chartData$options6$c","_chartData$options6$c2","_chartData$options7","_chartData$options7$w","_chartData$options8","_chartData$options8$w","_chartData$options$le","_chartData$options9","_chartData$options9$l","_options$vAxis$format","_options$vAxis","_options$vAxis$title","_options$vAxis2","_options$vAxis$viewWi","_options$vAxis3","_options$vAxis3$viewW","_options$hAxis$title","_options$hAxis","_options$vAxis4","_options$vAxis5","_options$vAxis5$gridl","_options$hAxis2","_options$hAxis3","_options$hAxis3$gridl","_options$hAxis4","_options$hAxis5","_options$hAxis5$gridl","_options$annotations","chartData","subchartIndex","isHomepage","axisTitleTextStyle","italic","bold","chart","axisTitle","axisTextStyle","axisText","options","subcharts","curveType","crosshair","orientation","trigger","fill","chartArea","portrait","landscape","height","tooltip","isHtml","showColorCode","legend","alignment","scrollArrows","activeColor","inactiveColor","pagingTextStyle","vAxis","format","title","viewWindow","hAxis","slantedText","slantedTextAngle","colors","optionsColors","series","Object","forEach","_serie","serie","primary","main","trendlines","_item","colorAxis","colorAxisFirstColor","multiColor","colorIndex","NYUpurple","aqiColorAxis","titleTextStyle","gridlines","minorGridlines","count","annotations","highContrast","contrastText","thickness","rx","shape","ry","annotationBoxFill","fillOpacity","seriesSelector","pointSize","enableInteractivity","textPosition","viewWindowMode","returnCalendarChartOptions","existingOptions","calendarDimensions","calculateCalendarDimensions","cellSizeMin","cellSizeMax","chartWidth","calendar","cellSize","yearLabel","yearLabelFontSize","noDataPattern","returnChartControlUI","_chartControl$options","chartControl","mainChartData","mainChartOptions","chartControlUI","ui","snapToData","_chartControl$options2","_chartControl$options3","_chartControl$options4","_chartControl$options5","_chartControl$options6","_chartControl$options7","_chartControl$options8","_chartControl$options9","controlType","chartType","chartView","columns","chartOptions","_ref3","window","innerWidth","addTouchEventListenerForChartControl","_ref4","controlWrapper","chartID","touchHandler","first","changedTouches","type","simulatedEvent","MouseEvent","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","button","relatedTarget","dispatchEvent","preventDefault","isMounted","controlDOM","document","querySelector","touchEvent","addEventListener","capture","removeEventListener","styled","Box","_ref","maxWidth","padding","boxShadow","mozBoxShadow","webkitBoxShadow","border","secondaryRGB","margin","marginTop","verticalAlign","paper","paddingTop","paddingBottom","paddingLeft","paddingRight","borderWidth","top","left","right","stroke","strokeWidth","cursor","yearSpacing","getCalendarChartMargin","CalendarChart","_options$colorAxis","_options$colorAxis2","_options$colorAxis3","_options$colorAxis4","_options$legend","_options$colorAxis6","_options$colorAxis7","data","dateRange","valueRange","calendarChartMargin","inFirstTwoRowsOfChart","dateStr","date","Date","dayOfWeek","getDay","isFirstTwoDaysOfWeek","firstYear","getFullYear","isInFirstYear","isGradient","generateColorGradient","_Fragment","showLegend","_options$colorAxis5","GradientBox","ResponsiveCalendar","from","to","emptyColor","mode","axis","ticks","line","grid","minValue","maxValue","monthBorderColor","monthBorderWidth","daySpacing","dayBorderWidth","day","tooltipData","find","tooltipText","DOMParser","parseFromString","body","innerHTML","CustomTooltip","tooltipBoxRef","useRef","parentDiv","parentElement","ref","className","mr","parse","replace","replacePlainHTMLWithMuiComponents","gradient","array","join","containerStyle","gradientStyle","labelStyle","startColor","endColor","steps","hexToRgb","hex","m","r","g","b","result","exec","parseInt","rgbToHex","x","interpolateColor","color1","color2","factor","slice","i","round","startRGB","endRGB","colorArray","interpolatedColor","push","SubChart","_chartData$subcharts2","windowSize","chartSubstituteComponentName","ChartSubstituteComponentLoader","customClassName","google","_","useContext","GoogleContext","dataTable","setDataTable","chartWrapper","setChartWrapper","dashboardWrapper","setDashboardWrapper","setControlWrapper","isFirstRender","setIsFirstRender","allInitialColumns","setAllInitialColumns","dataColumns","setDataColumns","initialVAxisRange","setInitialVAxisRage","__","chartTotalHeight","setChartTotalHeight","useMemo","opts","calendarData","setCalendarData","calendarHeight","setCalendarHeight","containerWidth","setContainerWidth","dataArray","startYear","numberOfYear","yearHeight","totalHeight","GoogleChartStyleWrapper","minHeight","LoadingAnimation","chartControlOptions","hasChartControl","control","handleSeriesSelection","setOptions","draw","method","setInitialColumnsColors","col","_options$series2","seriesIndex","serieAttribute","getInitialVAxisRange","vAxisMin","vAxisMax","range","getColumnRange","sourceColumn","isNaN","newDataColumns","_chartWrapper","arguments","undefined","hiddenSeriesObject","visibleInLegend","newViewColumns","dataColumn","indexInAllInitialColumns","role","setView","newOptions","selectedSeriesCount","thisDataTable","visualization","arrayToDataTable","reconstructedColumns","evaluatedColumns","column","calc","calcFunction","Function","reconstructFunctionFromJSONstring","thisChartWrapper","ChartWrapper","containerId","thisDashboardWrapper","Dashboard","getElementById","events","addListener","onChartReady","thisControlWrapper","ControlWrapper","bind","initColumns","initialView","getView","viewFromDataTable","DataView","shouldAssignDomainRoleToFistColumn","dataSeriesIndex","getColumnLabel","_options$series","_options$series$col$s","getInitialColumns","renderChart","_ChartControlType$cha","wordLimit","reference","isExpanded","setIsExpanded","isMobile","useMediaQuery","subtitleRef","words","split","displayText","lastFullStop","lastIndexOf","ClickAwayListener","onClickAway","subtitleParent","closest","chartElements","Set","has","tagName","parentNode","isClickWithinSharedParent","ml","textDecoration","ChartStyleWrapper","overflowX","overflowY","scrollbarGutter","StyledTabs","Tabs","generalChartSubtitle","generalChartReference","passedChartData","chartHeight","passedChartHeight","isSmallWidth","setIsPortrait","matchMedia","matches","setWindowSize","innerHeight","chartMaxHeight","currentTab","setCurrentTab","timeoutID","handleWindowResize","clearTimeout","setTimeout","newValue","element","Tab","subchartTitle","WebkitOverflowScrolling","transition","pointerEvents","my","component","mb","CollapsibleSubtitle","getSubtitles","_chartData$subcharts$","subchartSubtitle","getReferences","_chartData$subcharts$2","StyledTable","Table","isTiny","lineHeight","hideAQIDescription","themePreference","TableHead","TableRow","TableCell","pr","align","TableBody","AQIdatabase","ThemePreferences","light","lightThemeColor","darkThemeColor","category","aqiUS","low","high","rawPM2_5","description","healthSuggestions","outdoors","shouldRender","aqiChart","ceil","ChartControl","isStacked","bar","groupWidth","renderAQIchart","Suspense","fallback","ChartSubstituteComponent","lazy","AirQualityIndexLegendQuickGlance","anchorEl","setAnchorEl","handlePopperOpen","currentTarget","Tracking","airQualityIndexLegendQuickGlance","handlePopperClose","open","Boolean","FadeInButtonForSpeedDial","distanceFromBottomOfWindow","Fab","onMouseEnter","onMouseLeave","AirIcon","Popper","placement","onClose","keepMounted","disableRestoreFocus","TransitionProps","Fade","timeout","Paper","elevation","py","mx","AirQualityIndexTable","DatasetDownloadDialog","schoolID","initialSensorList","sensorsDatasets","updateSensorsDatasets","previewingDataset","setPreviewingDataset","smallScreen","setOpen","handleClose","Button","rawDatasetButtonClicked","DataObjectIcon","Dialog","fullWidth","fullScreen","DialogActions","autoFocus","ChevronLeftIcon","DialogContent","px","flexDirection","toUpperCase","DatasetSelectorAndPreviewer","fontStyle","Link","href","keys","firstSensor","initialDatasetType","RawDatasetType","hourly","sensor","datasetType","rawDatasets","sample","url","getRawDatasetUrl","school_id","sensor_location_short","isSample","fetchDataFromURL","extension","needsAuthorization","then","tmp","catch","error","console","log","sm","md","DatasetsTable","PreviewDataset","tableLayout","location_short","Dataset","isPreviewing","selectedDatasetType","setSelectedDatasetType","fetchThisDataset","NYUpurpleLight","setThisSensorToPreview","location_long","selectedVal","disablePortal","reverse","charAt","toLowerCase","previewingDatasetName","setPreviewingDatasetName","csvFileName","setCsvFileName","isDatasetLoading","setIsDatasetLoading","convertCSVforDownload","dataset","blob","Blob","URL","createObjectURL","downloadLink","createElement","download","appendChild","click","revokeObjectURL","removeChild","formattedData","setFormattedData","rowNumber","setRowNumber","_sensorsDatasets$prev","_sensorsDatasets$prev2","csvData","lines","headers","rows","dateString","row","fontFamily","gutterBottom","customBackground","pt","borderTopLeftRadius","userSelect","optionalText","textAlign","textTransform","downloadPreviewingDataset","fetchedDataset","full","rawDatasetDownloaded","dataset_type","DownloadIcon","DialogToScreen","screens","PopupState","popupId","popupState","bindHover","bindFocus","TvIcon","HoverMenu","bindMenu","close","screen","MenuItemAsNavLink","behavior","NavLinkBehavior","toNewPage","screen_name","LinkButtonToScreen","Array","isArray","SchoolSelector","allowSelect","currentSchoolID","currentSchoolName","allowedSchools","fetchDataForDashboard","CustomChip","icon","PlaceIcon","tooltipTitle","setSchoolID","navigate","useNavigate","handleItemSelect","localStorage","setItem","LocalStorage","internalNavigation","origin_school","destination_school_id","origin_id","UniqueRoutes","dashboard","clickable","Menu","MenuListProps","MenuList","dense","school","name","subtitle","otherProps","Tooltip","enterDelay","leaveDelay","Skeleton","_dashboardData$charts3","schoolMetadata","currentData","dashboardData","temperatureUnitPreference","___","setChartsTitlesList","LinkContext","lastUpdate","user","UserContext","commentCounts","fetchCommentCounts","setCommentCounts","CommentCountsContext","displayCommentSection","setDisplayCommentSection","displayMapOfSensors","setDisplayMapOfSensors","listOfSensors","setListOfSensors","charts","chartsTitles","chartTitle","sensors","acc","location_type","last_seen","datasetAcc","datasetKey","GridOfMetadataChips","_dashboardData$charts","_dashboardData$charts2","pb","PersonIcon","contactPerson","EmailIcon","contactEmail","BarChartIcon","_jsonData$dashboardDa","scrollToSection","jsonData","destination_id","destination_label","CommentIcon","PAGE_NAME","FullWidthBox","Container","UppercaseTitle","getDashboardTitle","src","ScreenDialog","ExpandableSection","AirQualityExplanation","content","dark","chartIndex","Divider","CommentSection","pageID","school_id_param","useParams","setCurrentPage","emptySchoolMetadata","setSchoolMetadata","setCurrentData","chartDataForDashboard","setChartDataForDashboard","checkedAuthentication","authenticated","previouslySelectedSchoolID","getItem","async","schoolMetadataUrl","getApiUrl","endpoint","EndPoints","schoolmetadata","currentUrl","Promise","all","fetchAndProcessCurrentSensorsData","chartDataUrl","chartdata","Project","StyledAccordion","MuiAccordion","expanded","backgroundImage","default","shadows","StyledAccordionSummary","MuiAccordionSummary","setExpanded","panel","expandSection","collapseSection","section","transitionDuration","expandIcon","ExpandMoreIcon","MuiAccordionDetails","webpackAsyncContext","req","resolve","__webpack_require__","o","e","Error","code","module","exports"],"sourceRoot":""}