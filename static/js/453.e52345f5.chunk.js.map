{"version":3,"file":"static/js/453.e52345f5.chunk.js","mappings":"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","sources":["Components/AirQuality/AQIexplanation.jsx","Components/AirQuality/AirQualityIndexTable.jsx","Components/ExpandableSection/ExpandableSection.jsx","Components/UppercaseTitle.jsx","Graphs/Subchart/SubchartUtils/SeriesSelector.jsx","Graphs/GoogleChartHelper.jsx","Graphs/Subchart/SubchartUtils/GoogleChartStyleWrapper.jsx","Utils/Gradient/GradientUtils.jsx","Graphs/Subchart/NivoCharts/NivoCalendarChart/ValueRangeBox.jsx","Graphs/Subchart/NivoCharts/NivoCalendarChart/TooltipCalendarChart.jsx","Graphs/Subchart/NivoCharts/NivoChartHelper.jsx","Graphs/Subchart/NivoCharts/NivoCalendarChart/NivoCalendarChart.jsx","Components/DateRangePicker/DateRangePickerUtils.jsx","Components/DateRangePicker/AggregationTypeToggle.jsx","ContextProviders/DateRangePickerContext.jsx","Components/DateRangePicker/CustomDateRangePicker.jsx","ContextProviders/AxesPickerContext.jsx","Components/AxesPicker/AxesPicker.jsx","Graphs/Subchart/SubChart.jsx","Components/CollapsibleSubtitle.jsx","Graphs/DataTypeDropDown.jsx","Components/StyledTabs.jsx","Graphs/ChartComponentWrapper.jsx","Components/CommentSection.jsx","Components/AirQuality/AirQualityIndexLegendQuickGlance.jsx","Components/CustomDialog/CustomDialog.jsx","Components/DatasetDownload/DatasetDownloadDialog.jsx","Components/AirQuality/AirQualityScreen/ScreenDropDownMenu.jsx","Components/SchoolSelector.jsx","Components/AirQuality/AirQualityAlerts/EmailsInput.jsx","Components/AirQuality/AirQualityAlerts/AlertTypes.jsx","ContextProviders/AirQualityAlertContext.jsx","Components/AirQuality/AirQualityAlerts/Utils.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/DialogData.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/ThresholdTypeToggle.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/SimplePicker.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/HOURS.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/ThresholdSlider.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/DAYS_OF_WEEK.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/DayOfTheWeekToggle.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/MultiDaysCalendarPicker.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/AlertDeletionDialog.jsx","Components/AirQuality/AirQualityAlerts/AlertModificationDialog/AlertModificationDialog.jsx","Components/AirQuality/AirQualityAlerts/AlertsTable.jsx","Components/AirQuality/AirQualityAlerts/AlertsTabs.jsx","Components/AirQuality/AirQualityAlerts/AirQualityAlert.jsx","Pages/Project.jsx","Pages/Dashboard.jsx"],"sourcesContent":["import { useContext } from 'react';\nimport { Typography, Box } from '@mui/material';\nimport parse from 'html-react-parser';\nimport { replacePlainHTMLWithMuiComponents } from '../../Utils/UtilFunctions';\nimport AirQualityIndexTable from './AirQualityIndexTable';\nimport ExpandableSection from '../ExpandableSection/ExpandableSection';\nimport { PreferenceContext } from '../../ContextProviders/PreferenceContext';\n\nimport InfoIcon from '@mui/icons-material/Info';\n\nconst Explanation = {\n  title: \"Explanation of the US Air Quality Index (AQI) for PM2.5\",\n  subtitle: \"CITIESair uses the <a href='https://www.airnow.gov/aqi/aqi-basics/'>Air Quality Index (AQI)</a> developed by the United States Environmental Protection Agency (EPA) to effectively communicate different levels of PM2.5 air pollution. To calculate the AQI from the raw measurement of PM2.5 concentration (g/m), different breakpoints and piecewise linear function are utilized (read more <a href='https://en.wikipedia.org/wiki/Air_quality_index#United_States'>here</a>). Higher AQI values correspond to poorer air quality and greater heath risks to humans.<br><br>The US EPA sets thresholds for PM2.5 concentration, recently updated in February 2024: <sup>[1]</sup><ul><li><b>Annual average</b>: 9.0 g/m, corresponding to US AQI <b>50</b></li><li><b>24-hour average</b>: 35.0 g/m, corresponding to US AQI <b>100</b></li></ul>In 2021, the World's Heath Organization (WHO) proposed a new guideline for PM2.5<sup>[2]</sup> with stricter thresholds than those of the US EPA:<ul><li><b>Annual average</b>: 5.0 g/m, corresponding to US AQI <b>21</b></li><li><b>24-hour average</b>: 15.0 g/m, corresponding to US AQI <b>56</b></li></ul>\",\n  reference: \"[1] \\\"National Ambient Air Quality Standards (NAAQS) for PM.\\\" EPA, Environmental Protection Agency, https://www.epa.gov/pm-pollution/national-ambient-air-quality-standards-naaqs-pm.<br>[2] World Health Organization. \\\"WHO global air quality guidelines: particulate matter (PM2. 5 and PM10), ozone, nitrogen dioxide, sulfur dioxide and carbon monoxide: executive summary.\\\" (2021).\",\n}\n\nconst AQIexplanation = () => {\n  const { themePreference } = useContext(PreferenceContext);\n\n  return (\n    <ExpandableSection\n      title={Explanation.title}\n      icon={<InfoIcon sx={{ fontSize: \"1rem\" }} />}\n      content={(\n        <Box>\n          <AirQualityIndexTable themePreference={themePreference} />\n          <Typography\n            component=\"div\"\n            variant=\"body1\"\n            color=\"text.secondary\"\n            sx={{ mt: 2 }}\n          >\n            {parse(Explanation.subtitle, {\n              replace: replacePlainHTMLWithMuiComponents,\n            })}\n          </Typography>\n          <ExpandableSection\n            title={\"Reference\"}\n            content={(\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {parse(Explanation.reference, {\n                  replace: replacePlainHTMLWithMuiComponents,\n                })}\n              </Typography>\n            )}\n          />\n        </Box>\n      )}\n    />\n  )\n};\n\nexport default AQIexplanation;","import { Box, Table, TableBody, TableCell, TableHead, TableRow, styled } from '@mui/material';\nimport parse from 'html-react-parser';\nimport { replacePlainHTMLWithMuiComponents } from '../../Utils/UtilFunctions';\nimport { AQI_Database } from '../../Utils/AirQuality/AirQualityIndexHelper';\nimport { useContext } from 'react';\nimport { PreferenceContext } from '../../ContextProviders/PreferenceContext';\nimport { CITIESair } from '../../Utils/GlobalVariables';\n\nexport const StyledTable = styled(Table, {\n  shouldForwardProp: (prop) => prop !== 'tiny',\n})(({ theme, tiny }) => ({\n  minWidth: tiny || 700,\n  '& th, td': {\n    fontSize: tiny ? '0.625rem' : '0.6875rem',\n    color: theme.palette.text.secondary,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: tiny ? '0.5rem' : '0.6875rem',\n    },\n  },\n  '& th': {\n    fontWeight: 500,\n    color: theme.palette.text.primary,\n    lineHeight: '1rem'\n  }\n}));\n\nfunction AirQualityIndexTable(props) {\n  const { themePreference } = useContext(PreferenceContext);\n\n  const { tiny, hideAQIDescription } = props;\n\n  const returnFormattedBreakpoints = (low, high) => {\n    if (high === Infinity) return `${low}+`;\n    else return `${low} - ${high}`;\n  }\n\n  return (\n    <>\n      <Box overflow=\"auto\">\n        <StyledTable size=\"small\" tiny={tiny}>\n          <TableHead>\n            <TableRow>\n              <TableCell sx={{ pr: 0 }}>\n                <Box sx={{ width: '1em', height: '1em' }} />\n              </TableCell>\n              <TableCell sx={{ pl: 1 }}>\n                Category\n              </TableCell>\n              <TableCell align=\"right\">US AQI</TableCell>\n              <TableCell align=\"right\">\n                PM2.5\n                (g/m\n                <sup>3</sup>\n                )\n              </TableCell>\n              {!hideAQIDescription && <TableCell align=\"left\">Description</TableCell>}\n\n              {!hideAQIDescription &&\n                <TableCell align=\"left\">\n                  {CITIESair}&apos; Suggested Actions\n                </TableCell>\n              }\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {AQI_Database.map((element, index) => (\n              <TableRow\n                key={index}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n              >\n                <TableCell sx={{ pr: 0 }}>\n                  <Box sx={{ width: '1em', height: '1em', backgroundColor: element.color[themePreference] }} />\n                </TableCell>\n                <TableCell sx={{ pl: 1 }}>\n                  {element.category}\n                </TableCell>\n                <TableCell align=\"right\" sx={{ whiteSpace: \"nowrap\" }}>\n                  {returnFormattedBreakpoints(element.aqiUS.low, element.aqiUS.high)}\n                </TableCell>\n                <TableCell align=\"right\" sx={{ whiteSpace: \"nowrap\" }}>\n                  {returnFormattedBreakpoints(element.rawPM2_5.low, element.rawPM2_5.high)}\n                </TableCell>\n                {!hideAQIDescription && <TableCell align=\"left\">{element.description}</TableCell>}\n                {!hideAQIDescription\n                  && (\n                    <TableCell align=\"left\">\n                      {\n                        parse(element.healthSuggestions.outdoors, {\n                          replace: replacePlainHTMLWithMuiComponents,\n                        })\n                      }\n                    </TableCell>\n                  )}\n              </TableRow>\n            ))}\n          </TableBody>\n        </StyledTable>\n      </Box>\n    </>\n  );\n}\n\nexport default AirQualityIndexTable;\n","// disable eslint for this file\n/* eslint-disable */\nimport { useState } from 'react';\nimport { styled } from '@mui/material/styles';\n\nimport MuiAccordion from '@mui/material/Accordion';\nimport MuiAccordionSummary from '@mui/material/AccordionSummary';\nimport MuiAccordionDetails from '@mui/material/AccordionDetails';\nimport { Box, Typography, Tooltip } from '@mui/material';\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport * as Tracking from '../../Utils/Tracking';\n\nconst StyledAccordion = styled(MuiAccordion)(({ theme, expanded }) => ({\n  color: theme.palette.text.secondary,\n  backgroundImage: 'none',\n  backgroundColor: expanded ? theme.palette.background.default : 'transparent',\n  boxShadow: expanded ? theme.shadows : 'none',\n  transition: 'none',\n}));\n\nconst StyledAccordionSummary = styled(MuiAccordionSummary)(({ theme, expanded }) => ({\n  marginTop: expanded ? theme.spacing(2) : 0,\n  flexDirection: 'row-reverse',\n  paddingLeft: expanded ? theme.spacing(1) : 0,\n  '& .MuiTypography-root': {\n    color: theme.palette.text.primary,\n    textDecoration: 'underline',\n    transition: 'none',\n    '&:hover': {\n      color: theme.palette.primary.main,\n    },\n  },\n  '& .MuiAccordionSummary-content.Mui-expanded': {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2)\n  }\n}));\n\nconst TooltipText = {\n  expand: \"Click to expand section\",\n  collapse: \"Click to collapse section\"\n}\n\nconst ExpandableSection = (props) => {\n  const { title, content, icon, disabled } = props;\n  const [expanded, setExpanded] = useState(undefined);\n\n  const handleAccordionChange = (panel) => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : undefined);\n    Tracking.sendEventAnalytics(\n      isExpanded ? Tracking.Events.expandSection : Tracking.Events.collapseSection,\n      {\n        section: title\n      }\n    );\n  };\n\n  return (\n    <Box sx={{\n      '& .MuiAccordion-root.Mui-disabled': {\n        backgroundColor: \"transparent\"\n      }\n    }}>\n      <StyledAccordion\n        expanded={expanded === \"panel1\"}\n        onChange={handleAccordionChange(\"panel1\")}\n        disabled={disabled}\n      >\n        <StyledAccordionSummary expanded={expanded} expandIcon={<ArrowDropDownIcon />} aria-controls=\"panel1a-content\" id=\"panel1a-header\">\n          <Tooltip title={expanded ? TooltipText.collapse : TooltipText.expand} enterDelay={0} leaveDelay={200}>\n            <Typography component=\"a\" variant=\"body1\">\n              {title}\n              <Box component=\"span\" sx={{ ml: 0.25 }}>\n                {icon}\n              </Box>\n            </Typography>\n          </Tooltip>\n        </StyledAccordionSummary>\n        <MuiAccordionDetails sx={{ pt: 0 }}>\n          {content}\n        </MuiAccordionDetails>\n      </StyledAccordion>\n    </Box>\n  );\n}\n\nexport default ExpandableSection;","import { Skeleton, Typography } from '@mui/material';\n\nexport default function UppercaseTitle({ text }) {\n  return (\n    <Typography\n      variant=\"h4\"\n      color=\"text.primary\"\n      sx={{\n        fontWeight: 'medium',\n        display: 'block',\n        textTransform: 'uppercase',\n        pb: 3,\n        lineHeight: 1\n      }}\n    >\n      {text || <Skeleton variant='text' />}\n    </Typography>\n  );\n}\n","/* eslint-disable */\nimport { useState, useEffect } from 'react';\nimport { Stack, Grid, MenuItem, FormControl, Select, Chip, Radio, Checkbox, Typography, Switch } from \"@mui/material\";\nimport { useTheme } from '@mui/material/styles';\n\nimport VisibilityIcon from '@mui/icons-material/Visibility';\n\nconst SELECT_ALL = 'Display All Series';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\n\nexport default function SeriesSelector(props) {\n  const { items: itemsFromChart,\n    selectorID,\n    allowMultiple,\n    seriesLabel,\n    onSeriesSelection,\n    displayChip = true\n  } = props;\n\n  const theme = useTheme();\n\n  const MenuProps = {\n    PaperProps: {\n      style: {\n        maxHeight: ITEM_HEIGHT * 5.55 + ITEM_PADDING_TOP,\n        overflow: 'visible !important',\n        background: theme.palette.customAlternateBackground\n      }\n    },\n    anchorOrigin: {\n      vertical: \"bottom\",\n      horizontal: \"left\"\n    },\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"left\"\n    },\n    getContentAnchorEl: null\n  };\n\n  const [items, setItems] = useState(itemsFromChart);\n  const [selectAll, setSelectAll] = useState(allowMultiple); // default: all is selected if multiSelect is true\n\n  useEffect(() => {\n    setItems(itemsFromChart);\n  }, [itemsFromChart]);\n\n  useEffect(() => {\n    setSelectAll(items.every(item => item.selected)); // set selectAll if all items are selected\n  }, [items]);\n\n  const handleChange = (event) => {\n    // Get the array of the currently selected value(s)\n    const {\n      target: { value }\n    } = event;\n\n    // If the current selection has SELECT_ALL\n    // Behavior:\n    // - If SELECT_ALL is being selected now, then set all items to selected\n    // - IF SELECT_ALL is being de-selected now, then set all items but the first one to be unselected \n    // (to make sure there's always at least 1 item being selected)\n    if (value.includes(SELECT_ALL)) {\n      const updatedItems = items.map((item, index) => ({ ...item, selected: index == 0 ? true : !selectAll }));\n      onSeriesSelection({ newDataColumns: updatedItems });\n      setSelectAll(!selectAll);\n    }\n    // Else, if an ordinary item is selected/de-selected:\n    else {\n      const selectedItems = items.filter(item => value.includes(item.label));\n      const updatedItems = items.map(item => ({\n        ...item,\n        selected: selectedItems.some(selectedItem => selectedItem.label === item.label)\n      }));\n      onSeriesSelection({ newDataColumns: updatedItems });\n      setSelectAll(false);\n    }\n  };\n\n  const handleItemToggle = (item) => {\n    const updatedItems = items.map(existingItem =>\n      existingItem.label === item.label ? { ...existingItem, selected: !existingItem.selected } : existingItem\n    );\n    onSeriesSelection({ newDataColumns: updatedItems });\n  };\n\n  const renderedLabel = (selected) => {\n    const returnNumSeriesDisplayed = () => {\n      return `${selected.length}/${items.length} ${seriesLabel || \"\"} displayed`;\n    };\n\n    return (\n      <Stack direction=\"row\" alignItems=\"center\" spacing={0.5}>\n        <VisibilityIcon fontSize=\"1.5rem\" sx={{ color: theme.palette.text.secondary }} />\n        <Typography variant=\"caption\" color=\"text.secondary\">\n          {/* show # of series selected if multiSelect. show cur selected serie if singleSelect */}\n          {allowMultiple ? returnNumSeriesDisplayed() : selected}\n        </Typography>\n      </Stack>\n    );\n  };\n\n  return (\n    <Stack spacing={1} direction=\"row\" alignItems=\"center\">\n      <FormControl\n        sx={{\n          [theme.breakpoints.down('sm')]: { width: '100%' },\n          minWidth: '200px',\n          '& .MuiInputBase-root': { borderRadius: `${theme.shape.borderRadius}px` }\n        }}\n        size=\"small\"\n      >\n        <Select\n          labelId={`${selectorID}-label`}\n          id={selectorID}\n          multiple={allowMultiple}\n          value={items.filter(item => item.selected).map(item => item.label)}\n          onChange={handleChange}\n          MenuProps={MenuProps}\n          renderValue={(selected) => renderedLabel(selected)}\n          sx={{ fontSize: '0.75em' }}\n        >\n          {/* Display all available items, together with checkbox for each item to select from */}\n          {items.map((item) => (\n            <MenuItem\n              disabled={\n                // If there is only 1 selected item and this is the selected item\n                // Then, prevent user from de-select this item too\n                // To ensure at least there is 1 selected item at all times\n                (items.filter(item => item.selected).length === 1 && item.selected) ? true : false\n              }\n              key={item.label}\n              value={item.label}\n              sx={{\n                backgroundColor: 'unset !important',\n                \"&:hover\": {\n                  backgroundColor: 'inherit !important',\n                }\n              }}\n            >\n              { /* checkboxes for MultiSelect, radioButtons for singleSelect*/}\n              {allowMultiple ? <Checkbox\n                checked={item.selected}\n                onClick={() => handleItemToggle(item)}\n\n                sx={{ p: 0.25, transform: 'scale(0.8)' }} />\n                : <Radio\n                  checked={item.selected}\n                  onChange={() => handleChange(item)}\n\n                  sx={{ p: 0.25, transform: 'scale(0.8)' }} />\n              }\n              <Typography variant='caption'>{item.label}</Typography>\n            </MenuItem>\n          ))}\n\n          {/* Show the option to select all if multiSelect is true*/}\n          {allowMultiple ?\n            (\n              <MenuItem\n                key={SELECT_ALL}\n                value={SELECT_ALL}\n                sx={{\n                  borderTop: 'solid 0.5px', borderColor: theme.palette.text.secondary,\n                  position: 'sticky', bottom: 0, zIndex: 1, marginBottom: theme.spacing(-1),\n                  background: theme.palette.customAlternateBackground,\n                  \"&:hover\": {\n                    background: theme.palette.customAlternateBackground\n                  }\n                }}\n              >\n                <Stack direction='row' width='100%' alignItems='center' justifyContent='space-between'>\n                  <Typography fontWeight={500} variant='caption' sx={{ pl: 1 }}>{SELECT_ALL}</Typography>\n                  <Switch\n                    checked={selectAll}\n                    onClick={() => handleItemToggle(SELECT_ALL)}\n                    sx={{ transform: 'scale(0.8)' }}\n                  />\n                </Stack>\n              </MenuItem>\n            ) : null\n          }\n        </Select>\n      </FormControl>\n\n      {/* Display only selected items in the Grids, and only in landscape mode and if multiSelect is true*/}\n      {(displayChip && allowMultiple) && <Grid container spacing={1}\n        sx={{\n          [theme.breakpoints.down('sm')]: {\n            display: 'none'\n          },\n        }}\n      >\n        {items.filter(item => item.selected).map((item) => (\n          <Grid item key={item.label}>\n            <Chip\n              label={<Typography variant='caption'>{item.label}</Typography>}\n              size=\"small\"\n              {...(items.filter(item => item.selected).length !== 1 && { onDelete: () => handleItemToggle(item) })}\n            />\n          </Grid>\n        ))}\n      </Grid>}\n\n\n    </Stack>\n  );\n}\n","/* eslint-disable */\n\nexport const ChartControlType = {\n  CategoryFilter: { position: 'top', stackDirection: 'column' },\n  DateRangeFilter: { position: 'bottom', stackDirection: 'column-reverse' },\n  ChartRangeFilter: { position: 'bottom', stackDirection: 'column-reverse' },\n  NumberRangeFilter: { position: 'top', stackDirection: 'column' }\n}\n\n// Function to generate a random ID for the google chart container\nexport const generateRandomID = () => {\n  return Math.random().toString(36).substr(2, 9); // Generates a random string of length 9\n}\n\n// -------- Chart options --------\n\nconst hideAnnotations = {\n  stem: {\n    length: 0,\n  },\n  textStyle: {\n    opacity: 0,\n  },\n  boxStyle: null,\n};\n\nconst returnResponsiveFontSizeInPixels = ({ isPortrait, isSmaller }) => {\n  return (\n    isSmaller ? (isPortrait ? 6 : 8) : (isPortrait ? 8 : 10)\n  );\n}\n\nexport const returnGenericOptions = (props) => {\n  const { chartData, subchartIndex, isPortrait, theme } = props;\n\n  // Define some shared styling rules for the chart\n  const axisTitleTextStyle = {\n    italic: false,\n    bold: true,\n    color: theme.palette.chart.axisTitle,\n    fontSize: returnResponsiveFontSizeInPixels({ isPortrait })\n  };\n  const axisTextStyle = {\n    color: theme.palette.chart.axisText,\n    fontSize: returnResponsiveFontSizeInPixels({ isPortrait })\n  };\n\n  // ---- Formulate the options for this specific chart:\n  // 1. Populate first with subchart's options (if any)\n  let options = chartData.subcharts?.[subchartIndex].options\n    ? { ...chartData.subcharts[subchartIndex].options }\n    : {};\n\n  // 2. Append own chart's options and then populate with universal options for all charts\n  options = {\n    ...options,\n    ...chartData.options,\n    theme: 'material',\n    curveType: options.curveType || chartData.options?.curveType || 'function',\n    crosshair: { orientation: 'both', trigger: 'focus', opacity: 0.5 },\n    backgroundColor: { fill: chartData.options?.backgroundColor?.fill || 'transparent' },\n    chartArea: {\n      ...chartData.options?.chartArea,\n      width: isPortrait ? (chartData.options?.chartArea?.width?.portrait || '80%') : (chartData.options?.chartArea?.width?.landscape || '75%'),\n      height: isPortrait ? (chartData.options?.chartArea?.height?.portrait || '60%') : (chartData.options?.chartArea?.height?.landscape || '70%'),\n    },\n    width: isPortrait ? (chartData.options?.width?.portrait || '100%') : (chartData.options?.width?.landscape || '100%'),\n    // if there is a filter, we make space for the chartFilter from the chart's height.\n    // value is divided in 2 because the calculation is applied twice due to\n    // how react-google-charts nest components\n    height: chartData.height || '100%',\n    tooltip: {\n      isHtml: true,\n      showColorCode: false\n    },\n    legend: {\n      alignment: isPortrait ? 'center' : 'start',\n      position:\n        chartData.options?.legend?.position\n        ?? (isPortrait ? 'top' : 'right'),\n      scrollArrows: {\n        activeColor: theme.palette.chart.axisTitle,\n        inactiveColor: theme.palette.text.secondary,\n      },\n      pagingTextStyle: {\n        fontSize: 10,\n        color: theme.palette.chart.axisTitle,\n        bold: true,\n      }\n    }\n  };\n\n  // 3. Append to vAxis and hAxis properties\n  options.vAxis = {\n    ...options.vAxis,\n    format: options.vAxis?.format ?? 'decimal',\n    title: options.vAxis?.title ?? '',\n    viewWindow: {\n      min: options.vAxis?.viewWindow?.min ?? 0,\n      max: options.vAxis?.viewWindow?.max ?? null,\n      max: options.vAxis?.viewWindow?.max ?? null,\n    },\n  };\n  options.hAxis = {\n    ...options.hAxis,\n    title: options.hAxis?.title ?? '',\n  };\n  // 3.1. If in portrait mode, slant the text of the hAxis\n  if (isPortrait) {\n    options.hAxis = {\n      ...options.hAxis,\n      slantedText: true,\n      slantedTextAngle: 30,\n    };\n  }\n\n  // 4. Override with custom colors:\n  // 4.1. Color scheme of all the series of this chart\n  if (typeof options.colors === 'string' || !options.colors) options.colors = theme.palette.chart.optionsColors[options.colors || 'multiColor'];\n  // 4.2. Individual color of a single serie (if given)\n  if (options.series) {\n    Object.values(options.series).forEach((_serie) => {\n      const serie = _serie;\n      if (serie.color === 'default') {\n        serie.color = theme.palette.primary.main;\n      }\n    });\n  }\n  // 4.3. Color of the trendline\n  if (options.trendlines) {\n    options.trendlines.forEach((_item) => {\n      const item = _item;\n      item.color = theme.palette.primary.main;\n    });\n  }\n  // 4.4. Color axis of the Calendar chart\n  if (options.colorAxis) {\n    switch (options.colorAxis.colors) {\n      case 'matchingColor':\n        options.colorAxis.colors = [\n          theme.palette.chart.colorAxisFirstColor,\n          theme.palette.chart.optionsColors.multiColor[options.colorAxis.colorIndex],\n        ];\n        break;\n      case 'default':\n        options.colorAxis.colors = [\n          theme.palette.chart.colorAxisFirstColor,\n          theme.palette.NYUpurple,\n        ];\n        break\n      // If not any of the above, then the colorAxis should be from the chart (aqi/temperature/humidity...)\n      default:\n        try {\n          options.colorAxis = theme.palette.chart.colorAxes[options.colorAxis.colors]\n        } catch {\n          options.colorAxis = []\n        }\n        break;\n    }\n  }\n  // 4.5. Colors of other elements of the chart (typographies and gridlines)\n  options.vAxis = {\n    ...options.vAxis,\n    titleTextStyle: axisTitleTextStyle,\n    textStyle: axisTextStyle,\n    gridlines: {\n      ...options.vAxis?.gridlines,\n      color: options.vAxis?.gridlines?.color || theme.palette.chart.gridlines\n    },\n    minorGridlines: { count: 0 },\n  };\n  options.hAxis = {\n    ...options.hAxis,\n    titleTextStyle: axisTitleTextStyle,\n    textStyle: axisTextStyle,\n    gridlines: {\n      ...options.hAxis?.gridlines,\n      color: options.hAxis?.gridlines?.color || theme.palette.chart.gridlines\n    },\n    minorGridlines: {\n      ...options.hAxis?.minorGridlines,\n      color: options.hAxis?.gridlines?.color || theme.palette.chart.gridlines,\n    },\n  };\n  options.legend = {\n    ...options.legend,\n    textStyle: axisTextStyle,\n  };\n  options.annotations = {\n    ...options.annotations,\n    highContrast: true,\n    textStyle: {\n      color: theme.palette.primary.contrastText,\n      fontSize: returnResponsiveFontSizeInPixels({ isPortrait, isSmaller: true }),\n      opacity: 0.8\n    },\n    stem: {\n      ...options.annotations?.stem,\n      color: theme.palette.chart.axisTitle,\n      thickness: 2\n    },\n    boxStyle: {\n      rx: theme.shape.borderRadius, // rounded corners\n      ry: theme.shape.borderRadius,\n      fill: theme.palette.chart.annotationBoxFill,\n      fillOpacity: 0.5\n    },\n  };\n\n  return options;\n}\n\nexport const returnChartControlUI = (props) => {\n  const { chartControl, mainChartData, mainChartOptions, subchartIndex, theme, isPortrait } = props;\n  let chartControlUI = {\n    ...chartControl.options?.ui,\n    snapToData: true\n  };\n\n  // Assign the appropriate UI for chartControl based on controlType (if existed)\n  if (chartControl.controlType === 'ChartRangeFilter') {\n    chartControlUI = {\n      ...chartControlUI,\n      chartType: mainChartData.chartType,\n      chartView: {\n        columns:\n          mainChartData.columns\n          || (mainChartData.subcharts\n            && mainChartData.subcharts[subchartIndex].columns)\n          || null\n          || null,\n      },\n      chartOptions: {\n        ...mainChartOptions,\n        hAxis: {\n          ...mainChartOptions.hAxis,\n          textPosition: 'out',\n          textStyle: { color: theme.palette.chart.axisText, fontSize: returnResponsiveFontSizeInPixels({ isPortrait, isSmaller: true }) },\n          title: null\n        },\n        vAxis: {\n          ...mainChartOptions.vAxis,\n          title: null\n        },\n        annotations: hideAnnotations,\n        legend: null,\n      }\n    };\n  }\n  return chartControlUI;\n}\n\nexport const addTouchEventListenerForChartControl = ({ controlWrapper, chartID }) => {\n  const touchHandler = (event) => {\n    var touches = event.changedTouches,\n      first = touches[0],\n      type = '';\n\n    switch (event.type) {\n      case 'touchstart':\n        type = 'mousedown';\n        break;\n      case 'touchmove':\n        type = 'mousemove';\n        break;\n      case 'touchend':\n        type = 'mouseup';\n        break;\n      default:\n        return;\n    }\n\n    var simulatedEvent = new MouseEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      view: window,\n      detail: 1,\n      screenX: first.screenX,\n      screenY: first.screenY,\n      clientX: first.clientX,\n      clientY: first.clientY,\n      button: 0, // left button\n      relatedTarget: null,\n    });\n\n    first.target.dispatchEvent(simulatedEvent);\n    event.preventDefault();\n  }\n\n  let isMounted = true; // Flag to track component's mount status\n  if (!controlWrapper) return;\n\n  const controlDOM = document.querySelector(`#control-${chartID}`);\n  if (!controlDOM) return;\n\n  ['touchstart', 'touchmove', 'touchend', 'touchcancel']\n    .forEach((touchEvent) => {\n      controlDOM.addEventListener(touchEvent, touchHandler, { capture: true });\n    });\n\n  return () => {\n    isMounted = false; // Component is unmounting\n\n    ['touchstart', 'touchmove', 'touchend', 'touchcancel'].forEach((touchEvent) => {\n      controlDOM.removeEventListener(touchEvent, touchHandler, { capture: true });\n    });\n  };\n}","import { Box } from '@mui/material/';\nimport { styled } from '@mui/material/styles';\n\nconst GoogleChartStyleWrapper = styled(Box, {\n  shouldForwardProp: (prop) => prop !== 'gradientBackgroundId' && prop !== 'isPortrait',\n})(({ theme, isPortrait, gradientBackgroundId }) => ({\n  // CSS for optional gradient background \n  '& svg>g:nth-of-type(2)>rect:first-of-type': {\n    fill: `url(#${gradientBackgroundId})`,\n    fillOpacity: 1,\n    filter: 'contrast(0.4) brightness(1.4)'\n  },\n\n  // CSS for HTML tooltip\n  '& .google-visualization-tooltip, .nivo-tooltip': {\n    width: 'unset !important',\n    maxWidth: '350px',\n    height: 'unset',\n    padding: '1em',\n    boxShadow: '0px 2px 2px 0px rgba(204, 204, 204, 0.6)',\n    mozBoxShadow: '0px 2px 2px 0px rgba(204, 204, 204, 0.6)',\n    webkitBoxShadow: '0px 2px 2px 0px rgba(204, 204, 204, 0.6)',\n    border: 'solid 1px',\n    borderColor: theme.palette.text.secondaryRGB,\n    fontSize: `${isPortrait ? 9 : 12}px`,\n    color: theme.palette.chart.tooltip.text,\n    background: theme.palette.chart.tooltip.background,\n    borderRadius: theme.shape.borderRadius,\n    '& ul': {\n      margin: '0 !important',\n      '& li': {\n        margin: '0 !important',\n        padding: '0 !important',\n        '& span': {\n          fontSize: `${isPortrait ? 9 : 12}px !important`,\n          color: `${theme.palette.chart.tooltip.text} !important`,\n        }\n      }\n    }\n  },\n\n  // -------- chartControl's additional stylings\n  '& .goog-menuitem-highlight, .goog-menuitem-hover': {\n    backgroundColor: `${theme.palette.primary} !important`\n  },\n\n  // CategoryFilter\n  '& .google-visualization-controls-categoryfilter': {\n    fontSize: '0.85rem',\n    marginTop: '0.75rem',\n    marginBottom: '-0.75rem',\n\n    '& .goog-inline-block > .goog-menu-button': {\n      marginTop: 0\n    },\n\n    '& .goog-menu-button-hover .goog-menu-button-outer-box, .goog-menu-button-hover .goog-menu-button-inner-box': {\n      borderColor: 'inherit !important'\n    },\n\n    '& .google-visualization-controls-label': {\n      color: theme.palette.text.secondary,\n      fontWeight: 500,\n      verticalAlign: 'middle',\n      marginBottom: '0.25rem'\n    },\n    '& .goog-menu-button-outer-box': {\n      backgroundColor: theme.palette.background.paper,\n      border: 'unset',\n\n      '& .goog-menu-button-inner-box': {\n        paddingTop: theme.spacing(0.5),\n        paddingBottom: theme.spacing(0.5),\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2),\n        border: 'solid',\n        borderWidth: '0.5px',\n        borderRadius: theme.shape.borderRadius,\n        borderColor: theme.palette.text.secondary,\n\n        '& .goog-menu-button-caption': {\n          color: theme.palette.text.secondary\n        }\n      }\n    }\n  },\n\n  // DateRangeFilter\n  '& .google-visualization-controls-rangefilter': {\n    width: '100%',\n    fontSize: '0.75rem',\n    '& .goog-inline-block': {\n      width: '100%',\n    },\n    '& .google-visualization-controls-slider-horizontal': {\n      width: '90%',\n      margin: '0 5%',\n    },\n    '& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(1)': {\n      position: 'absolute',\n      top: '1.5em',\n      left: '5%'\n    },\n    '& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(2)': {\n      position: 'absolute',\n      top: '1.5em',\n      right: '5%'\n    },\n    '& .google-visualization-controls-slider-handle': {\n      background: theme.palette.primary.main\n    },\n    '& .google-visualization-controls-rangefilter-thumblabel': {\n      color: theme.palette.text.secondary,\n      padding: 0,\n      fontWeight: 500\n    },\n    '& .google-visualization-controls-slider-thumb': {\n      background: theme.palette.primary.main,\n      border: 'unset',\n      borderRadius: theme.shape.borderRadius\n    }\n  },\n\n  // These are the paths showing on top of the line chart\n  // and the stroke around the bar/column chart\n  // when the user hovers on the legend to make the serie stand out\n  // by Google Chart's default doesn't change color based on light/dark theme, but we modify here:\n  '& path[stroke-opacity=\"0.3\"], path[stroke-opacity=\"0.1\"], path[stroke-opacity=\"0.05\"], rect[stroke-opacity]': {\n    stroke: theme.palette.text.primary,\n    strokeWidth: 3\n  },\n\n  // Cursor of series in legends\n  '& [column-id]:not(:empty)': {\n    cursor: 'pointer',\n    ':hover': {\n      fontWeight: 600\n    }\n  }\n}));\n\nexport default GoogleChartStyleWrapper;\n","import { isValidArray } from \"../UtilFunctions\";\n\nconst normalizeColorStopOffsets = ({ offsets, minOffset, maxOffset }) => {\n  return offsets.map(offset => (offset - minOffset) / (maxOffset - minOffset));\n}\n\nconst normalizeColorStops = ({ colors, optionalMinValue, optionalMaxValue }) => {\n  if (!isValidArray(colors)) return [\n    { color: \"#fff\", offset: 0 },\n    { color: \"#fff\", offset: 1 }\n  ];\n\n  // No offsets provided, generate equally spaced offsets\n  if (typeof colors[0] === 'string') {\n    const totalColors = colors.length;\n    return colors.map((color, index) => ({\n      color: color,\n      offset: index / (totalColors - 1)\n    }));\n  }\n  // Offsets are provided, normalize them\n  else {\n    let clampedStops = colors;\n    if (optionalMinValue) {\n      clampedStops = colors.filter(colorStop => colorStop.offset >= optionalMinValue);\n    }\n    if (optionalMaxValue) {\n      clampedStops = colors.filter(colorStop => colorStop.offset <= optionalMaxValue);\n    }\n    const offsets = clampedStops.map(colorStop => colorStop.offset);\n\n    const minOffset = optionalMinValue || Math.min(...offsets);\n    const maxOffset = optionalMaxValue || Math.max(...offsets);\n\n    const normalizedOffsets = normalizeColorStopOffsets({ offsets, minOffset, maxOffset });\n\n    return clampedStops.map((colorStop, index) => ({\n      color: colorStop.color,\n      offset: normalizedOffsets[index]\n    }));\n  }\n}\n\n// Function to return an array of STEPS discrete colors in a gradient from an array of starting colors\n// Used for NivoCalendarChart\nexport const generateDiscreteColorGradientArray = ({ colors, numSteps = 100 }) => {\n  function hexToRgb(hex) {\n    const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n      return r + r + g + g + b + b;\n    });\n\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)]\n      : [null, null, null];\n  }\n\n  function rgbToHex(r, g, b) {\n    return \"#\" + [r, g, b].map(x => {\n      const hex = x.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    }).join('');\n  }\n\n  function interpolateColor(color1, color2, factor) {\n    // Return immediately if the 2 colors are the same\n    if (color1.every((element, index) => element === color2[index])) return color1;\n\n    // Else, calculate the middle of the 2 colors\n    let result = color1.slice();\n    for (let i = 0; i < 3; i++) {\n      result[i] = Math.round(result[i] + factor * (color2[i] - color1[i]));\n    }\n    return result;\n  }\n\n  const normalizedColors = normalizeColorStops({ colors });\n  normalizedColors.forEach((colorStop) => {\n    colorStop.color = hexToRgb(colorStop.color)\n  });\n\n  let colorArray = [];\n  const stepPositions = Array.from({ length: numSteps }, (_, i) => i / (numSteps - 1));\n\n  for (let i = 0; i < stepPositions.length; i++) {\n    const pos = stepPositions[i];\n    let color1, color2, offset1, offset2;\n\n    for (let j = 0; j < normalizedColors.length - 1; j++) {\n      if (pos >= normalizedColors[j].offset && pos <= normalizedColors[j + 1].offset) {\n        color1 = normalizedColors[j].color;\n        color2 = normalizedColors[j + 1].color;\n        offset1 = normalizedColors[j].offset;\n        offset2 = normalizedColors[j + 1].offset;\n        break;\n      }\n    }\n\n    const localFactor = (pos - offset1) / (offset2 - offset1);\n    const interpolatedColor = interpolateColor(color1, color2, localFactor);\n    colorArray.push(rgbToHex(...interpolatedColor));\n  }\n\n  return colorArray;\n};\n\n// Function to return CSS background from an array of colors (with or without offsets)\nexport const generateCssBackgroundGradient = ({ gradientDirection, colors, optionalMinValue, optionalMaxValue }) => {\n  const normalizedColors = normalizeColorStops({ colors, optionalMinValue, optionalMaxValue });\n\n  return `linear-gradient(${gradientDirection}, ${normalizedColors.map(colorStop => `${colorStop.color} ${colorStop.offset * 100}%`).join(', ')})`;\n}\n\nexport const generateSvgFillGradient = ({ colors, optionalMinValue, optionalMaxValue }) => {\n  const normalizedColors = normalizeColorStops({ colors, optionalMinValue, optionalMaxValue });\n\n  return normalizedColors.map(colorStop => ({\n    color: colorStop.color,\n    offset: colorStop.offset * 100 + '%'\n  }));\n};\n\n// Gradient for background of the Google Charts\nexport const BackgroundGradient = ({ id, colors }) => (\n  <svg width={0} height={0} visibility=\"hidden\">\n    <defs>\n      <linearGradient id={id} x1=\"0\" y1=\"1\" x2=\"0\" y2=\"0\">\n        {colors.map((colorStop, index) => (\n          <stop key={index} offset={colorStop.offset} stopColor={colorStop.color} />\n        ))}\n      </linearGradient>\n    </defs>\n  </svg>\n);","import { useTheme } from '@mui/material/styles';\nimport { Box, Typography } from '@mui/material';\nimport { generateCssBackgroundGradient } from '../../../../Utils/Gradient/GradientUtils';\n\nconst ValueRangeBox = ({ title, valueRange, colorAxis, isPortrait }) => {\n  const theme = useTheme();\n\n  if (valueRange?.min === null || valueRange?.max === null) return null;\n\n  const { colors, minValue, maxValue } = colorAxis;\n  let rangeBoxMinValue = minValue, rangeBoxMaxValue = maxValue;\n\n  if (minValue === undefined) rangeBoxMinValue = valueRange.min;\n  if (maxValue === undefined) rangeBoxMaxValue = valueRange.max;\n\n  if (valueRange.min < rangeBoxMinValue) rangeBoxMinValue = valueRange.min;\n  if (valueRange.max > rangeBoxMaxValue) rangeBoxMaxValue = valueRange.max;\n\n  const calculateMarkerPositionOnRangeBox = (value) => {\n    const position = ((value - rangeBoxMinValue) / (rangeBoxMaxValue - rangeBoxMinValue)) * 100;\n    return `${position}%`;\n  };\n\n  const labelStyle = {\n    position: 'absolute',\n    fontSize: '0.75rem',\n    color: theme.palette.text.secondary,\n    lineHeight: 1,\n    textAlign: 'center',\n    transform: 'translateX(-50%)',\n    minWidth: '75px',\n    whiteSpace: 'nowrap',\n  };\n  const topLabelStyle = {\n    top: '-1.5rem',\n    transform: 'translateX(-50%)'\n  };\n  const bottomLabelStyle = {\n    bottom: '-1.25rem',\n    transform: isPortrait ? 'translateX(-100%)' : 'translateX(-50%)'\n  };\n\n  const triangleStyle = {\n    position: 'absolute',\n    width: 0,\n    height: 0,\n    borderLeft: '0.25rem solid transparent',\n    borderRight: '0.25rem solid transparent',\n    transform: 'translateX(-50%)',\n  };\n  const topTriangleStyle = {\n    top: '-0.5rem',\n    borderTop: `0.25rem solid ${theme.palette.text.secondary}`\n  };\n  const bottomTriangleStyle = {\n    bottom: '-0.5rem',\n    borderBottom: `0.25rem solid ${theme.palette.text.secondary}`\n  };\n\n  return (\n    <Box sx={{\n      position: 'sticky',\n      width: 'fit-content',\n      my: 4,\n      float: 'right',\n      right: (isPortrait ? '0' : '50px')\n    }}>\n      <Typography sx={{\n        display: 'inline',\n        position: 'absolute',\n        textAlign: 'right',\n        transform: 'translateX(calc(-100% - 0.5rem))',\n        fontSize: '0.75rem',\n        lineHeight: 1.25,\n        fontWeight: 500,\n        color: 'text.secondary'\n      }}>\n        {title}\n      </Typography>\n      <Box sx={{\n        background: generateCssBackgroundGradient({ gradientDirection: 'to right', colors: colors, optionalMaxValue: rangeBoxMaxValue }),\n        color: theme.palette.text.secondary,\n        border: `1px solid ${theme.palette.text.secondary}`,\n        width: isPortrait ? '250px' : '300px',\n        height: '1rem',\n        position: 'relative',\n        justifyContent: 'space-between',\n      }}>\n        <span style={{ ...labelStyle, ...topLabelStyle, left: calculateMarkerPositionOnRangeBox(valueRange.min) }}>min: {Math.round(valueRange.min)}</span>\n        <span style={{ ...labelStyle, ...bottomLabelStyle, left: calculateMarkerPositionOnRangeBox(valueRange.max) }}>max: {Math.round(valueRange.max)}</span>\n        <div style={{ ...triangleStyle, ...topTriangleStyle, left: calculateMarkerPositionOnRangeBox(valueRange.min) }}></div>\n        <div style={{ ...triangleStyle, ...bottomTriangleStyle, left: calculateMarkerPositionOnRangeBox(valueRange.max) }}></div>\n      </Box>\n    </Box>\n  );\n};\n\nexport default ValueRangeBox;","import { useEffect, useRef } from 'react';\nimport { Box, Chip } from '@mui/material';\n\nimport parse from 'html-react-parser';\nimport { replacePlainHTMLWithMuiComponents } from '../../../../Utils/UtilFunctions';\n\nconst TooltipCalendarChart = ({ day, color, tooltipText, dateRange, inFirstTwoRowsOfChart }) => {\n  const tooltipBoxRef = useRef(null);\n\n  // If the cell hovered over is in the first two rows of the chart,\n  // move the tooltip to the bottom of the chart\n  // Read subsequent comments to understand why we need to do this\n  useEffect(() => {\n    if (tooltipBoxRef.current && inFirstTwoRowsOfChart(day, dateRange)) {\n      const parentDiv = tooltipBoxRef.current.parentElement;\n      if (parentDiv) {\n        parentDiv.style.top = '11vh';\n      }\n    }\n  }, [tooltipBoxRef, inFirstTwoRowsOfChart]);\n\n\n  // Note that our Box is just a container 'inside' the tooltip\n  // The tooltip itself is actually the Box's parent div\n  return (\n    <Box ref={tooltipBoxRef} className='nivo-tooltip'>\n      <Chip sx={{ backgroundColor: color, mr: 0.5, height: '10px', width: '10px', borderRadius: '50%' }} />\n      {parse(tooltipText, { replace: replacePlainHTMLWithMuiComponents })}\n    </Box>\n  );\n};\n\nexport default TooltipCalendarChart;","\nexport const getDateRangeForCalendarChart = (dateStrings) => {\n  return {\n    min: dateStrings.reduce((min, current) => (current < min ? current : min)),\n    max: dateStrings.reduce((max, current) => (current > max ? current : max))\n  }\n};\n\nexport const getValueRangeForCalendarChart = (values) => {\n  return { min: Math.min(...values), max: Math.max(...values) };\n};\n\nexport const getCalendarChartMargin = (isPortrait) => {\n  return isPortrait\n    ? { top: 30, right: 0, bottom: 20, left: 20 }\n    : { top: 30, right: 40, bottom: 20, left: 40 };\n};\n\nexport const calculateValueRange = (data) => {\n  const values = data.map((item) => item.value);\n  return { min: Math.min(...values), max: Math.max(...values) };\n};\n\n","/* eslint-disable */\nimport { ResponsiveCalendar } from '@nivo/calendar';\nimport { useTheme } from '@mui/material/styles';\nimport { generateDiscreteColorGradientArray } from '../../../../Utils/Gradient/GradientUtils';\n\nimport ValueRangeBox from './ValueRangeBox';\nimport TooltipCalendarChart from './TooltipCalendarChart';\nimport { getCalendarChartMargin, getDateRangeForCalendarChart, getValueRangeForCalendarChart } from '../NivoChartHelper';\nimport { useEffect, useState } from 'react';\nimport { isValidArray } from '../../../../Utils/UtilFunctions';\nimport GoogleChartStyleWrapper from '../../SubchartUtils/GoogleChartStyleWrapper';\nimport { Box } from '@mui/material';\n\nconst YEAR_SPACING = 40;\n\nconst NivoCalendarChart = (props) => {\n    const { dataArray, valueRangeBoxTitle, isPortrait, options, windowSize } = props;\n\n    const [dateRange, setDateRange] = useState({ min: null, max: null });\n    const [valueRange, setValueRange] = useState({ min: null, max: null });\n    const [calendarHeight, setCalendarHeight] = useState(400);\n\n    useEffect(() => {\n        if (!isValidArray(dataArray)) return;\n\n        const dateStrings = dataArray.map(item => item.day);\n        const thisDateRange = getDateRangeForCalendarChart(dateStrings)\n        setDateRange(thisDateRange);\n\n        const values = dataArray.map(item => item.value);\n        setValueRange(getValueRangeForCalendarChart(values));\n\n        // Get the number of years we have data for and the number of years to display\n        const lastYear = new Date(thisDateRange.max).getFullYear();\n        const firstYear = new Date(thisDateRange.min).getFullYear();\n        const numberOfYears = lastYear - firstYear + 1;\n        const calendarChartMargin = getCalendarChartMargin(isPortrait);\n\n        const cellSize = Math.min(windowSize[0] / 60, 20); // windowSize[0]: innerWidth\n        // max cell size of 20\n        const yearHeight = cellSize * 7; // Height for one year\n        const totalHeight = numberOfYears * (yearHeight + YEAR_SPACING) + calendarChartMargin.top + calendarChartMargin.bottom;\n        setCalendarHeight(totalHeight);\n    }, [dataArray, windowSize]);\n\n    const displayLegend = options?.legend?.position && options.legend.position !== \"none\";\n\n    const calendarChartMargin = getCalendarChartMargin(isPortrait, displayLegend);\n\n    const theme = useTheme();\n\n    // Function to extract tooltip text from HTML tooltip\n    const extractTooltipText = (tooltip) => {\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(tooltip, 'text/html');\n        return doc.body.innerHTML;\n    };\n\n    // Function to check if a date is in the first two rows of the chart\n    // Used to anchor the tooltip to the bottom while hovering over\n    // the first two rows of the chart\n    const inFirstTwoRowsOfChart = (dateStr, dateRange) => {\n        const date = new Date(dateStr);\n        const dayOfWeek = date.getDay();\n\n        // Check if the date is Sunday (0) or Monday (1)\n        const isFirstTwoDaysOfWeek = dayOfWeek === 0 || dayOfWeek === 1;\n\n        // Extract the first year from the date range once\n        const firstYear = new Date(dateRange.min).getFullYear();\n\n        // Check if the date is in the first year of the date range\n        const isInFirstYear = date.getFullYear() === firstYear;\n\n        return isFirstTwoDaysOfWeek && isInFirstYear;\n    };\n\n    const calendarCellColors = generateDiscreteColorGradientArray({\n        colors: options?.colorAxis?.colors,\n        numSteps: options?.colorAxis?.gradientSteps\n    });\n\n    return (\n        <GoogleChartStyleWrapper\n            isPortrait={isPortrait}\n            className=\"Calendar\"\n            position=\"relative\"\n            minWidth=\"550px\"\n            height=\"100%\"\n        >\n            {displayLegend ? (\n                <ValueRangeBox\n                    title={valueRangeBoxTitle}\n                    valueRange={valueRange}\n                    colorAxis={options?.colorAxis}\n                    isPortrait={isPortrait}\n                />\n            ) : null}\n\n\n            <Box sx={{\n                height: `${calendarHeight}px`,\n                maxHeight: \"450px\",\n                overflowY: 'auto',\n                width: '100%',\n                position: 'relative'\n            }}>\n                <Box sx={{\n                    height: `${calendarHeight}px`,\n                    position: 'absolute',\n                    width: '100%'\n                }}>\n                    <ResponsiveCalendar\n                        data={dataArray}\n                        from={dateRange.min}\n                        to={dateRange.max}\n                        emptyColor=\"transparent\"\n                        align=\"top\"\n                        theme={{\n                            text: {\n                                fill: theme.palette.text.secondary,\n                            },\n                            fontSize: '0.75rem'\n                        }}\n                        colors={calendarCellColors}\n                        minValue={options?.colorAxis?.minValue}\n                        maxValue={options?.colorAxis?.maxValue}\n                        margin={calendarChartMargin}\n                        yearSpacing={YEAR_SPACING}\n                        monthBorderColor={theme.palette.text.primary}\n                        monthBorderWidth={1}\n                        daySpacing={0.25}\n                        dayBorderWidth={0}\n                        tooltip={({ day, value, color }) => {\n                            const tooltipData = dataArray.find(item => item.day === day);\n                            const tooltipText = tooltipData ? extractTooltipText(tooltipData.tooltip) : '';\n\n                            return (\n                                <TooltipCalendarChart\n                                    day={day}\n                                    color={color}\n                                    tooltipText={tooltipText}\n                                    dateRange={dateRange}\n                                    inFirstTwoRowsOfChart={inFirstTwoRowsOfChart}\n                                />\n                            );\n                        }}\n                    />\n                </Box>\n            </Box>\n\n        </GoogleChartStyleWrapper>\n    );\n};\n\nexport default NivoCalendarChart;\n\n","/* eslint-disable */\n\nimport { styled } from '@mui/material/styles';\nimport { Paper } from '@mui/material';\n\nimport { addDays, endOfDay, startOfDay, format } from \"date-fns\";\nimport AggregationType from './AggregationType';\n\nexport const returnCustomStaticRanges = ({ today, minDateOfDataset, aggregationType }) => {\n  const hourlyReturn = [\n    {\n      label: \"Last 14d\",\n      range: () => ({\n        startDate: startOfDay(addDays(today, -14)),\n        endDate: endOfDay(today)\n      })\n    },\n    {\n      label: \"Last 30d\",\n      range: () => ({\n        startDate: startOfDay(addDays(today, -30)),\n        endDate: endOfDay(today)\n      })\n    }\n  ];\n\n  const dailyReturn = [{\n    label: \"Last 90d\",\n    range: () => ({\n      startDate: startOfDay(addDays(today, -90)),\n      endDate: endOfDay(today)\n    })\n  },\n  {\n    label: \"Last 365d\",\n    range: () => ({\n      startDate: startOfDay(addDays(today, -365)),\n      endDate: endOfDay(today)\n    })\n  },\n  {\n    label: \"All Time\",\n    range: () => ({\n      startDate: minDateOfDataset,\n      endDate: endOfDay(today)\n    })\n  }\n  ];\n\n  return (aggregationType === AggregationType.hourly) ? hourlyReturn : [...hourlyReturn, ...dailyReturn];\n};\n\nexport const StyledDateRangePicker = styled(Paper, {\n  shouldForwardProp: (prop) => prop !== 'showPickerPanel' && prop !== 'smallScreen',\n})(({ theme, showPickerPanel, smallScreen }) => ({\n  zIndex: showPickerPanel === true && 1,\n  position: \"relative\",\n  padding: showPickerPanel ? theme.spacing(1) : 0,\n  margin: (showPickerPanel && !smallScreen) ? theme.spacing(-1) : 0,\n  maxWidth: '100%',\n  background: showPickerPanel ? theme.palette.customAlternateBackground : 'transparent',\n  boxShadow: showPickerPanel === false && 'none',\n  '& .rdrDayToday .rdrDayNumber span:after': {\n    background: theme.palette.secondary\n  },\n  '& .rdrDateDisplayWrapper, .rdrCalendarWrapper, .rdrDefinedRangesWrapper, .rdrStaticRange, .rdrDateDisplayItem': {\n    background: 'transparent'\n  },\n  '& .rdrDateInput': {\n    borderRadius: theme.shape.borderRadius,\n    boxShadow: 'none'\n  },\n  '& .rdrDateDisplayItemActive': {\n    border: showPickerPanel === false && 'none'\n  },\n  '& .rdrDateDisplay': {\n    margin: 0,\n    minWidth: \"20rem\"\n  },\n  '& .rdrDateDisplayItem': {\n    margin: 0,\n    borderRadius: showPickerPanel ? theme.shape.borderRadius : 0,\n    \"&:hover:not(.rdrDateDisplayItemActive)\": {\n      border: showPickerPanel ? `1px solid ${theme.palette.action.disabled}` : \"none\"\n    }\n  },\n  '& .rdrDateDisplayItem:hover:not(.rdrDateDisplayItemActive)': {\n    border: showPickerPanel === false && '1px solid transparent'\n  },\n  '& .rdrDateDisplayItem + .rdrDateDisplayItem': {\n    margin: 0\n  },\n  '& .rdrDateDisplayItem:first-of-type': {\n    borderRight: showPickerPanel === false && `1px solid ${theme.palette.action.disabled} !important`\n  },\n  '& .rdrMonthAndYearWrapper, .rdrInputRanges': {\n    display: showPickerPanel === false && 'none !important',\n    padding: 0\n  },\n  '& .rdrMonthName': {\n    display: 'none',\n  },\n  '& .rdrDefinedRangesWrapper, .rdrMonths': {\n    display: showPickerPanel === false && 'none'\n  },\n  '&  .rdrInfiniteMonths': {\n    visibility: showPickerPanel === false && 'hidden',\n    width: \"100% !important\",\n    maxWidth: \"675px\",\n    margin: \"auto\"\n  },\n  '& .rdrDateDisplayWrapper': {\n    minWidth: '18rem',\n    borderRadius: theme.shape.borderRadius,\n    border: showPickerPanel ? \"none\" : `1px solid ${theme.palette.action.disabled}`,\n    \"&:hover\": {\n      border: showPickerPanel ? \"none\" : `1px solid ${theme.palette.text.primary}`,\n    }\n  },\n  '& .rdrDateRangePickerWrapper': {\n    width: '100%',\n    flexDirection: 'column-reverse'\n  },\n  '& .rdrStaticRanges': {\n    flexDirection: 'row',\n    minWidth: '21rem'\n  },\n  '& .rdrStaticRangeLabel': {\n    color: theme.palette.text.secondary,\n    borderRadius: theme.shape.borderRadius,\n    padding: `${theme.spacing(0.5)} ${theme.spacing(1)}`\n  },\n  '& .rdrDefinedRangesWrapper': {\n    border: 'none',\n    width: '100%'\n  },\n  '& .rdrNextPrevButton': {\n    background: theme.palette.primary.main,\n    borderRadius: theme.shape.borderRadius,\n    opacity: 1,\n    '&:hover': {\n      opacity: 0.5,\n      background: theme.palette.primary.main\n    }\n  },\n  '& .rdrNextPrevButton > i': {\n    color: \"white\"\n  },\n  '& .rdrNextButton > i': {\n    borderColor: `transparent transparent transparent white`\n  },\n  '& .rdrPprevButton > i': {\n    borderColor: `transparent white transparent transparent`\n  },\n  '& .rdrStaticRange': {\n    border: 'none'\n  },\n  '& .rdrStaticRangeSelected > .rdrStaticRangeLabel, .rdrMonthAndYearPickers': {\n    color: theme.palette.primary.main\n  },\n  '& .rdrMonthAndYearPickers': {\n    fontSize: '1rem'\n  },\n  '& .rdrStaticRange:hover .rdrStaticRangeLabel, .rdrStaticRange:focus .rdrStaticRangeLabel': {\n    background: theme.palette.customBackground.toString()\n  },\n  '& .rdrDayNumber span': {\n    color: theme.palette.text.primary.toString()\n  },\n  '& .rdrDayPassive .rdrDayNumber span': {\n    opacity: 0.5\n  },\n  '& .rdrMonthAndYearWrapper select': {\n    color: theme.palette.text.secondary.toString(),\n    background: 'none',\n    padding: `${theme.spacing(1)} ${theme.spacing(2)}`,\n    '&:hover': {\n      border: `1px solid ${theme.palette.text.secondary}`\n    }\n  },\n  '& .rdrDateDisplayItem input': {\n    color: theme.palette.text.secondary\n  },\n  '& .rdrDayDisabled': {\n    backgroundColor: theme.palette.customBackground\n  },\n  '& .rdrDayEndOfMonth .rdrInRange, .rdrDayEndOfMonth .rdrStartEdge, .rdrDayEndOfWeek .rdrInRange, .rdrDayEndOfWeek .rdrStartEdge, .rdrEndEdge, .rdrDayEndOfMonth .rdrDayInPreview, .rdrDayEndOfMonth .rdrDayStartPreview, .rdrDayEndOfWeek .rdrDayInPreview, .rdrDayEndOfWeek .rdrDayStartPreview, .rdrDayEndPreview': {\n    borderTopRightRadius: '2rem',\n    borderBottomRightRadius: '2rem'\n  },\n  '& .rdrStartEdge, .rdrDayStartOfMonth .rdrInRange, .rdrDayStartOfMonth .rdrEndEdge, .rdrDayStartOfWeek .rdrInRange, .rdrDayStartOfWeek .rdrEndEdge, .rdrDayStartOfMonth .rdrDayInPreview, .rdrDayStartOfMonth .rdrDayEndPreview, .rdrDayStartOfWeek .rdrDayInPreview, .rdrDayStartOfWeek .rdrDayEndPreview, .rdrDayStartPreview': {\n    borderTopLeftRadius: '2rem',\n    borderBottomLeftRadius: '2rem'\n  },\n  '& .rdrStartEdge, .rdrDayStartOfWeek .rdrInRange, .rdrDayStartOfMonth .rdrInRange, .rdrDayStartOfMonth .rdrEndEdge, .rdrDayStartOfWeek .rdrEndEdge': {\n    left: 0\n  },\n  '& .rdrEndEdge, .rdrDayEndOfWeek .rdrInRange, .rdrDayEndOfMonth .rdrInRange, .rdrDayEndOfWeek .rdrStartEdge': {\n    right: 0\n  },\n  '& .rdrSelected, .rdrInRange, .rdrStartEdge, .rdrEndEdge': {\n    top: '0px',\n    bottom: '0px',\n  },\n  '& .rdrMonths': {\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  '& .rdrDay': {\n    marginBottom: \"1px\",\n    '& span': {\n      top: '0px',\n      bottom: '0px'\n    }\n  },\n  '& .rdrMonthsHorizontal': {\n    overflowY: 'hidden'\n  },\n  '& .rdrDateInput:first-of-type:before': {\n    content: '\"\"',\n    backgroundImage: `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' class='MuiSvgIcon-root' focusable='false' aria-hidden='true' viewBox='0 0 24 24' data-testid='DateRangeIcon'%3E%3Cpath d='M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z' fill='${theme.palette.text.secondary}'/%3E%3C/svg%3E\")`,\n    width: \"0.75rem\",\n    height: \"0.75rem\",\n    display: \"block\",\n    position: \"absolute\",\n    top: \"50%\",\n    transform: \"translateY(-50%)\",\n    left: \"0.75rem\"\n  },\n  '& .rdrStaticRangeSelected span': {\n    color: theme.palette.primary.main\n  },\n  '& .rdrDayToday .rdrDayNumber span:after': {\n    background: theme.palette.secondary.main,\n    width: \"0.25rem\",\n    height: \"0.25rem\",\n    borderRadius: \"50%\"\n  }\n}));\n\nexport const returnFormattedDates = ({ startDateObject, endDateObject }) => {\n  return {\n    startDate: format(startDateObject, 'yyyy-MM-dd'),\n    endDate: format(endDateObject, 'yyyy-MM-dd')\n  }\n}","import { ToggleButton, ToggleButtonGroup, Typography, Stack } from '@mui/material';\n\nimport AggregationType from './AggregationType';\n\nexport default function AggregationTypeToggle({ aggregationType, setAggregationType }) {\n  const handleChange = (event, newType) => {\n    if (newType !== null) {\n      setAggregationType(newType);\n    }\n  };\n\n  return (\n    <Stack\n      direction=\"row\"\n      alignItems=\"center\"\n      spacing={1}\n    >\n      <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\n        DATA AVERAGE\n      </Typography>\n\n      <ToggleButtonGroup\n        color=\"primary\"\n        value={aggregationType}\n        exclusive\n        onChange={handleChange}\n        aria-label=\"aggregation type toggle for graph average\"\n        size=\"small\"\n      >\n        <ToggleButton\n          size=\"small\"\n          sx={{ textTransform: \"capitalize !important\", px: 1.25, py: 0.5 }}\n          value={AggregationType.hourly}\n          aria-label={AggregationType.hourly}\n        >\n          {AggregationType.hourly}\n        </ToggleButton>\n        <ToggleButton\n          size=\"small\"\n          sx={{ textTransform: \"capitalize !important\", px: 1.25, py: 0.5 }}\n          value={AggregationType.daily}\n          aria-label={AggregationType.daily}\n        >\n          {AggregationType.daily}\n        </ToggleButton>\n      </ToggleButtonGroup>\n    </Stack >\n  );\n}","import { createContext, useMemo, useState, useContext } from 'react';\nimport AggregationType from '../Components/DateRangePicker/AggregationType';\n\nconst DateRangePickerContext = createContext();\n\nconst initDateRange = { startDate: null, endDate: null, key: 'selection' };\n\nexport function DateRangePickerProvider({ children }) {\n    const [dateRange, setDateRange] = useState(initDateRange);\n    const [aggregationType, setAggregationType] = useState(AggregationType.hourly);\n\n    const contextValue = useMemo(() => ({\n        dateRange, setDateRange,\n        aggregationType, setAggregationType\n    }), [dateRange, aggregationType]);\n\n    return (\n        <DateRangePickerContext.Provider value={contextValue}>\n            {children}\n        </DateRangePickerContext.Provider>\n    );\n}\n\n// Custom hook \nexport const useDateRangePicker = () => useContext(DateRangePickerContext);","/* eslint-disable */\n\nimport { useState, useRef, useEffect, useContext } from 'react';\n\nimport { DateRangePicker, createStaticRanges } from 'react-date-range';\nimport 'react-date-range/dist/styles.css'; // main style file\nimport 'react-date-range/dist/theme/default.css'; // theme css file\n\nimport { CircularProgress, useMediaQuery, useTheme } from '@mui/material';\nimport { Alert, Button, Stack } from '@mui/material';\n\nimport { StyledDateRangePicker, returnCustomStaticRanges, returnFormattedDates } from './DateRangePickerUtils';\nimport { getHistoricalChartApiUrl } from '../../API/ApiUrls';\nimport { ChartAPIendpoints, ChartAPIendpointsOrder } from \"../../API/Utils\";\nimport AggregationTypeToggle from './AggregationTypeToggle';\nimport AggregationType from './AggregationType';\nimport { DashboardContext } from '../../ContextProviders/DashboardContext';\n\nimport { differenceInDays, isSameDay } from 'date-fns';\nimport { fetchDataFromURL } from '../../API/ApiFetch';\nimport { useDateRangePicker } from '../../ContextProviders/DateRangePickerContext';\n\nconst InvalidRangeMessages = {\n  tooLong: \"HOURLY data is limited to max 30d\",\n  sameDay: \"Start and end dates must be different\"\n}\n\nconst historicalChartIndex = ChartAPIendpointsOrder.findIndex(endpoint => endpoint === ChartAPIendpoints.historical);\n\nconst CustomDateRangePicker = (props) => {\n  const { minDateOfDataset, dataType } = props;\n  const { currentSchoolID, setIndividualChartData } = useContext(DashboardContext);\n  const [invalidRangeMessage, setInvalidRangeMessage] = useState();\n  const [shouldDisableApplyButton, setShouldDisableApplyButton] = useState(true);\n\n  const today = new Date();\n  const theme = useTheme();\n  const smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n  // Keep track of the date range and aggregationType  selected by the user\n  const { dateRange, setDateRange, aggregationType, setAggregationType } = useDateRangePicker();\n  useEffect(() => {\n    // Initialize with the range of the first static range\n    setDateRange({\n      ...returnCustomStaticRanges({ today, minDateOfDataset })[0].range(), key: 'selection'\n    });\n    setAggregationType(AggregationType.hourly);\n  }, []);\n\n  const [chartUrl, setChartUrl] = useState();\n\n  // Control displaying / hiding of the date range picker\n  const [showPickerPanel, setShowPickerPanel] = useState(false);\n  const paperRef = useRef(null);\n\n  const [isFetchingData, setIsFetchingData] = useState(false);\n\n  // Hide or show the date-range-picker panel\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (paperRef.current && !paperRef.current.contains(event.target)) {\n        setShowPickerPanel(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [paperRef]);\n\n  const checkValidRange = (selectedRange) => {\n    const { startDate, endDate } = selectedRange || {};\n    if (!startDate || !endDate) return;\n\n    // Start date and end date can't be the same date\n    if (isSameDay(startDate, endDate)) {\n      setInvalidRangeMessage(InvalidRangeMessages.sameDay);\n      setShouldDisableApplyButton(true);\n      return;\n    }\n    else {\n      setInvalidRangeMessage(null);\n      setShouldDisableApplyButton(false);\n    }\n\n    // Restrict the selection to only 30 days if aggregationType is hourly\n    if (aggregationType === AggregationType.hourly) {\n      const diff = differenceInDays(endDate, startDate);\n      const invalidRange = diff > 30;\n\n      setInvalidRangeMessage(invalidRange ? InvalidRangeMessages.tooLong : null);\n      setShouldDisableApplyButton(invalidRange);\n    }\n    // No restriction for daily aggregationType\n    else {\n      if (invalidRangeMessage !== null) {\n        setInvalidRangeMessage(null);\n      }\n\n      if (shouldDisableApplyButton === true) {\n        setShouldDisableApplyButton(false);\n      }\n    }\n  }\n\n  // Method to handle date range selection changes\n  const handleSelect = (ranges) => {\n    if (!ranges) return;\n\n    checkValidRange(ranges.selection);\n    setDateRange(ranges.selection);\n  };\n\n  useEffect(() => {\n    checkValidRange(dateRange);\n  }, [aggregationType]);\n\n  // Send query request to backend when APPLY button is clicked\n  // Check if a new date range is selected as well\n  const handleApplyButtonClick = (event) => {\n    if (invalidRangeMessage !== null) return;\n\n    event.stopPropagation(); // Prevents Paper onClick from firing\n\n    const formattedDates = returnFormattedDates({\n      startDateObject: dateRange.startDate,\n      endDateObject: dateRange.endDate\n    });\n    const newUrl = getHistoricalChartApiUrl({\n      endpoint: ChartAPIendpoints.historical,\n      school_id: currentSchoolID,\n      aggregationType: aggregationType,\n      dataType: dataType,\n      startDate: formattedDates.startDate,\n      endDate: formattedDates.endDate\n    });\n\n    if (newUrl !== chartUrl) {\n      setIsFetchingData(true);\n\n      fetchDataFromURL({\n        url: newUrl\n      })\n        .then((data) => {\n          setIndividualChartData(historicalChartIndex, data);\n          setChartUrl(newUrl);\n          setIsFetchingData(false);\n          setShowPickerPanel(false);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  };\n\n  const renderApplyButtonLabel = () => {\n    return (\n      isFetchingData ? <CircularProgress disableShrink size=\"1.4375rem\" color=\"inherit\" /> : \"APPLY\"\n    )\n  };\n\n  return (\n    <StyledDateRangePicker\n      showPickerPanel={showPickerPanel}\n      smallScreen={smallScreen}\n      ref={paperRef}\n      elevation={8}\n      onClick={() => setShowPickerPanel(true)}\n    >\n      <Stack direction={\"column\"} spacing={1}>\n        <DateRangePicker\n          ranges={[dateRange]}\n          onChange={handleSelect}\n          staticRanges={\n            createStaticRanges(\n              returnCustomStaticRanges({\n                today, minDateOfDataset, aggregationType\n              })\n            )\n          }\n          inputRanges={[]}\n          rangeColors={[theme.palette.primary.main, theme.palette.secondary.main, theme.palette.text.secondary]}\n          minDate={minDateOfDataset}\n          maxDate={today}\n          months={1}\n          showMonthAndYearPickers={false}\n          direction={\"horizontal\"}\n          fixedHeight={true}\n          preventSnapRefocus={true}\n          calendarFocus=\"backwards\"\n          startDatePlaceholder=\"Start Date\"\n          endDatePlaceholder=\"End Date\"\n          editableDateInputs={true}\n          showMonthArrow={true}\n        />\n\n        {showPickerPanel && (\n          <Stack\n            direction=\"column\"\n            alignItems=\"end\"\n            width=\"100%\"\n            spacing={1}\n          >\n            <AggregationTypeToggle\n              aggregationType={aggregationType}\n              setAggregationType={setAggregationType}\n              smallScreen={smallScreen}\n            />\n            <Stack direction=\"row\" spacing={1}>\n              {\n                invalidRangeMessage && displayErrorMessage(invalidRangeMessage)\n              }\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                disabled={shouldDisableApplyButton}\n                onClick={handleApplyButtonClick}\n                sx={{\n                  transform: \"translateY(-1px)\"\n                }}\n              >\n                {renderApplyButtonLabel()}\n              </Button>\n            </Stack>\n\n          </Stack>\n\n        )}\n      </Stack>\n    </StyledDateRangePicker>\n  );\n};\n\nconst displayErrorMessage = (invalidRangeMessage) => {\n  return (\n    <Alert\n      severity=\"error\"\n      sx={{\n        py: 0.5,\n        px: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        \"& div\": {\n          fontSize: \"0.75rem\",\n          p: 0\n        },\n        \"& .MuiAlert-icon\": {\n          fontSize: \"1rem\",\n          mr: 0.5\n        }\n      }}\n    >\n      {invalidRangeMessage}\n    </Alert>\n  )\n}\n\nexport default CustomDateRangePicker;\n","import { createContext, useMemo, useState, useContext } from 'react';\n\nconst AxesPickerContext = createContext();\n\nexport function AxesPickerProvider({ children }) {\n    const [hAxis, setHAxis] = useState();\n    const [vAxis, setVAxis] = useState();\n\n    const contextValue = useMemo(() => ({\n        hAxis, setHAxis,\n        vAxis, setVAxis\n    }), [hAxis, vAxis]);\n\n    return (\n        <AxesPickerContext.Provider value={contextValue}>\n            {children}\n        </AxesPickerContext.Provider>\n    );\n}\n\n// Custom hook \nexport const useAxesPicker = () => useContext(AxesPickerContext);","import React, { useContext, useEffect, useState } from 'react';\nimport { Select, MenuItem, FormControl, InputLabel, Button, Stack, Grid, CircularProgress } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { useAxesPicker } from '../../ContextProviders/AxesPickerContext';\nimport { getCorrelationChartApiUrl } from '../../API/ApiUrls';\nimport { ChartAPIendpoints, ChartAPIendpointsOrder } from \"../../API/Utils\";\nimport { DashboardContext } from '../../ContextProviders/DashboardContext';\nimport { fetchDataFromURL } from '../../API/ApiFetch';\n\nconst correlationChartIndex = ChartAPIendpointsOrder.findIndex(endpoint => endpoint === ChartAPIendpoints.correlationDailyAverage);\n\n// Define custom styled components for shared border radius\nconst LeftSelect = styled(FormControl)(({ theme }) => ({\n  borderTopRightRadius: 0,\n  borderBottomRightRadius: 0,\n  textTransform: 'capitalize',\n  minWidth: '150px',\n  maxWidth: '250px',\n  '& .MuiOutlinedInput-root': {\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n  },\n  '& .MuiOutlinedInput-notchedOutline': {\n    borderRight: 'none'\n  },\n  '& .Mui-focused .MuiOutlinedInput-notchedOutline': {\n    borderRight: `2px solid ${theme.palette.primary.main}`\n  }\n}));\n\nconst RightSelect = styled(FormControl)(({ theme }) => ({\n  borderTopLeftRadius: 0,\n  borderBottomLeftRadius: 0,\n  textTransform: 'capitalize',\n  minWidth: '150px',\n  maxWidth: '250px',\n  '& .MuiOutlinedInput-root': {\n    borderTopLeftRadius: 0,\n    borderBottomLeftRadius: 0,\n  },\n}));\n\n\nconst AxesPicker = (props) => {\n  const { currentSchoolID, setIndividualChartData } = useContext(DashboardContext);\n  const { allowedAxes, selectedAxes, dataType } = props;\n  const { hAxis, vAxis, setHAxis, setVAxis } = useAxesPicker();\n  const [chartUrl, setChartUrl] = useState();\n  const [isFetchingData, setIsFetchingData] = useState(false);\n  const [shouldDisableApplyButton, setShouldDisableApplyButton] = useState(true);\n\n  useEffect(() => {\n    const { hAxis: receivedHAxis, vAxis: receivedVAxis } = selectedAxes;\n    if (!(receivedHAxis && receivedVAxis)) {\n      setShouldDisableApplyButton(true);\n      return;\n    };\n\n    if (!(hAxis === receivedHAxis && vAxis === receivedVAxis)) {\n      setVAxis(receivedVAxis);\n      setHAxis(receivedHAxis);\n    }\n  }, [selectedAxes]);\n\n  const handleHAxisChange = (event) => {\n    const newHAxis = event.target.value;\n    setHAxis(newHAxis);\n    if (newHAxis === vAxis) {\n      setVAxis('');\n    }\n  };\n\n  const handleVAxisChange = (event) => {\n    setVAxis(event.target.value);\n    if (event.target.value === hAxis) {\n      setHAxis('');\n    }\n  };\n\n  useEffect(() => {\n    const { hAxis: receivedHAxis, vAxis: receivedVAxis } = selectedAxes;\n    if (!(receivedHAxis && receivedVAxis)) {\n      return;\n    };\n\n    setShouldDisableApplyButton(hAxis === receivedHAxis && vAxis === receivedVAxis);\n\n  }, [hAxis, vAxis, selectedAxes]);\n\n  const applyChanges = () => {\n    if (!(vAxis && hAxis)) return;\n\n    const newUrl = getCorrelationChartApiUrl({\n      endpoint: ChartAPIendpoints.correlationDailyAverage,\n      school_id: currentSchoolID,\n      dataType: dataType,\n      sensorX: hAxis,\n      sensorY: vAxis\n    });\n\n    if (newUrl !== chartUrl) {\n      setIsFetchingData(true);\n\n      fetchDataFromURL({\n        url: newUrl\n      })\n        .then((data) => {\n          setIndividualChartData(correlationChartIndex, data);\n          setChartUrl(newUrl);\n          setIsFetchingData(false);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  }\n\n  const renderApplyButtonLabel = () => {\n    return (\n      isFetchingData ? <CircularProgress disableShrink size=\"1.4375rem\" color=\"inherit\" /> : \"APPLY\"\n    )\n  };\n\n  // Disable option if the current dataType isn't in its allowedDataTypes array\n  const shouldDisableOption = (option) => {\n    return !option.allowedDataTypes.includes(dataType);\n  }\n\n  return (\n    <Grid container spacing={1} alignItems=\"center\">\n      <Grid item xs={12} sm=\"auto\">\n        <Stack direction=\"row\" spacing={0}>\n          <LeftSelect fullWidth size=\"small\">\n            <InputLabel id=\"x-axis-select-label\">X Axis</InputLabel>\n            <Select\n              labelId=\"x-axis-select-label\"\n              value={hAxis || selectedAxes?.hAxis || null}\n              label=\"X Axis\"\n              onChange={handleHAxisChange}\n              autoWidth\n            >\n              {allowedAxes?.map(option => (\n                <MenuItem\n                  key={option.sensor}\n                  value={option.sensor}\n                  disabled={option.sensor === vAxis || shouldDisableOption(option)}\n                  sx={{ textTransform: 'capitalize' }}\n                >\n                  {option.sensor}{shouldDisableOption(option) && \" (No Data)\"}\n                </MenuItem>\n              ))}\n            </Select>\n          </LeftSelect>\n          <RightSelect fullWidth size=\"small\">\n            <InputLabel id=\"y-axis-select-label\">Y Axis</InputLabel>\n            <Select\n              labelId=\"y-axis-select-label\"\n              value={vAxis || selectedAxes?.vAxis || null}\n              label=\"Y Axis\"\n              onChange={handleVAxisChange}\n              autoWidth\n            >\n              {allowedAxes?.map(option => (\n                <MenuItem\n                  key={option.sensor}\n                  value={option.sensor}\n                  disabled={option.sensor === hAxis || shouldDisableOption(option)}\n                  sx={{ textTransform: 'capitalize' }}\n                >\n                  {option.sensor}{shouldDisableOption(option) && \" (No Data)\"}\n                </MenuItem>\n              ))}\n            </Select>\n          </RightSelect>\n        </Stack>\n      </Grid>\n      <Grid item xs={12} sm=\"auto\">\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          fullWidth\n          sx={{ height: \"100%\" }}\n          onClick={applyChanges}\n          disabled={shouldDisableApplyButton}\n        >\n          {renderApplyButtonLabel()}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default AxesPicker;\n","/* eslint-disable */\n\nimport { useContext, useEffect, useMemo, useState, useCallback } from 'react';\n\nimport { GoogleContext } from '../../ContextProviders/GoogleContext';\n\nimport { Alert, Box, Grid, Stack } from '@mui/material/';\n\nimport { useTheme } from '@mui/material/styles';\nimport SeriesSelector from './SubchartUtils/SeriesSelector';\nimport { generateRandomID, returnGenericOptions, returnChartControlUI, ChartControlType, addTouchEventListenerForChartControl } from '../GoogleChartHelper';\n\nimport GoogleChartStyleWrapper from './SubchartUtils/GoogleChartStyleWrapper';\n\nimport LoadingAnimation from '../../Components/LoadingAnimation';\n\nimport NivoCalendarChart from './NivoCharts/NivoCalendarChart/NivoCalendarChart';\nimport { generateSvgFillGradient, BackgroundGradient } from '../../Utils/Gradient/GradientUtils';\n\nimport CustomDateRangePicker from '../../Components/DateRangePicker/CustomDateRangePicker'\nimport { isValidArray } from '../../Utils/UtilFunctions';\nimport { returnSelectedDataType } from '../../Utils/AirQuality/DataTypes';\n\nimport AxesPicker from '../../Components/AxesPicker/AxesPicker';\n\nconst NoChartToRender = ({ dataType, height, selectableAxes }) => {\n  let messagePrefix = \"This sensor \";\n  let messageSuffix = \" data. Please choose a different sensor.\";\n\n  if (selectableAxes) {\n    messagePrefix = \"This pair of sensors \";\n    messageSuffix = \" correlation data. Please choose another pair or a different data type.\"\n  }\n\n  return (\n    <Box height={height}>\n      <Alert severity=\"error\" sx={{ my: 2 }}>\n        {messagePrefix}\n        does not have&nbsp;\n        <Box component=\"span\" textTransform=\"capitalize\">\n          {dataType}\n        </Box>\n        {messageSuffix}\n      </Alert>\n    </Box>\n  )\n}\n\nexport default function SubChart(props) {\n  // Props\n  const { chartData, subchartIndex, windowSize, isPortrait, height, maxHeight, selectedDataType, allowedDataTypes } = props;\n\n  // Use GoogleContext for loading and manipulating the Google Charts\n  const google = useContext(GoogleContext);\n\n  // States of the Google Charts\n  const [dataTable, setDataTable] = useState();\n  const [chartWrapper, setChartWrapper] = useState();\n  const [controlWrapper, setControlWrapper] = useState();\n\n  const [previousChartData, setPreviousChartData] = useState();\n\n  // Get the current theme\n  const theme = useTheme();\n\n  // To determine the first time the chart renders to show/hide the LoadingAnimation\n  const [isFirstRender, setIsFirstRender] = useState(true);\n\n  // To determine if the charts should be rendered or not\n  const [shouldRenderChart, setShouldRenderChart] = useState(true);\n  const [renderChartNow, setRenderChartNow] = useState(false);\n\n  // Keep track of the columns (series) of the chart\n  const [allInitialColumns, setAllInitialColumns] = useState();\n  const [dataColumns, setDataColumns] = useState();\n  const [initialVAxisRange, setInitialVAxisRage] = useState();\n\n  // Define the DOM container's ID for drawing the google chart inside\n  const [chartID, __] = useState(generateRandomID());\n\n  // Get the options object for chart\n  const options = useMemo(() => {\n    return returnGenericOptions({ ...props, theme });\n  }, [props, theme, chartData.chartType]);\n\n  // State to store transformed data for CalendarChart\n  const [calendarDataArray, setCalendarDataArray] = useState(null);\n\n  // Early exit for 'Calendar' chartType\n  if (chartData.chartType === 'Calendar') {\n    useEffect(() => {\n      const dataArray = chartData.dataArray\n        || (chartData.subcharts\n          && chartData.subcharts[subchartIndex].dataArray)\n        || null\n        || null;\n\n      if (!isValidArray(dataArray)) {\n        setShouldRenderChart(false);\n        return; // early return if there is no data to render\n      }\n\n      setCalendarDataArray(dataArray)\n      setShouldRenderChart(true);\n    }, [chartData]);\n\n    if (!calendarDataArray) {\n      return (\n        <Box sx={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\n          <LoadingAnimation />\n        </Box>\n      )\n    }\n\n    return (\n      shouldRenderChart ? (\n        <NivoCalendarChart\n          dataArray={calendarDataArray}\n          valueRangeBoxTitle={returnSelectedDataType({ dataTypeKey: selectedDataType, dataTypes: allowedDataTypes, showUnit: true })}\n          isPortrait={isPortrait}\n          options={options}\n          windowSize={windowSize}\n        />\n      ) : <NoChartToRender dataType={returnSelectedDataType({ dataTypeKey: selectedDataType, dataTypes: allowedDataTypes })} />\n    );\n  }\n\n  // Properties for chart control (if existed)\n  let hasChartControl = false;\n  let chartControlOptions;\n  // Only show the chart control if:\n  // It exists in the database (either for all subcharts or just for a particular subchart)\n  // And if the chart is currently not shown on homePage\n  let chartControl = chartData.control || chartData.subcharts?.[subchartIndex].control;\n  if (chartControl) {\n    hasChartControl = true;\n\n    // Get the options for chartControl if hasChartControl\n    chartControlOptions = {\n      ...chartControl.options,\n      ui: returnChartControlUI({\n        chartControl,\n        mainChartData: chartData,\n        mainChartOptions: options,\n        subchartIndex,\n        theme,\n        isPortrait\n      })\n    };\n\n    // Swap touch events for mouse events on ChartRangeControl\n    // as it doesn't support touch events on mobile\n    if (chartControl.controlType === 'ChartRangeFilter') {\n      useEffect(() => {\n        const cleanupTouchEventListener = addTouchEventListenerForChartControl({ controlWrapper, chartID });\n        return cleanupTouchEventListener;\n      }, [controlWrapper]);\n    }\n  }\n\n  // Properties for selecting (showing or hiding) the serie(s)\n  const seriesSelector = options.seriesSelector || false;\n\n  // Properties for date-range-picker\n  const dateRangePicker = options.dateRangePicker || null;\n\n  // Properties for data formatters\n  const formatters = options.formatters || null;\n\n  // Properties for selectableAxes\n  let selectableAxes = chartData.selectableAxes || null;\n  if (selectableAxes) {\n    if (isValidArray(selectableAxes.allowedAxes)) {\n      if (selectableAxes.allowedAxes.length <= 2) selectableAxes = null; // don't display selectableAxes if number of allowedSensors is less than 3\n    }\n  }\n\n  // Set new options prop and re-render the chart if theme or isPortrait changes\n  useEffect(() => {\n    if (seriesSelector) handleSeriesSelection({ newDataColumns: dataColumns }); // this function set new options, too\n    else {\n      chartWrapper?.setOptions({\n        ...options\n      });\n\n      chartWrapper?.draw();\n      if (hasChartControl) {\n        controlWrapper?.setOptions(chartControlOptions);\n        controlWrapper?.draw();\n      }\n    }\n  }, [theme, isPortrait, windowSize]);\n\n  // Set new initialColumnsColors if the theme changes\n  // This only applies to when seriesSelector.method == \"setViewColumn\"\n  useEffect(() => {\n    if (!dataColumns) return;\n    if (seriesSelector && seriesSelector.method == \"setViewColumn\") {\n      setInitialColumnsColors({ dataColumns: dataColumns });\n      handleSeriesSelection({ newDataColumns: dataColumns });\n    }\n  }, [theme]);\n\n  const getInitialColumns = ({ chartWrapper, dataTable, seriesSelector }) => {\n    // Update the initial DataView's columns (often, all of the series are displayed initially)\n    var initialView = chartWrapper.getView();\n    // If (optional) columns is not specified in database\n    // Assign it from DataTable\n    if (initialView.columns == null) {\n      const viewFromDataTable = new google.visualization.DataView(dataTable);\n      chartWrapper.setView({\n        columns: viewFromDataTable.columns\n      });\n      initialView = chartWrapper.getView();\n    }\n\n    let shouldAssignDomainRoleToFistColumn = true; // variable to only assign type: 'domain' to the very first column\n    let dataSeriesIndex = 0;\n    const allInitialColumns = initialView.columns.map((col, index) => {\n      // A column can either be a number (that denotes the index of the sourceColumn) or an object\n      // The code below harmonize all columns to be an object to store crucial data to toggle their visibility\n      if (typeof col === 'number') col = {\n        role: shouldAssignDomainRoleToFistColumn ? 'domain' : 'data',\n        sourceColumn: col\n      }\n      col.label = dataTable.getColumnLabel(col.sourceColumn);\n      col.indexInAllInitialColumns = index;\n\n      shouldAssignDomainRoleToFistColumn = shouldAssignDomainRoleToFistColumn && false;\n\n      // Set the visibility of data column, \n      if (col.role === 'data') {\n        // If defaultSeriesToDisplayInitially is presented\n        // then, only show these series\n        if (seriesSelector.defaultSeriesToDisplayInitially) {\n          if (seriesSelector.defaultSeriesToDisplayInitially.includes(index)) {\n            col.selected = true;\n          }\n          else {\n            col.selected = false;\n          }\n        }\n        // If no defaultSeriesToDisplayInitially is presented\n        else {\n          // then, all data columns are selected if multiple series are selectable\n          if (seriesSelector.allowMultiple) {\n            col.selected = true;\n          } else {\n            // else for single serie selector, only first data column is selected\n            if (dataSeriesIndex === 0) {\n              col.selected = true;\n            } else {\n              col.selected = false;\n            }\n          }\n        }\n\n        col.seriesIndex = dataSeriesIndex;\n        dataSeriesIndex++;\n      }\n      return col;\n    });\n    setAllInitialColumns(allInitialColumns);\n    const initialVAxisRange = getInitialVAxisRange({ dataTable: dataTable, allInitialColumns: allInitialColumns });\n    setInitialVAxisRage(initialVAxisRange);\n    // To track selection, only get the columns that are:\n    // role === 'data'\n    // visibleInLegend !== false\n    const dataColumns = allInitialColumns.filter((col) => {\n      return col.role === 'data' && options.series?.[col.seriesIndex]?.visibleInLegend !== false;\n    });\n\n    if (seriesSelector.method === \"setViewColumn\") setInitialColumnsColors({ dataColumns: dataColumns });\n\n    setDataColumns(dataColumns);\n    return { initAllInitialColumns: allInitialColumns, initDataColumns: dataColumns };\n  };\n\n  const setInitialColumnsColors = ({ dataColumns }) => {\n    dataColumns.forEach((col) => {\n      // Assign inherit color to this data column\n      col.color = options.colors[col.seriesIndex % options.colors.length];\n      // Assign other inherit attributes from its serie object (if existed)\n      col.serieAttribute = options.series?.[col.seriesIndex];\n    });\n  }\n\n  const getInitialVAxisRange = ({ dataTable, allInitialColumns }) => {\n    let vAxisMin, vAxisMax;\n    allInitialColumns.forEach((col, index) => {\n      if (index === 0) return; // the first column is the domain (hAxis)\n      const range = dataTable.getColumnRange(col.sourceColumn);\n      if (!isNaN(range.min) && range.min) vAxisMin = vAxisMin ? Math.min(vAxisMin, range.min) : range.min;\n      if (!isNaN(range.max) && range.max) vAxisMax = vAxisMax ? Math.max(vAxisMax, range.max) : range.max;\n    });\n    return { min: vAxisMin, max: vAxisMax };\n  }\n\n  const handleSeriesSelection = useCallback(({\n    newDataColumns,\n    _allInitialColumns = allInitialColumns,\n    _chartWrapper = chartWrapper,\n    _controlWrapper = controlWrapper\n  }) => {\n    if (!_allInitialColumns) return;\n\n    setDataColumns(newDataColumns);\n\n    if (seriesSelector.method === \"toggleVisibility\" || seriesSelector.method === null) {\n      const hiddenSeriesObject = {};\n      newDataColumns.forEach((col) => {\n        if (!col.selected)\n          hiddenSeriesObject[col.seriesIndex] = {\n            color: 'transparent',\n            enableInteractivity: false,\n            visibleInLegend: false\n          }; // 'hide' the serie by making it transparent\n      });\n\n      _chartWrapper?.setOptions({\n        ...options,\n        series: {\n          ...options.series,\n          ...hiddenSeriesObject\n        }\n      });\n\n      if (hasChartControl) {\n        const currentControlOptions = _controlWrapper?.getOptions();\n        _controlWrapper?.setOptions({\n          ...currentControlOptions,\n          ui: {\n            ...currentControlOptions.ui,\n            chartOptions: {\n              ...currentControlOptions.ui.chartOptions,\n              series: {\n                ...options.series,\n                ...hiddenSeriesObject\n              }\n            }\n          }\n        });\n      }\n    }\n    else if (seriesSelector.method === \"setViewColumn\") {\n      let newViewColumns = [];\n      newViewColumns.push(0); // this is the domain column\n      newDataColumns.forEach((dataColumn) => {\n        if (dataColumn.selected) {\n          newViewColumns.push(dataColumn);\n          // Find this dataColumn's supporting columns (whose role !== 'data')\n          // A dataColumn has its supporting columns (can be many) follow it immediately\n          for (let i = dataColumn.indexIn_ + 1; i < _allInitialColumns.length; i++) {\n            if (_allInitialColumns[i].role !== 'data') {\n              newViewColumns.push(_allInitialColumns[i]);\n            }\n            // If this loop encounter the next dataColumn, break the loop, all supporting columns for this dataColumn have been discovered\n            else {\n              break;\n            }\n          }\n        }\n      });\n      _chartWrapper?.setView({ columns: newViewColumns });\n\n      const newOptions = { ...options };\n      // Preserve the initial vAxis range so that the vAxis doesn't shift based on the visible serie(s)\n      // newOptions.vAxis.viewWindow = {\n      //   min: (options.vAxis.viewWindow.min == null) ? initialVAxisRange.min : options.vAxis.viewWindow.min,\n      //   max: (options.vAxis.viewWindow.max == null) ? initialVAxisRange.max : options.vAxis.viewWindow.max,\n      // }\n      // Set the new color array\n      newOptions.colors = newDataColumns.filter((col) => col.selected).map((col) => col.color);\n      // Set the new series object (if any)\n      // this contains other series' attributes (lineWidth, seriesType...)\n      const series = {};\n      let selectedSeriesCount = 0;\n      newDataColumns.forEach((col) => {\n        if (!col.selected) return;\n        if (col.serieAttribute != null) {\n          series[selectedSeriesCount] = col.serieAttribute;\n        }\n        selectedSeriesCount++;\n      })\n      newOptions.series = series;\n      _chartWrapper?.setOptions(newOptions);\n\n      if (hasChartControl) {\n        const currentControlOptions = _controlWrapper?.getOptions();\n        _controlWrapper?.setOptions({\n          ...currentControlOptions,\n          ui: {\n            ...currentControlOptions.ui,\n            chartOptions: {\n              ...currentControlOptions.ui.chartOptions,\n              colors: newOptions.colors,\n              series: newOptions.series\n            },\n            chartView: {\n              columns: newViewColumns\n            }\n          }\n        });\n      }\n    }\n\n    // Call draw to apply the new DataView and 'refresh' the chart\n    _chartWrapper?.draw();\n\n    if (hasChartControl) {\n      _controlWrapper?.draw();\n    }\n  }, [allInitialColumns, options, seriesSelector, chartWrapper, controlWrapper, initialVAxisRange, hasChartControl]);\n\n  const reconstructFunctionFromJSONstring = (columns) => {\n    if (!columns) return;\n\n    const evaluatedColumns = [];\n    for (const column of columns) {\n      if (typeof column === 'number') {\n        // If it's a number, add it as-is\n        evaluatedColumns.push(column);\n      } else if (typeof column === 'object') {\n        if (column.calc && column.calc !== 'stringify') {\n          // If it's an object with a 'calc' property, evaluate the 'calc' function\n          // using new Function() and add the result to the evaluatedColumns array\n          const calcFunction = new Function(\"dataTable\", \"rowNum\", column.calc);\n          evaluatedColumns.push({\n            ...column,\n            calc: calcFunction,\n          });\n        } else {\n          // If it's an object without a 'calc' property, or with calc = 'stringify', add it as-is\n          evaluatedColumns.push(column);\n        }\n      }\n    }\n    return evaluatedColumns;\n  }\n\n  // Prepare to draw the chart if there is any change in chartData\n  // but only set flag renderChartNow if the chart should draw in the next rendering cycle\n  // to prevent chartID container not being mounted on time\n  useEffect(() => {\n    if (google && chartData) {\n      // Do not draw again if deep comparison between current chartData and previousChartData is true\n      if (JSON.stringify(chartData) === JSON.stringify(previousChartData)) return;\n      setPreviousChartData(chartData);\n\n      // Get and set the dataArray \n      const dataArray = chartData.dataArray\n        || (chartData.subcharts\n          && chartData.subcharts[subchartIndex].dataArray)\n        || null\n        || null;\n\n      const _shouldRenderChart = isValidArray(dataArray);\n      setShouldRenderChart(_shouldRenderChart);\n      if (_shouldRenderChart === true) {\n        setRenderChartNow(true);\n        const dataTable = google.visualization.arrayToDataTable(dataArray);\n\n        // Call functions for formatting the number if numberFormat is specified \n        if (formatters && typeof formatters === 'object') {\n          if (formatters.hasOwnProperty(\"numberFormatter\")) {\n            const numberFormat = new google.visualization.NumberFormat(formatters.numberFormatter.numberFormat);\n            formatters.numberFormatter.columns.forEach(col => numberFormat.format(dataTable, col));\n          }\n        }\n\n        setDataTable(dataTable);\n      }\n    }\n  }, [google, chartData]);\n\n  // Actually draw the chart now because chartID container is already mounted from shouldRenderChart flag\n  useEffect(() => {\n    if (renderChartNow === true) {\n      // Get dataColumn views\n      const columns = chartData.columns\n        || (chartData.subcharts\n          && chartData.subcharts[subchartIndex].columns)\n        || null\n        || null;\n      const reconstructedColumns = reconstructFunctionFromJSONstring(columns);\n\n      // Create chartWrapper\n      const thisChartWrapper = new google.visualization.ChartWrapper({\n        chartType: chartData.chartType,\n        dataTable: (!hasChartControl) ? dataTable : undefined,\n        options: options,\n        view: {\n          columns: reconstructedColumns\n        },\n        containerId: chartID\n      });\n      setChartWrapper(thisChartWrapper);\n\n      let thisControlWrapper;\n      if (hasChartControl) {\n        const thisDashboardWrapper = new google.visualization.Dashboard(\n          document.getElementById(`dashboard-${chartID}`));\n\n        google.visualization.events.addListener(thisDashboardWrapper, 'ready', onChartReady);\n\n        thisControlWrapper = new google.visualization.ControlWrapper({\n          controlType: chartControl.controlType,\n          options: chartControlOptions,\n          containerId: `control-${chartID}`\n        });\n        setControlWrapper(thisControlWrapper);\n\n        // Establish dependencies\n        thisDashboardWrapper.bind(thisControlWrapper, thisChartWrapper);\n\n        thisDashboardWrapper.draw(dataTable);\n      }\n      else {\n        google.visualization.events.addListener(thisChartWrapper, 'ready', onChartReady);\n        thisChartWrapper.draw();\n      }\n\n      // Run the seriesSelector for the first time\n      if (seriesSelector) {\n        const { initAllInitialColumns, initDataColumns } = getInitialColumns({ chartWrapper: thisChartWrapper, dataTable: dataTable, seriesSelector: seriesSelector });\n        handleSeriesSelection({\n          _allInitialColumns: initAllInitialColumns,\n          newDataColumns: initDataColumns,\n          _chartWrapper: thisChartWrapper,\n          _controlWrapper: thisControlWrapper\n        });\n      }\n\n      setRenderChartNow(false);\n    }\n  }, [renderChartNow])\n\n  const renderChart = () => {\n    const chartContainer = (\n      <Box\n        id={chartID}\n        sx={{ height: height, maxHeight: maxHeight }}\n      />\n    );\n\n    if (hasChartControl) {\n      return (\n        <Stack\n          id={`dashboard-${chartID}`}\n          direction={ChartControlType[chartControl.controlType]?.stackDirection || 'column-reverse'}\n          sx={{ height: '100%' }}\n        >\n          <Box\n            id={`control-${chartID}`}\n            sx={{\n              height: `calc(${height} / 8)`,\n              opacity: 0.8,\n              filter: 'saturate(0.3)'\n            }}\n          />\n          {chartContainer}\n        </Stack>\n      );\n    } else {\n      return chartContainer;\n    }\n  };\n\n  // Generate the gradient background if it exists in options parameter\n  const gradientBackgroundColor = options.gradientBackgroundColor;\n  let gradientBackgroundId, svgFillGradient;\n  if (gradientBackgroundColor) {\n    gradientBackgroundId = `${chartID}-backgroundGradient`;\n    svgFillGradient = generateSvgFillGradient({\n      colors: theme.palette.chart.colorAxes[gradientBackgroundColor].colors,\n      optionalMinValue: options.vAxis?.viewWindow?.min,\n      optionalMaxValue: options.vAxis?.viewWindow?.max\n    });\n  }\n\n  const onChartReady = () => {\n    if (!isFirstRender) return;\n    // Hide the circleProgress when chart finishes rendering the first time\n    setIsFirstRender(false);\n  };\n\n  const showAuxiliaryControls = () => {\n    if (!isFirstRender) {\n      return (\n        <Grid\n          container\n          mt={1}\n          sx={{\n            gap: 2,\n            [theme.breakpoints.down('sm')]: { gap: 1 }\n          }}\n        >\n          {seriesSelector &&\n            <Grid item\n              sx={{\n                [theme.breakpoints.down('sm')]: { width: '100%' }\n              }}\n            >\n              <SeriesSelector\n                items={dataColumns}\n                allowMultiple={seriesSelector.allowMultiple}\n                seriesLabel={seriesSelector.seriesLabel}\n                selectorID={`${chartData.title}-selector`}\n                onSeriesSelection={handleSeriesSelection}\n                displayChip={false}\n              />\n            </Grid>\n          }\n          {\n            dateRangePicker &&\n            <Grid item\n              sx={{\n                height: \"2rem\",\n                width: { [theme.breakpoints.down('sm')]: { width: '100%' } }\n              }} >\n              <CustomDateRangePicker dataType={selectedDataType} minDateOfDataset={new Date(dateRangePicker.minDate)} />\n            </Grid>\n          }\n          {selectableAxes &&\n            <AxesPicker\n              allowedAxes={selectableAxes.allowedAxes}\n              selectedAxes={selectableAxes.selectedAxes}\n              dataType={selectedDataType}\n            />\n          }\n        </Grid >\n      );\n    } else {\n      return null;\n    }\n  };\n\n  return (\n    shouldRenderChart ?\n      <GoogleChartStyleWrapper\n        isPortrait={isPortrait}\n        gradientBackgroundId={gradientBackgroundId}\n        className={chartData.chartType}\n        position=\"relative\"\n        height=\"100%\"\n        minHeight={chartData.chartType === 'Calendar' && '200px'}\n      >\n        {/* Conditionally display loading animation here */}\n        {isFirstRender && (\n          <Box sx={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\n            <LoadingAnimation />\n          </Box>\n        )}\n        {showAuxiliaryControls()}\n        {renderChart()}\n        {gradientBackgroundColor ? <BackgroundGradient id={gradientBackgroundId} colors={svgFillGradient} /> : null}\n      </GoogleChartStyleWrapper> :\n      (\n        <>\n          {selectableAxes &&\n            <Box mt={1}>\n              <AxesPicker\n                allowedAxes={selectableAxes.allowedAxes}\n                selectedAxes={selectableAxes.selectedAxes}\n                dataType={selectedDataType}\n              />\n            </Box>\n          }\n          <NoChartToRender\n            dataType={returnSelectedDataType({ dataTypeKey: selectedDataType, dataTypes: allowedDataTypes })}\n            selectableAxes={selectableAxes}\n            // If the visualization has a series selector or control, we need to account for its height\n            // And since the height is a string, we need to parse it to a number before adding to it\n            height={seriesSelector || hasChartControl ? (parseFloat(height) * 1.2 + 'vw') : height}\n\n          />\n        </>\n      )\n  );\n}","import { useState, useRef } from 'react';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport ClickAwayListener from '@mui/material/ClickAwayListener';\nimport parse from 'html-react-parser';\nimport { useMediaQuery, useTheme } from '@mui/material';\nimport { replacePlainHTMLWithMuiComponents } from '../Utils/UtilFunctions';\n\nfunction CollapsibleSubtitle({ text, wordLimit = 40, reference }) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const subtitleRef = useRef(null);\n\n  const words = text.split(' ');\n\n  // If not on mobile or words are within limit, just display the full text\n  if (!isMobile || words.length / wordLimit <= 1.4) {\n    return (\n      <Box>\n        <Typography>{parse(text, { replace: replacePlainHTMLWithMuiComponents })}</Typography>\n        {reference && (\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            {parse(reference, { replace: replacePlainHTMLWithMuiComponents })}\n          </Typography>\n        )}\n      </Box>\n    );\n  }\n\n  let displayText = words.slice(0, wordLimit).join(' ');\n  const lastFullStop = displayText.lastIndexOf('.');\n\n  if (lastFullStop !== -1) {\n    displayText = displayText.slice(0, lastFullStop + 1);\n  }\n\n  // Do not collapse if the user clicks on the chart associated with the subtitle\n  const isClickWithinSharedParent = (event) => {\n    let { target } = event;\n    // .MuiContainer-root - Container for both the subtitle and the chart\n    const subtitleParent = subtitleRef.current.closest('.MuiContainer-root');\n    // Elements used to detect if the click is on a chart\n    const chartElements = new Set(['rect', 'path', 'svg', 'circle']);\n\n    while (target != null) {\n      // Check if a chart is clicked\n      if (chartElements.has(target.tagName)) {\n        // If the chart element and the subtitle element share the same container\n        // it means that the click is on the chart associated with the subtitle\n        // As such, we should not collapse the subtitle\n        const targetParent = target.closest('.MuiContainer-root');\n        return targetParent === subtitleParent;\n      }\n      target = target.parentNode; // Move up the DOM tree\n    }\n    return false;\n  };\n\n  // Custom onClickAway handler\n  const handleOnClickAway = (event) => {\n    if (!isClickWithinSharedParent(event)) {\n      setIsExpanded(false);\n    }\n  };\n\n  return (\n    <ClickAwayListener onClickAway={handleOnClickAway}>\n      <Box ref={subtitleRef} onClick={() => setIsExpanded(!isExpanded)} style={{ cursor: 'pointer' }}>\n        {isExpanded ? (\n          <>\n            <Typography>{parse(text, { replace: replacePlainHTMLWithMuiComponents })}</Typography>\n            {reference && <Typography variant=\"caption\" color=\"text.secondary\">{parse(reference, { replace: replacePlainHTMLWithMuiComponents })}</Typography>}\n          </>\n        ) : (\n          <>\n            <Typography display=\"inline\">\n              {parse(displayText, { replace: replacePlainHTMLWithMuiComponents })}\n              ...\n            </Typography>\n            <Typography display=\"inline\" color=\"text.primary\" fontWeight=\"500\" sx={{ ml: 0.5, '& :hover': { textDecoration: 'underline' } }}>\n              See more\n            </Typography>\n          </>\n        )}\n      </Box>\n    </ClickAwayListener>\n  );\n}\n\nexport default CollapsibleSubtitle;\n","import { useState } from \"react\";\nimport { Button, Menu, MenuItem, Typography } from \"@mui/material\";\nimport { isValidArray } from \"../Utils/UtilFunctions\";\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport { returnSelectedDataType } from \"../Utils/AirQuality/DataTypes\";\n\nconst DataTypeDropDownMenu = ({ selectedDataType, dataTypes, fetchChartDataType }) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  if (!isValidArray(dataTypes)) return null;\n\n  // If there is only 1 dataType, display it as a string of text\n  if (dataTypes.length <= 1) {\n    return (\n      <Typography display=\"inline\" variant=\"h6\" color=\"text.primary\">\n        {dataTypes[0].name_title}\n      </Typography>\n    )\n  }\n\n  // If there are more than 1 dataTypes to choose from, display a popup dropdown menu\n  const open = Boolean(anchorEl);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleMenuItemClick = (dataType) => {\n    fetchChartDataType(dataType);\n    handleClose();\n  };\n\n  return (\n    <>\n      <Button\n        id=\"data-type-drop-down-menu-button\"\n        aria-controls={open ? 'data-type-drop-down-menu' : undefined}\n        aria-haspopup=\"true\"\n        aria-expanded={open ? 'true' : undefined}\n        onClick={handleClick}\n        variant=\"text\"\n        size=\"small\"\n        sx={{\n          p: 0,\n          minWidth: 'unset',\n          borderRadius: 0,\n          verticalAlign: 'top',\n          textTransform: 'unset'\n        }}\n      >\n        <Typography display=\"inline\" variant=\"h6\" borderBottom=\"dotted\">\n          {returnSelectedDataType({ dataTypeKey: selectedDataType, dataTypes: dataTypes, showUnit: true })}\n        </Typography>\n        <ArrowDropDownIcon />\n      </Button>\n      <Menu\n        id=\"data-type-drop-down-menu\"\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        MenuListProps={{\n          'aria-labelledby': 'data-type-drop-down-menu-button',\n        }}\n      >\n\n        {dataTypes.map((dataType, index) => (\n          <MenuItem\n            key={index}\n            sx={{ fontSize: '0.8rem' }}\n            onClick={() => handleMenuItemClick(dataType.key)}\n          >\n            {dataType.name_title}\n          </MenuItem>\n        ))}\n\n      </Menu>\n    </>\n  );\n};\n\nexport default DataTypeDropDownMenu;","import { styled } from '@mui/material/styles';\nimport { Tabs } from '@mui/material/';\n\nexport const StyledTabs = styled(Tabs, {\n  shouldForwardProp: (prop) => prop !== 'smallFontSize',\n})(({ theme, smallFontSize = '0.625rem' }) => ({\n  '& .MuiTabScrollButton-root': {\n    color: theme.palette.text.primary\n  },\n  '& .MuiTab-root': {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: smallFontSize,\n      padding: theme.spacing(0.5)\n    },\n  },\n  '& .MuiSvgIcon-root ': {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: \"1rem\"\n    }\n  }\n}));\n\nexport default StyledTabs;","import { useState, useEffect, useContext } from 'react';\nimport { styled } from '@mui/material/styles';\nimport { Box, Tab, useMediaQuery, Typography, Menu, MenuItem, Stack, Skeleton } from '@mui/material/';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\n\nimport { DataTypes } from '../Utils/AirQuality/DataTypes';\nimport { fetchDataFromURL } from '../API/ApiFetch';\nimport { getChartApiUrl, getCorrelationChartApiUrl, getHistoricalChartApiUrl } from \"../API/ApiUrls\";\nimport { ChartAPIendpoints, ChartAPIendpointsOrder } from \"../API/Utils\";\nimport { DashboardContext } from \"../ContextProviders/DashboardContext\";\n\nimport SubChart from './Subchart/SubChart';\n\nimport CollapsibleSubtitle from '../Components/CollapsibleSubtitle';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport DataTypeDropDownMenu from './DataTypeDropDown';\nimport { isValidArray } from '../Utils/UtilFunctions';\nimport { useDateRangePicker } from '../ContextProviders/DateRangePickerContext';\nimport { returnFormattedDates } from '../Components/DateRangePicker/DateRangePickerUtils';\nimport { useAxesPicker } from '../ContextProviders/AxesPickerContext';\nimport StyledTabs from '../Components/StyledTabs';\n\nconst DEBOUNCE_IN_MILLISECONDS = 100;\n\nconst MAX_NUM_TABS_TO_DISPLAY = 3;\nconst INITIAL_DROPDOWN_MENU_TAB_INDEX = -1;\n\nconst ChartStyleWrapper = styled(Box)(({ theme }) => ({\n  // CSS for dark theme only\n  ...(theme.palette.mode === 'dark' && {\n    // De-saturate a bit\n    filter: 'saturate(0.85)',\n    // Invert iframe\n    '& .heat-map-iframe': {\n      filter: 'invert(0.848) hue-rotate(180deg)',\n    }\n  }),\n  // Center Calendar chart in wrapper\n  '& .Calendar [dir]:not(:empty)': {\n    margin: 'auto'\n  },\n\n  // add horizontal scrollbar to Calendar charts\n  '& .Calendar > div > div:last-of-type > div': {\n    overflowX: 'auto',\n    overflowY: 'hidden',\n    scrollbarGutter: 'stable'\n  }\n}));\n\nconst StyledMenuItem = styled(MenuItem)(({ theme }) => ({\n  '& .MuiBox-root ': {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '0.75rem'\n    },\n  }\n}));\n\n// eslint-disable-next-line max-len\nfunction ChartComponentWrapper(props) {\n  const {\n    chartTitle,\n    generalChartSubtitle,\n    generalChartReference,\n    chartData: passedChartData,\n    chartHeight: passedChartHeight,\n    chartID,\n    chartIndex\n  } = props;\n\n  const { currentSchoolID, setIndividualChartData } = useContext(DashboardContext);\n\n  const isSmallWidth = useMediaQuery((theme) => theme.breakpoints.down('sm'));\n\n  const [isPortrait, setIsPortrait] = useState(window.matchMedia('(orientation: portrait)').matches);\n  const [windowSize, setWindowSize] = useState([\n    window.innerWidth,\n    window.innerHeight,\n  ]);\n\n  let chartMaxHeight;\n  let chartHeight = passedChartHeight;\n  const chartData = passedChartData;\n\n  // Props for tab panels (multiple data visualizations in the same chart area, navigate with tab panels)\n  const [currentTab, setCurrentTab] = useState(0); // start with the first tab\n  const [previousTab, setPreviousTab] = useState(0); // keep tracking of previous tab to keep displaying it if the currentTab = initialDropdownMenuTabIndex (selecting the dropdown menu tab)\n  const [dropdownMenuTabIndex, setDropdownMenuTabIndex] = useState(INITIAL_DROPDOWN_MENU_TAB_INDEX);\n  const [dropdownMenuCurrentTitle, setDropdownMenuCurrentTitle] = useState();\n  const [anchorEl, setAnchorEl] = useState(null); // Define anchorEl state for dropdown menu of the tabs\n\n  // Props for dataType management\n  const [allowedDataTypes, setAllowedDataTypes] = useState([]);\n  const [selectedDataType, setSelectedDataType] = useState(null);\n\n  // Retrieve the dateRange for chart with DateRangePicker\n  const { dateRange, aggregationType } = useDateRangePicker();\n\n  // Retrieve the hAxis and vAxis for chart with AxesPicker\n  const { hAxis, vAxis } = useAxesPicker();\n\n  useEffect(() => {\n    // Using keys returned from backend,\n    // generate the allowedDataTypes object from DataTypes\n    if (chartData.allowedDataTypes) {\n      const dataTypesArr = [];\n      for (let dataType of chartData.allowedDataTypes) {\n        const { name_title, name_short, unit } = DataTypes[dataType];\n        dataTypesArr.push({\n          key: dataType,\n          name_title,\n          name_short,\n          unit\n        })\n      }\n      setAllowedDataTypes(dataTypesArr);\n    }\n    setSelectedDataType(chartData.selectedDataType)\n  }, [chartData]);\n\n  const fetchChartDataType = async (dataType) => {\n    const endpoint = ChartAPIendpointsOrder[chartID];\n    let url;\n    if (endpoint === ChartAPIendpoints.historical) {\n      const { startDate, endDate } = dateRange || {};\n      if (!startDate || !endDate) return;\n\n      const formattedDates = returnFormattedDates({\n        startDateObject: startDate,\n        endDateObject: endDate\n      });\n      url = getHistoricalChartApiUrl({\n        endpoint: endpoint,\n        school_id: currentSchoolID,\n        startDate: formattedDates.startDate,\n        endDate: formattedDates.endDate,\n        aggregationType: aggregationType,\n        dataType: dataType\n      })\n    }\n    else if (endpoint === ChartAPIendpoints.correlationDailyAverage) {\n      url = getCorrelationChartApiUrl({\n        endpoint: ChartAPIendpoints.correlationDailyAverage,\n        school_id: currentSchoolID,\n        dataType: dataType,\n        sensorX: hAxis,\n        sensorY: vAxis\n      });\n    }\n    else {\n      url = getChartApiUrl({\n        endpoint: endpoint,\n        school_id: currentSchoolID,\n        dataType: dataType\n      });\n    }\n    if (!url) return;\n\n    fetchDataFromURL({\n      url: url\n    })\n      .then(data => {\n        setIndividualChartData(chartID, data);\n        setSelectedDataType(data.selectedDataType);\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n  }\n\n  // eventListener for window resize\n  // redraw \"Calendar\" charts and charts with a time filter upon window resize.\n  // Filter & Calendar charts are not automatically respnsive, so we have to redraw them.\n  // redraw other charts when device orientation changes\n  useEffect(() => {\n    let timeoutID = null;\n\n    const handleWindowResize = () => {\n      clearTimeout(timeoutID);\n\n      // debounce before triggering re-render. as user is resizing window, the state could\n      // change multiple times causing many expensive rerenders. we try to rerender at the\n      // end of the resize.\n      timeoutID = setTimeout(() => {\n        // Redraw all charts on device orientation change, as the chartWrapperHeights\n        // have changed.\n        setIsPortrait(window.matchMedia('(orientation: portrait)').matches);\n\n        // Redraw all charts on window resized\n        setWindowSize([window.innerWidth, window.innerHeight]);\n      }, DEBOUNCE_IN_MILLISECONDS);\n    };\n\n    // listen to window resize events\n    window.addEventListener('resize', handleWindowResize);\n\n    return () => {\n      window.removeEventListener('resize', handleWindowResize);\n    };\n  }, [chartData]);\n\n  // set tab back to 0 if school is changed\n  useEffect(() => {\n    setPreviousTab(currentTab);\n    setCurrentTab(0);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentSchoolID])\n\n  if (chartData.chartType !== 'Calendar' && !chartHeight) {\n    chartHeight = isPortrait ? '80vw' : '35vw';\n    chartMaxHeight = isPortrait ? '800px' : '500px';\n  }\n\n  // Function to render only one chart (no subchart --> no tab control)\n  const renderOnlyOneChart = () => {\n    return (\n      <SubChart\n        selectedDataType={selectedDataType}\n        allowedDataTypes={allowedDataTypes}\n        chartData={chartData}\n        isPortrait={isPortrait}\n        windowSize={windowSize}\n        height={chartData.height ? chartData.height : chartHeight}\n      />\n    );\n  }\n\n  // Function to render multiple subcharts with tab control\n  const renderMultipleSubcharts = () => {\n    // Handle tab change\n    const handleTabChange = (__, newIndex) => {\n      setPreviousTab(currentTab);\n      setCurrentTab(newIndex);\n\n      if (needsDropdownMenu && newIndex < MAX_NUM_TABS_TO_DISPLAY && newIndex !== dropdownMenuTabIndex) {\n        setDropdownMenuCurrentTitle();\n        setDropdownMenuTabIndex(INITIAL_DROPDOWN_MENU_TAB_INDEX);\n      }\n    };\n\n    // Determine if dropdown menu is needed\n    const needsDropdownMenu = chartData.subcharts.length > MAX_NUM_TABS_TO_DISPLAY + 1; // maxTabsToDisplay = 3 by default, but here +1 for some leeway, some schools have 4 sensors which is still okay. But if > 4, then only display max 3\n\n    const subchartsDataForTabs = needsDropdownMenu ? chartData.subcharts.slice(0, MAX_NUM_TABS_TO_DISPLAY) : chartData.subcharts;\n    const subchartsDataForDropDownMenu = needsDropdownMenu ? chartData.subcharts.slice(MAX_NUM_TABS_TO_DISPLAY) : null;\n\n    // Function to handle selection from dropdown menu\n    const handleDropdownMenuSelection = (index) => {\n      setPreviousTab(currentTab);\n\n      // Because the original chartData.subcharts array was split in subchartsDataForTabs (length maxTabsToDisplay) and subchartsDataForDropDownMenu (the remaining item), the selected subcharts index is the sum of the length of subchartsDataForTabs array and the index of the selected item from subchartsDataForDropDownMenu\n      setCurrentTab(MAX_NUM_TABS_TO_DISPLAY + index);\n\n      // Same index with the one above to keep the dropdown menu tab highlighted  \n      setDropdownMenuTabIndex(MAX_NUM_TABS_TO_DISPLAY + index);\n\n      // Set title of the selected item in the dropdown menu to display it\n      setDropdownMenuCurrentTitle(subchartsDataForDropDownMenu[index].subchartTitleShort);\n\n      // Close the dropdown menu after selection\n      setAnchorEl(null);\n    };\n\n    const getOtherLocationsLabel = () => {\n      return (\n        <Stack direction=\"row\" justifyContent=\"center\" alignItems=\"center\">\n          <Box flex={1}>\n            Other sensors\n            {\n              dropdownMenuCurrentTitle && ` (${dropdownMenuCurrentTitle})`\n            }\n            &nbsp;\n          </Box>\n          < ExpandMoreIcon />\n        </Stack>\n      )\n    }\n\n    const shouldDisplayThisSubchart = (index) => {\n      if (currentTab === INITIAL_DROPDOWN_MENU_TAB_INDEX) {\n        return previousTab === index;\n      } else {\n        return currentTab === index;\n      }\n    }\n\n    return (\n      <>\n        <StyledTabs\n          value={currentTab}\n          onChange={handleTabChange}\n          variant={isSmallWidth ? 'fullWidth' : 'standard'}\n        >\n          {subchartsDataForTabs.map((_, index) => (\n            <Tab\n              key={index}\n              value={index}\n              label={chartData.subcharts[index].subchartTitle}\n              sx={{\n                // If this subchart doesn't have a valid dataArray to render chart\n                // Make the Tab's text line-through to let user know\n                textDecoration: !isValidArray(chartData.subcharts[index].dataArray) && 'line-through'\n              }}\n            />\n          ))}\n          {/* Render dropdown menu if needed */}\n          {needsDropdownMenu && (\n            <Tab\n              value={dropdownMenuTabIndex}\n              label={getOtherLocationsLabel()}\n              aria-controls=\"submenu\"\n              aria-haspopup=\"true\"\n              onClick={(event) => setAnchorEl(event.currentTarget)}\n            />\n          )}\n        </StyledTabs>\n        {\n          needsDropdownMenu && <Menu\n            id=\"submenu\"\n            anchorEl={anchorEl}\n            open={Boolean(anchorEl)}\n            onClose={() => {\n              // Reset currentTab to the previous valid tab if the user opened the menu (clicked on the drop down menu tab, if shown), but didn't select any menu item\n              if (currentTab === INITIAL_DROPDOWN_MENU_TAB_INDEX) {\n                setPreviousTab(currentTab);\n                setCurrentTab(previousTab);\n              };\n\n              // Close the menu\n              setAnchorEl(null);\n            }}\n          >\n            {/* Render remaining subchart selector in the dropdown menu */}\n            {subchartsDataForDropDownMenu.map((_, index) => (\n              <StyledMenuItem\n                key={index}\n                selected={index === currentTab - MAX_NUM_TABS_TO_DISPLAY}\n                onClick={() => handleDropdownMenuSelection(index)}\n                sx={{\n                  // If this subchart doesn't have a valid dataArray to render chart\n                  // Make the Tab's text line-through to let user know\n                  textDecoration: !isValidArray(chartData.subcharts[index + MAX_NUM_TABS_TO_DISPLAY].dataArray) && 'line-through'\n                }}\n              >\n                <Stack direction=\"row\" alignItems=\"center\" gap={1}>\n                  <Box>\n                    {subchartsDataForDropDownMenu[index].subchartTitle}\n                  </Box>\n                  {\n                    (index === currentTab - MAX_NUM_TABS_TO_DISPLAY) &&\n                    <VisibilityIcon fontSize=\"1rem\" sx={{ color: 'text.secondary' }} />\n                  }\n                </Stack>\n              </StyledMenuItem>\n            ))}\n          </Menu>\n        }\n\n        <Box\n          position=\"relative\"\n          sx={{\n            overflowX: isPortrait && 'auto',\n            WebkitOverflowScrolling: isPortrait && 'touch',\n            overflowY: 'hidden',\n          }}\n        >\n\n          {chartData.subcharts.map((__, index) => (\n            <Box\n              key={index}\n              width=\"100%\"\n              height=\"100%\"\n              role=\"tabpanel\"\n              sx={{\n                transition: '0.35s',\n                position: (index === 0) ? '' : 'absolute',\n                opacity: shouldDisplayThisSubchart(index) ? '1' : '0',\n                pointerEvents: shouldDisplayThisSubchart(index) ? 'auto' : 'none',\n                top: (index === 0) ? '' : 0,\n                overflowX: 'auto',\n                overflowY: 'hidden',\n              }}\n            >\n              <SubChart\n                selectedDataType={selectedDataType}\n                allowedDataTypes={allowedDataTypes}\n                chartData={chartData}\n                subchartIndex={index}\n                isPortrait={isPortrait}\n                windowSize={windowSize}\n                height={chartData.height ? chartData.height : chartHeight}\n                maxHeight={\n                  ['Calendar'].includes(chartData.chartType)\n                    ? ''\n                    : chartMaxHeight\n                }\n                currentSubchart={currentTab}\n              />\n            </Box>\n          ))}\n        </Box>\n      </>\n    )\n  };\n\n  // Function to render remaining subtitles and references for chart with multiple subcharts\n  const getSubtitles = () => {\n    let text = generalChartSubtitle || '';\n    if (chartData.subcharts && chartData.subcharts[currentTab]?.subchartSubtitle) {\n      text += '<br/>';\n      text += chartData.subcharts[currentTab].subchartSubtitle;\n    }\n    return text;\n  }\n  const getReferences = () => {\n    let text = generalChartReference || '';\n    if (chartData.subcharts && chartData.subcharts[currentTab]?.reference) {\n      text += '<br/>';\n      text += chartData.subcharts[currentTab].reference;\n    }\n    return text;\n  }\n\n  return (\n    chartTitle ?\n      <>\n        <Box>\n          <Typography display=\"inline\" variant=\"h6\" color=\"text.primary\">\n            {chartIndex + 1}. {chartTitle}\n            &nbsp;\n          </Typography>\n          <Box display=\"inline\">\n            <DataTypeDropDownMenu\n              selectedDataType={selectedDataType}\n              dataTypes={allowedDataTypes}\n              fetchChartDataType={fetchChartDataType}\n            />\n          </Box>\n        </Box>\n\n        <ChartStyleWrapper height=\"100%\">\n          {chartData.subcharts ? renderMultipleSubcharts() : renderOnlyOneChart()}\n\n          {/* Render subtitle and reference below */}\n          <Box sx={{ my: 3 }}>\n            <Typography\n              component=\"div\"\n              variant=\"body1\"\n              color=\"text.secondary\"\n              sx={{ mb: 1 }}\n            >\n              <CollapsibleSubtitle\n                text={getSubtitles()}\n                reference={getReferences()}\n              />\n            </Typography>\n          </Box>\n        </ChartStyleWrapper>\n      </>\n\n      : <>\n        <Skeleton variant='text' sx={{ width: '100%', fontSize: '2rem' }} />\n        <Skeleton variant='rounded' width=\"100%\" height={300} />\n      </>\n  );\n}\n\nexport default ChartComponentWrapper;\n","import { Box, Typography, Container, Paper } from '@mui/material';\nimport { Comments } from '@hyvor/hyvor-talk-react';\n\nimport { styled } from '@mui/material/styles';\n\nimport parse from 'html-react-parser';\nimport jsonData from '../section_data.json';\nimport UppercaseTitle from './UppercaseTitle';\nimport { replacePlainHTMLWithMuiComponents, capitalizePhrase } from '../Utils/UtilFunctions';\nimport { HYVOR_WEBSITE_ID } from '../Utils/GlobalVariables';\n\nconst StyledHyvorTalk = styled(Box)(({ theme }) => ({\n  paddingBottom: theme.spacing(2),\n  '& *': {\n    color: theme.palette.text.secondary\n  },\n  '& hyvor-talk-comments': {\n    '--ht-color-accent': theme.palette.primary.main,\n    '--ht-color-accent-text': theme.palette.primary.contrastText,\n    '--ht-color-box': theme.palette.customBackground,\n    '--ht-color-box-text': theme.palette.text.secondary,\n    '--ht-color-box-text-light': theme.palette.text.secondaryRGB,\n    '--ht-button-radius': theme.spacing(1)\n  }\n}));\n\nfunction CommentSection({ pageID }) {\n  return (\n    <Container>\n      <UppercaseTitle text={capitalizePhrase(jsonData.commentSection.id)} />\n      <Box maxWidth=\"lg\" margin=\"auto\">\n        <Paper elevation={2} sx={{ p: 3, pb: 0 }}>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ pb: 1 }}>\n            {parse(jsonData.commentSection.content, {\n              replace: replacePlainHTMLWithMuiComponents,\n            })}\n          </Typography>\n          <StyledHyvorTalk>\n            <Comments\n              website-id={HYVOR_WEBSITE_ID}\n              page-id={pageID}\n              loading=\"lazy\"\n            />\n          </StyledHyvorTalk>\n        </Paper>\n      </Box>\n    </Container>\n  );\n}\n\nexport default CommentSection;\n","import { useState } from 'react';\nimport { isMobile } from 'react-device-detect';\n\nimport { Fab, Fade, Popper, Paper, Typography, Stack } from '@mui/material';\nimport AirIcon from '@mui/icons-material/Air';\nimport { FadeInButtonForSpeedDial } from '../SpeedDial/FadeInButtonForSpeedDial';\n\nimport * as Tracking from '../../Utils/Tracking';\nimport AirQualityIndexTable from './AirQualityIndexTable';\n\nexport default function AirQualityIndexLegendQuickGlance(props) {\n  // Mechanism for opening and closing the Quick Glance on hover\n  const [anchorEl, setAnchorEl] = useState(null);\n  const handlePopperOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n    Tracking.sendEventAnalytics(Tracking.Events.airQualityIndexLegendQuickGlance);\n  };\n  const handlePopperClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n\n  return (\n    <>\n      <FadeInButtonForSpeedDial {...props} distanceFromBottomOfWindow=\"5.5rem\">\n        <Fab\n          sx={{ mt: 1 }}\n          aria-owns={open ? Tracking.Events.airQualityIndexLegendQuickGlance : undefined}\n          aria-haspopup=\"true\"\n          onMouseEnter={handlePopperOpen}\n          onMouseLeave={handlePopperClose}\n          onClick={(event) => isMobile && (open ? handlePopperClose() : handlePopperOpen(event))}\n          aria-label={Tracking.Events.airQualityIndexLegendQuickGlance}\n          color=\"primary\"\n        >\n          <Stack direction=\"column\" alignItems=\"center\">\n            <AirIcon fontSize=\"1rem\" />\n            <Typography variant=\"body2\" fontWeight=\"500\">\n              AQI\n            </Typography>\n          </Stack>\n        </Fab>\n      </FadeInButtonForSpeedDial>\n\n      <Popper\n        id={Tracking.Events.airQualityIndexLegendQuickGlance}\n        sx={{\n          pointerEvents: 'none',\n          mt: -1\n        }}\n        open={open}\n        anchorEl={anchorEl}\n        placement=\"top-end\"\n        onClose={handlePopperClose}\n        keepMounted\n        transition\n      >\n        {({ TransitionProps }) => (\n          <Fade {...TransitionProps} timeout={350}>\n            <Paper elevation={8} sx={{ py: 0.5, mb: 1 }}>\n              <Typography sx={{ mx: 2, mt: 1 }} color=\"text.disabled\" variant=\"body1\" fontWeight={500}>\n                AQI at quick glance\n              </Typography>\n              <AirQualityIndexTable tiny hideAQIDescription />\n            </Paper>\n          </Fade>\n        )}\n\n      </Popper>\n    </>\n  );\n}\n","import React, { useState, useContext } from 'react';\nimport { Chip, Tooltip, IconButton, Dialog, Button, DialogActions, DialogTitle, DialogContent, useMediaQuery } from '@mui/material';\nimport * as Tracking from '../../Utils/Tracking';\nimport ChevronLeftIcon from '@mui/icons-material/ChevronLeft';\nimport { DashboardContext } from '../../ContextProviders/DashboardContext';\nimport { useTheme } from '@emotion/react';\n\nconst CustomDialog = (props) => {\n  const {\n    buttonIcon,\n    buttonIconAria,\n    buttonLabel,\n    trackingEvent,\n    dialogTitle,\n    dialogOpenHandler = null,\n    dialogCloseHandler = null,\n    displaySchoolID = true,\n    maxWidth = \"lg\",\n    children,\n    disabled\n  } = props;\n\n  let iconOnly;\n  if (buttonIcon && !buttonLabel) iconOnly = true;\n  else iconOnly = false;\n\n  const { currentSchoolID } = useContext(DashboardContext);\n\n  const smallScreen = useMediaQuery((theme) => theme.breakpoints.down('sm'));\n\n  const [open, setOpen] = useState(false);\n\n  const onOpen = () => {\n    setOpen(true);\n    if (trackingEvent) Tracking.sendEventAnalytics(trackingEvent);\n    if (dialogOpenHandler) dialogOpenHandler();\n  }\n\n  const onClose = () => {\n    setOpen(false);\n    if (dialogCloseHandler) dialogCloseHandler();\n  }\n\n  const theme = useTheme();\n\n  const displayButton = () => {\n    if (iconOnly) return (\n      <Tooltip title={buttonIconAria}>\n        <IconButton\n          onClick={onOpen}\n          aria-label={buttonIconAria}\n          size=\"small\"\n          sx={{ \"&:hover,:focus\": { color: theme.palette.primary.main } }}\n          disabled={disabled}\n        >\n          {buttonIcon}\n        </IconButton>\n      </Tooltip>\n    );\n\n    else return (\n      <Button\n        onClick={onOpen}\n        variant=\"contained\"\n        disabled={disabled}\n      >\n        {buttonIcon}&nbsp;{buttonLabel}\n      </Button>\n    )\n  }\n\n  return (\n    <>\n      {displayButton()}\n\n      <Dialog\n        open={open}\n        onClose={onClose}\n        maxWidth={maxWidth}\n        fullWidth\n        fullScreen={smallScreen}\n        keepMounted\n      >\n        <DialogActions sx={{ justifyContent: \"start\" }}>\n          <Button onClick={onClose}>\n            <ChevronLeftIcon sx={{ fontSize: '1rem' }} />Back\n          </Button>\n        </DialogActions>\n\n        <DialogTitle>\n          {displaySchoolID === true ?\n            (<>\n              <Chip\n                label={currentSchoolID ? `School: ${currentSchoolID.toUpperCase()}` : \"No School\"}\n                size=\"small\"\n                display=\"block\"\n                sx={{ mb: 1 }}\n              />\n              <br />\n            </>\n            ) : null}\n\n          {dialogTitle}\n        </DialogTitle>\n\n        <DialogContent>\n          {children}\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n\nexport default CustomDialog;\n","// disable eslint for this file\n/* eslint-disable */\nimport { useState, useEffect, useContext } from 'react';\nimport { Box, Link, Typography, Stack, Select, FormControl, MenuItem, Grid, Button, useMediaQuery, Table, TableBody, TableCell, TableHead, TableRow } from '@mui/material';\nimport { useTheme } from '@mui/material/styles';\n\nimport DownloadIcon from '@mui/icons-material/Download';\nimport DataObjectIcon from '@mui/icons-material/DataObject';\n\nimport * as Tracking from '../../Utils/Tracking';\nimport { fetchDataFromURL } from '../../API/ApiFetch';\nimport { SupportedFetchExtensions } from \"../../API/Utils\";\nimport { getRawDatasetUrl } from '../../API/ApiUrls';\nimport { RawDatasetType } from \"../../API/Utils\";\nimport LoadingAnimation from '../LoadingAnimation';\n\nimport { DashboardContext } from '../../ContextProviders/DashboardContext';\n\nimport CustomDialog from '../CustomDialog/CustomDialog';\nimport { CITIESair } from '../../Utils/GlobalVariables';\n\nexport default function DatasetDownloadDialog() {\n  const { currentSchoolID, current } = useContext(DashboardContext);\n\n  const [sensorsDatasets, updateSensorsDatasets] = useState({});\n\n  const [previewingDataset, setPreviewingDataset] = useState(\"placeholder\");\n\n  // Construct the structure of sensorsDatasets based on current data\n  useEffect(() => {\n    if (!current) return;\n\n    const sensorsDatasets = current\n      .filter(item => item && item.sensor)  // Filter out null or undefined items and sensors\n      .reduce((acc, item) => {\n        // Use location_short as the key for each sensor\n        const key = item.sensor.location_short;\n        acc[key] = {\n          location_type: item.sensor.location_type,\n          location_short: item.sensor.location_short,\n          location_long: item.sensor.location_long,\n          last_seen: item.sensor.last_seen.split('T')[0],\n          rawDatasets: Object.keys(RawDatasetType).reduce((datasetAcc, datasetKey) => {\n            datasetAcc[RawDatasetType[datasetKey]] = {\n              sample: null,\n              full: null\n            };\n            return datasetAcc;\n          }, {})\n        };\n        return acc;\n      }, {});\n\n    updateSensorsDatasets(sensorsDatasets);\n  }, [current]);\n\n  return (\n    <CustomDialog\n      buttonIcon={<DataObjectIcon sx={{ fontSize: '1rem' }} />}\n      buttonLabel=\"Dataset\"\n      trackingEvent={Tracking.Events.rawDatasetButtonClicked}\n      dialogTitle=\"Preview and download raw dataset(s)\"\n      dialogOpenHandler={(() => {\n        setPreviewingDataset(null);\n      })}\n    >\n      <DatasetSelectorAndPreviewer\n        sensorsDatasets={sensorsDatasets}\n        updateSensorsDatasets={updateSensorsDatasets}\n        previewingDataset={previewingDataset}\n        setPreviewingDataset={setPreviewingDataset}\n        schoolID={currentSchoolID}\n      />\n      {\n        sensorsDatasets &&\n        <Typography variant=\"caption\" sx={{ my: 2, fontStyle: 'italic', display: \"block\" }} >\n          These datasets are provided by {CITIESair} from sensors operated by {CITIESair}. Should you intend to utilize them for your project, research, or publication, we kindly request that you notify us at <Link href='mailto:nyuad.cities@nyu.edu'>nyuad.cities@nyu.edu</Link> to discuss citation requirements.\n        </Typography>\n      }\n    </CustomDialog>\n  );\n}\n\nconst DatasetSelectorAndPreviewer = (props) => {\n  const { sensorsDatasets, updateSensorsDatasets, previewingDataset, setPreviewingDataset, schoolID } = props;\n\n  const theme = useTheme();\n  const smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n  // Preview the hourly type of the first sensor initially\n  useEffect(() => {\n    if (Object.keys(sensorsDatasets).length > 0 && !previewingDataset) {\n      const firstSensor = Object.keys(sensorsDatasets)[0];\n      const initialDatasetType = RawDatasetType.hourly;\n\n      setPreviewingDataset({\n        sensor: firstSensor,\n        datasetType: initialDatasetType\n      });\n\n      // If this dataset has been fetched before, early return\n      if (sensorsDatasets[firstSensor].rawDatasets[initialDatasetType].sample) return;\n\n      const url = getRawDatasetUrl({\n        school_id: schoolID,\n        sensor_location_short: firstSensor,\n        datasetType: initialDatasetType,\n        isSample: true\n      });\n\n      fetchDataFromURL({ url, extension: SupportedFetchExtensions.csv, needsAuthorization: true })\n        .then((data) => {\n          const tmp = { ...sensorsDatasets };\n          tmp[firstSensor].rawDatasets[initialDatasetType].sample = data;\n          updateSensorsDatasets(tmp);\n        })\n        .catch((error) => console.log(error));\n    }\n  }, [sensorsDatasets, previewingDataset]);\n\n  return (\n    <Grid\n      container\n      justifyContent=\"center\"\n      alignItems=\"start\"\n      spacing={smallScreen ? 1 : 2}\n      sx={{ mt: 0, overflowY: 'scroll', overflowX: 'hidden' }}\n    >\n      <Grid item sm={12} md={6}>\n        <DatasetsTable\n          schoolID={schoolID}\n          sensorsDatasets={sensorsDatasets}\n          updateSensorsDatasets={updateSensorsDatasets}\n          smallScreen={smallScreen}\n          previewingDataset={previewingDataset}\n          setPreviewingDataset={setPreviewingDataset}\n        />\n      </Grid>\n      <Grid item sm={12} md={6} maxWidth={smallScreen ? '100%' : 'unset'} sx={{ mt: 1 }}>\n        <PreviewDataset\n          sensorsDatasets={sensorsDatasets}\n          updateSensorsDatasets={updateSensorsDatasets}\n          previewingDataset={previewingDataset}\n          schoolID={schoolID}\n          smallScreen={smallScreen}\n        />\n      </Grid>\n    </Grid>\n  )\n};\n\nconst DatasetsTable = (props) => {\n  const { schoolID, sensorsDatasets, smallScreen, previewingDataset, setPreviewingDataset, updateSensorsDatasets } = props;\n  return (\n    <Table\n      size=\"small\"\n      sx={{\n        tableLayout: 'fixed'\n      }}\n    >\n      <TableHead>\n        <TableRow>\n          <TableCell sx={{ pl: 1 }}>\n            Sensor Location\n          </TableCell>\n          <TableCell sx={{ width: smallScreen ? '9.5rem' : '11rem' }}>\n            Average Period\n          </TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {sensorsDatasets && Object.keys(sensorsDatasets).map((location_short) => (\n          <Dataset\n            key={location_short}\n            schoolID={schoolID}\n            smallScreen={smallScreen}\n            sensor={location_short}\n            sensorsDatasets={sensorsDatasets}\n            previewingDataset={previewingDataset}\n            setPreviewingDataset={setPreviewingDataset}\n            isPreviewing={location_short === previewingDataset?.sensor}\n            updateSensorsDatasets={updateSensorsDatasets}\n          />\n        ))}\n      </TableBody>\n    </Table>\n  )\n}\n\nconst Dataset = (props) => {\n  const { schoolID, sensorsDatasets, sensor, previewingDataset, setPreviewingDataset, isPreviewing, updateSensorsDatasets } = props;\n\n  const [selectedDatasetType, setSelectedDatasetType] = useState(RawDatasetType.hourly);\n\n  useEffect(() => {\n    if (selectedDatasetType !== RawDatasetType.hourly) setSelectedDatasetType(RawDatasetType.hourly);\n  }, [schoolID])\n\n  const handleDatasetTypeChange = (event) => {\n    const selectedVal = event.target.value;\n    setSelectedDatasetType(selectedVal);\n    setPreviewingDataset({ datasetType: selectedVal, sensor });\n    fetchThisDataset(selectedVal);\n  };\n\n  const fetchThisDataset = (datasetType) => {\n    // If this dataset version hasn't been fetched yet,\n    // fetch it and append it into the object fetchedDatasets\n    if (!sensorsDatasets[sensor].rawDatasets[datasetType].sample) {\n      const url = getRawDatasetUrl({\n        school_id: schoolID,\n        sensor_location_short: sensorsDatasets[sensor].location_short,\n        datasetType: datasetType,\n        isSample: true\n      });\n\n      fetchDataFromURL({ url, extension: SupportedFetchExtensions.csv, needsAuthorization: true })\n        .then((data) => {\n          const tmp = { ...sensorsDatasets };\n          tmp[sensor].rawDatasets[datasetType].sample = data;\n          updateSensorsDatasets(tmp);\n        });\n    }\n  }\n\n  const setThisSensorToPreview = () => {\n    if (previewingDataset?.sensor !== sensor) {\n      setPreviewingDataset({\n        datasetType: selectedDatasetType,\n        sensor: sensor\n      });\n      fetchThisDataset(selectedDatasetType);\n    }\n  }\n\n  const theme = useTheme();\n\n  return (\n    <>\n      <TableRow key={sensor}>\n        <TableCell\n          sx={{\n            pl: 1,\n            cursor: 'pointer',\n            background: isPreviewing && theme.palette.background.NYUpurpleLight\n          }}\n          onClick={setThisSensorToPreview}>\n          {sensorsDatasets[sensor].location_long}\n        </TableCell>\n\n        <TableCell\n          sx={{\n            position: 'relative',\n            background: isPreviewing && theme.palette.background.NYUpurpleLight\n          }}>\n          <FormControl size=\"small\">\n            <Select\n              value={selectedDatasetType}\n              onChange={handleDatasetTypeChange}\n              variant=\"standard\"\n              MenuProps={{ disablePortal: true }}\n            >\n              {Object.keys(sensorsDatasets[sensor].rawDatasets).reverse().map((datasetType, index) => (\n                <MenuItem\n                  key={index}\n                  value={datasetType}\n                >\n                  <Stack direction=\"row\" alignItems=\"center\">\n                    {datasetType.charAt(0).toUpperCase() + datasetType.slice(1).toLowerCase()}\n                  </Stack>\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </TableCell>\n      </TableRow >\n    </>\n  )\n}\n\nconst PreviewDataset = (props) => {\n  const { sensorsDatasets, updateSensorsDatasets, previewingDataset, schoolID, smallScreen } = props;\n  const theme = useTheme();\n\n  const [previewingDatasetName, setPreviewingDatasetName] = useState(\"Not previewing any dataset\");\n  const [csvFileName, setCsvFileName] = useState(\"No dataset\");\n  const [isDatasetLoading, setIsDatasetLoading] = useState(false);\n\n  const downloadPreviewingDataset = () => {\n    if (!previewingDataset) return;\n\n    const fetchedDataset = sensorsDatasets[previewingDataset.sensor].rawDatasets[previewingDataset.datasetType].full;\n\n    // Fetch the full dataset if it has not been fetched before\n    if (!fetchedDataset) {\n      const url = getRawDatasetUrl({\n        school_id: schoolID,\n        sensor_location_short: previewingDataset.sensor,\n        datasetType: previewingDataset.datasetType,\n        isSample: false\n      });\n\n      fetchDataFromURL({ url, extension: SupportedFetchExtensions.csv, needsAuthorization: true }).then((data) => {\n        const tmp = { ...sensorsDatasets };\n        tmp[previewingDataset.sensor].rawDatasets[previewingDataset.datasetType].full = data;\n        updateSensorsDatasets(tmp);\n\n        convertCSVforDownload(data);\n      });\n    }\n    else {\n      convertCSVforDownload(fetchedDataset);\n    }\n\n  };\n\n  const convertCSVforDownload = (dataset) => {\n    const blob = new Blob([dataset], { type: 'application/octet-stream' }); // create a Blob with the raw data\n    const url = URL.createObjectURL(blob); // create a download link for the Blob\n    const downloadLink = document.createElement('a');\n    downloadLink.href = url;\n    downloadLink.download = csvFileName;\n    document.body.appendChild(downloadLink);\n    downloadLink.click(); // simulate a click on the download link\n    URL.revokeObjectURL(url); // clean up by revoking the object URL\n    document.body.removeChild(downloadLink);\n  }\n\n  const [formattedData, setFormattedData] = useState('');\n  const [rowNumber, setRowNumber] = useState('');\n\n  useEffect(() => {\n    // If no dataset is chosen to be previewed, early return\n    if (!previewingDataset) return;\n\n    // Update previewing dataset name regardless if the dataset preview has finished loading\n    setPreviewingDatasetName(`Previewing: ${previewingDataset.sensor} (${previewingDataset.datasetType})`);\n\n    // Get the raw dataset\n    const csvData = sensorsDatasets[previewingDataset.sensor]?.rawDatasets[previewingDataset.datasetType]?.sample;\n\n    // If it is empty, then it hasn't been loaded yet\n    if (!csvData) {\n      setRowNumber(null);\n      setFormattedData(null);\n      setCsvFileName(\"Loading...\");\n      setIsDatasetLoading(true);\n      return;\n    };\n\n    if (isDatasetLoading) setIsDatasetLoading(false);\n\n    const lines = csvData.split('\\n');\n\n    const headers = lines[0].split(',');\n    const rows = lines.slice(1);\n\n    setRowNumber([\n      \"\",\n      ...rows.map(row => row.split(',')[0])\n    ].join('\\n'));\n\n    setFormattedData([\n      headers.slice(1).join(','), // Keep the headers for the rest of the columns\n      ...rows.map(row => row.split(',').slice(1).join(',')) // Remove the first column from each row\n    ].join('\\n'));\n\n    // Get the second column of the last row and extract the date part to set the csv's file name\n    let dateString;\n    if (rows.length > 0) {\n      const lastRow = rows[rows.length - 1];\n      const columns = lastRow.split(',');\n      if (columns.length >= 2) {\n        const dateTimeString = columns[1]; // Get the second column\n        dateString = dateTimeString.split('T')[0]; // Extract the date part\n      }\n    }\n\n    const csvFileName = `${schoolID}-${previewingDataset.sensor}-${previewingDataset.datasetType}-${dateString}.csv`;\n    setCsvFileName(csvFileName);\n  }, [previewingDataset, sensorsDatasets]);\n\n  return (\n    <Stack spacing={1}>\n      <Box sx={{ '& *': { fontFamily: \"monospace !important\" } }}>\n        <Stack direction=\"row\">\n          <Typography variant='body2' gutterBottom fontWeight={500}>\n            {previewingDatasetName}\n          </Typography>\n        </Stack>\n\n        <Box\n          component=\"pre\"\n          sx={{\n            overflowX: 'auto',\n            color: theme.palette.text.secondary,\n            backgroundColor: theme.palette.customBackground,\n            p: 2,\n            pt: 1.5,\n            borderRadius: 1,\n            height: smallScreen ? '11.8rem' : '14rem',\n            width: smallScreen ? '100%' : 'unset',\n            marginTop: 0\n          }}\n        >\n          <Stack\n            direction=\"row\"\n            sx={{ fontSize: '0.75rem' }}\n          >\n            {\n              formattedData ?\n                <>\n                  <Box sx={{ mr: 2, userSelect: 'none' }}>\n                    {rowNumber}\n                  </Box>\n                  <Box>\n                    {formattedData}\n                  </Box>\n                </>\n                :\n                <LoadingAnimation optionalText=\"Loading\" />\n            }\n          </Stack>\n        </Box>\n      </Box>\n      <Box textAlign=\"center\" >\n        <Button\n          variant=\"contained\"\n          sx={{\n            textTransform: 'none',\n            textAlign: 'left',\n            lineHeight: 1.1,\n            px: 1.5,\n            py: 1\n          }}\n          onClick={() => {\n            downloadPreviewingDataset();\n            Tracking.sendEventAnalytics(Tracking.Events.rawDatasetDownloaded, {\n              dataset_type: previewingDataset?.datasetType,\n              sensor: previewingDataset?.sensor\n            });\n          }}\n          disabled={isDatasetLoading}\n        >\n          <DownloadIcon sx={{ fontSize: '1.25rem', mr: 0.5 }} />\n          {csvFileName}\n        </Button>\n      </Box>\n    </Stack >\n  )\n}","// disable eslint for this file\n/* eslint-disable */\nimport { useState, useContext } from \"react\";\nimport { Button, Menu, MenuItem } from \"@mui/material\";\nimport { Link } from 'react-router-dom';\nimport TvIcon from '@mui/icons-material/Tv';\nimport { DashboardContext } from \"../../../ContextProviders/DashboardContext\";\nimport { isValidArray } from \"../../../Utils/UtilFunctions\";\n\nconst ScreenDropDownMenu = () => {\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const { currentSchoolID, schoolMetadata } = useContext(DashboardContext);\n\n  if (!schoolMetadata) return;\n  const screens = schoolMetadata.screens;\n\n  if (!isValidArray(screens)) return null;\n\n  // If there is only 1 screen, display a button linked to that screen\n  if (screens.length <= 1) {\n    return (\n      <Button\n        variant=\"contained\"\n        component={Link}\n        to={`/screen/${currentSchoolID}`}\n      >\n        <TvIcon sx={{ fontSize: '1rem' }} />&nbsp;TV Screen\n      </Button>\n    )\n  }\n  // If there are more than 1 screens to choose from, display a popup dropdown menu\n  const open = Boolean(anchorEl);\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <>\n      <Button\n        id=\"basic-button\"\n        aria-controls={open ? 'tv-screen-list-menu' : undefined}\n        aria-haspopup=\"true\"\n        aria-expanded={open ? 'true' : undefined}\n        onClick={handleClick}\n        variant=\"contained\"\n      >\n        <TvIcon sx={{ fontSize: '1rem' }} />\n        &nbsp;\n        TV Screens\n      </Button>\n      <Menu\n        id=\"tv-screen-list-menu\"\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        MenuListProps={{\n          'aria-labelledby': 'basic-button',\n        }}\n      >\n        {\n          screens.map((screen, index) => (\n            <MenuItem\n              key={index}\n              component={Link}\n              to={`/screen/${currentSchoolID}/${screen.screen_name}`}\n              onClick={handleClose}\n              sx={{ fontSize: '0.8rem' }}\n            >\n              {screen.location_long}\n            </MenuItem>\n          ))}\n      </Menu>\n    </>\n  );\n};\n\nexport default ScreenDropDownMenu;","// disable eslint for this file\n/* eslint-disable */\n\nimport { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { Box, Menu, MenuItem, MenuList } from \"@mui/material\";\nimport { CustomChip } from \"../Pages/Project\";\n\nimport PlaceIcon from '@mui/icons-material/Place';\nimport { LocalStorage } from \"../Utils/LocalStorage\";\nimport { AppRoutes } from \"../Utils/AppRoutes\";\n\nimport * as Tracking from '../Utils/Tracking';\n\nimport { DashboardContext } from \"../ContextProviders/DashboardContext\";\nimport { UserContext } from \"../ContextProviders/UserContext\";\n\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport ArrowDropUpIcon from '@mui/icons-material/ArrowDropUp';\n\nconst SchoolSelector = () => {\n  const { currentSchoolID, schoolMetadata } = useContext(DashboardContext);\n  const { user } = useContext(UserContext);\n\n  // If there is only one school, return a Chip displaying the name of that school\n  if (!Array.isArray(user.allowedSchools) || user.allowedSchools.length <= 1)\n    return (\n      <CustomChip\n        icon={<PlaceIcon />}\n        label={schoolMetadata?.name || \"No School Name Given\"}\n        tooltipTitle={\"School\"}\n      />\n    );\n\n  // Else, display a drop down menu that allows choosing between different schools\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const navigate = useNavigate();\n\n  const handleItemSelect = (newSchoolID) => () => {\n    if (currentSchoolID !== newSchoolID) {\n      localStorage.setItem(LocalStorage.schoolID, newSchoolID)\n\n      Tracking.sendEventAnalytics(Tracking.Events.internalNavigation,\n        {\n          origin_school: currentSchoolID,\n          destination_school_id: newSchoolID,\n          origin_id: 'school_selector'\n        });\n\n      navigate(`${AppRoutes.dashboard}/${newSchoolID}`)\n    }\n    handleClose();\n  };\n\n  const returnChipLabel = () => {\n    return (\n      <Box sx={{\n        '& svg': {\n          fontSize: \"1rem\", verticalAlign: \"sub\", marginLeft: \"0.25rem\"\n        }\n      }\n      }>\n        {schoolMetadata?.name || \"Loading...\"}\n        {Boolean(anchorEl) ? (\n          <ArrowDropUpIcon />\n        ) : (\n          <ArrowDropDownIcon />\n        )}\n      </Box>\n    );\n  };\n\n  return (\n    <>\n      <CustomChip\n        icon={<PlaceIcon />}\n        label={returnChipLabel()}\n        tooltipTitle={\"Click to Select School\"}\n        clickable\n        onClick={handleClick}\n        aria-controls={open ? 'basic-menu' : undefined}\n        aria-haspopup=\"true\"\n        aria-expanded={open ? 'true' : undefined}\n      />\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n        MenuListProps={{\n          'aria-labelledby': 'basic-button',\n        }}\n      >\n        <MenuList dense>\n          {user.allowedSchools.map((school, index) => (\n            <MenuItem\n              key={index}\n              onClick={handleItemSelect(school.school_id)}\n            >\n              {school.name}\n            </MenuItem>\n          ))}\n        </MenuList>\n      </Menu>\n    </>\n  );\n};\n\nexport default SchoolSelector;","import React, { useContext, useEffect, useState } from 'react';\nimport { Box, TextField, Chip, Menu, MenuItem, Grid, Typography, Button, Stack, useMediaQuery, Alert, Tooltip, Link } from '@mui/material';\nimport { fetchDataFromURL } from \"../../../API/ApiFetch\";\nimport { RESTmethods } from \"../../../API/Utils\";\nimport { getApiUrl } from '../../../API/ApiUrls';\nimport { GeneralAPIendpoints } from \"../../../API/Utils\";\nimport { DashboardContext } from '../../../ContextProviders/DashboardContext';\nimport { isValidArray } from '../../../Utils/UtilFunctions';\nimport { AlertSeverity, useNotificationContext } from '../../../ContextProviders/NotificationContext';\n\nconst compareArrays = (arr1, arr2) => {\n  return JSON.stringify(arr1) === JSON.stringify(arr2);\n}\n\nconst EmailsInput = () => {\n  const { currentSchoolID } = useContext(DashboardContext);\n\n  const { setShowNotification, setMessage, setSeverity } = useNotificationContext();\n\n  const smallScreen = useMediaQuery((theme) => theme.breakpoints.down('sm'));\n\n  const [serverEmails, setServerEmails] = useState([]);\n  const [localEmails, setLocalEmails] = useState([]);\n  const [emailsListChanged, setEmailsListChanged] = useState(false);\n\n  const [currentEmail, setCurrentEmail] = useState('');\n  const [menuAnchor, setMenuAnchor] = useState(null);\n\n  const [saveButtonTooltipTitle, setSaveButtonTooltipTitle] = useState('');\n\n  const maxEmails = 150;\n  const validateEmail = (email) => {\n    return String(email)\n      .toLowerCase()\n      .match(\n        /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|.(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      );\n  };\n\n  // Fetch emails from backend\n  useEffect(() => {\n    fetchDataFromURL({\n      url: getApiUrl({\n        endpoint: GeneralAPIendpoints.alertsEmails,\n        school_id: currentSchoolID\n      }),\n      extension: 'json',\n      needsAuthorization: true\n    }).then((data) => {\n      setServerEmails(data);\n    })\n      .catch((error) => {\n        setMessage(\"There was an error loading the email list, please try again.\");\n        setSeverity(AlertSeverity.error);\n        setShowNotification(true);\n      });\n  }, [currentSchoolID]);\n\n  useEffect(() => {\n    setLocalEmails(serverEmails);\n  }, [serverEmails]);\n\n  useEffect(() => {\n    setEmailsListChanged(!compareArrays(localEmails, serverEmails));\n  }, [localEmails]);\n\n  useEffect(() => {\n    setSaveButtonTooltipTitle(emailsListChanged ? \"Click to save new changes on server\" : \"No changes detected to save\");\n  }, [emailsListChanged]);\n\n  const handleAddEmail = (passedEmail) => {\n    const email = passedEmail.trim().toLowerCase();\n\n    // If email address follows email format\n    if (validateEmail(email)) {\n      const newEmails = [...localEmails, email];\n\n      // Make sure currentEmail hasn't been added before\n      if (localEmails.includes(email)) {\n        setMessage(`Already added: ${email}`);\n        setSeverity(AlertSeverity.error);\n        setShowNotification(true);\n\n        setCurrentEmail('');\n        return;\n      }\n\n      // Display alert if reached maximum number of email recipients\n      if (newEmails.length === maxEmails) {\n        setMessage('Maximum number of recipients reached');\n        setSeverity(AlertSeverity.warning);\n        setShowNotification(true);\n      }\n\n      setLocalEmails(newEmails);\n      setCurrentEmail('');\n      setMessage();\n    } else {\n      setMessage('Invalid email address. Valid format: abc@def.xyz');\n      setSeverity(AlertSeverity.error);\n      setShowNotification(true);\n    }\n  };\n\n  const handleDeleteEmail = (index) => {\n    const newEmails = localEmails.filter((_, i) => i !== index);\n    setLocalEmails(newEmails);\n  };\n\n  const handleEditEmail = (index) => {\n    setCurrentEmail(localEmails[index]);\n    handleDeleteEmail(index);\n  };\n\n  const handleMenuOpen = (event, index) => {\n    setMenuAnchor({ index, element: event.currentTarget });\n  };\n\n  const handleMenuClose = () => {\n    setMenuAnchor(null);\n  };\n\n  const handlePaste = (event) => {\n    const pastedText = event.clipboardData.getData('text');\n    setCurrentEmail(pastedText);\n    handleAddEmail(pastedText);\n    event.preventDefault();\n  };\n\n  const handleSaveEmails = (_emails) => {\n    const emailsToSave = isValidArray(_emails) ? _emails : (isValidArray(localEmails) ? localEmails : []);\n\n    fetchDataFromURL({\n      url: getApiUrl({\n        endpoint: GeneralAPIendpoints.alertsEmails,\n        school_id: currentSchoolID\n      }),\n      restMethod: RESTmethods.POST,\n      body: emailsToSave\n    }).then((data) => {\n      setServerEmails(data);\n\n      setSeverity(AlertSeverity.success);\n      setMessage('Email list saved successfully!');\n      setShowNotification(true);\n    }).catch(() => {\n      setMessage('There was an error saving the email. Please try again.');\n      setSeverity(AlertSeverity.error);\n      setShowNotification(true);\n    })\n\n    return;\n  }\n\n  useEffect(() => {\n    const handleBeforeUnload = (event) => {\n      if (localEmails !== serverEmails) {\n        event.preventDefault();\n        event.returnValue = '';\n      }\n    };\n\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [localEmails, serverEmails]);\n\n  return (\n    <Box>\n      <Grid container alignItems=\"center\" wrap=\"wrap\">\n        <Grid item>\n          <Typography\n            variant='body1'\n            fontWeight={500}\n            sx={{ p: 0, mb: smallScreen && 1, mr: !smallScreen && 2 }}\n          >\n            Email Recipients:\n          </Typography>\n        </Grid>\n        <Grid\n          item\n          xs={12}\n          lg\n          sx={{\n            overflowY: \"scroll\",\n            maxHeight: \"300px\"\n          }}\n        >\n          <Grid\n            container\n            alignItems=\"center\"\n            sx={{\n              border: '1px solid rgba(0, 0, 0, 0.23)',\n              borderRadius: 2,\n              p: 0.5,\n              flexWrap: 'wrap',\n              width: '100%'\n            }}\n          >\n            {localEmails.map((email, index) => (\n              <Grid item key={index} sx={{ m: 0.5 }}>\n                <Chip\n                  label={email}\n                  onDelete={() => handleDeleteEmail(index)}\n                  onClick={(event) => handleMenuOpen(event, index)}\n                />\n              </Grid>\n            )\n            )}\n            {\n              localEmails.length < maxEmails ? (\n                <Grid item xs={12} sm minWidth=\"200px\" >\n                  <TextField\n                    fullWidth\n                    variant=\"standard\"\n                    value={currentEmail}\n                    onChange={(e) => {\n                      const tmp = e.target.value;\n                      setCurrentEmail(tmp);\n                      if (tmp !== '') {\n                        setSaveButtonTooltipTitle(\"Finalize currently edited email by pressing Enter/Return\")\n                      }\n                    }}\n                    onKeyUp={(e) => {\n                      if (['Enter', 'Spacebar', ' '].includes(e.key)) {\n                        handleAddEmail(currentEmail);\n                      }\n                    }}\n                    onPaste={handlePaste}\n                    placeholder=\"Add recipient\"\n                    sx={{\n                      mx: 0.5\n                    }}\n                    InputProps={{\n                      disableUnderline: true,\n                      style: { textTransform: \"lowercase\" }\n                    }}\n                  />\n                </Grid>\n              ) : null\n            }\n          </Grid>\n        </Grid>\n      </Grid>\n\n      <Stack sx={{ mt: 1 }} spacing={1} alignItems={smallScreen ? \"stretch\" : \"end\"}>\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" gap={1}>\n          <Typography\n            variant=\"caption\"\n            display=\"block\"\n            color=\"text.secondary\"\n            textAlign=\"right\"\n          >\n            {localEmails.length} / {maxEmails} recipient{localEmails.length > 1 ? 's' : null} added\n          </Typography>\n\n          <Link\n            variant=\"caption\"\n            sx={{\n              cursor: \"pointer\"\n            }}\n            onClick={(e) => {\n              e.preventDefault();\n              setCurrentEmail('');\n              setLocalEmails([])\n            }}\n          >\n            Clear All\n          </Link>\n        </Stack>\n\n\n        {\n          serverEmails.length === 0 ?\n            (\n              <Alert\n                severity='error'\n                sx={{\n                  mt: 1\n                }}>\n                The alert(s) above will not be sent unless at least one email recipient is saved\n              </Alert>\n            ) : null\n        }\n\n        <Tooltip title={saveButtonTooltipTitle} enterTouchDelay={0}>\n          {/* Span is needed to display Tooltip on a disabled Button */}\n          <span>\n            <Button\n              onClick={handleSaveEmails}\n              variant=\"contained\"\n              sx={{ width: smallScreen ? \"100%\" : \"fit-content\" }}\n              disabled={!emailsListChanged}\n            >\n              SAVE EMAIL LIST\n            </Button>\n          </span>\n        </Tooltip>\n\n      </Stack>\n\n      <Menu\n        anchorEl={menuAnchor?.element}\n        open={Boolean(menuAnchor)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem\n          onClick={() => {\n            handleEditEmail(menuAnchor.index);\n            handleMenuClose();\n          }}\n        >\n          Edit\n        </MenuItem>\n      </Menu>\n    </Box>\n  );\n};\n\nexport default EmailsInput;\n","import SpeedIcon from '@mui/icons-material/Speed';\nimport CalendarMonthIcon from '@mui/icons-material/CalendarMonth';\n\nconst AlertTypes = {\n  threshold: {\n    id: \"threshold\",\n    index: 0,\n    name: \"Threshold\",\n    tableColumnHeader: \"Threshold\",\n    icon: <SpeedIcon />\n  },\n  daily: {\n    id: \"daily\",\n    index: 1,\n    name: \"Daily\",\n    tableColumnHeader: \"Alert Hour\",\n    icon: <CalendarMonthIcon />\n  }\n};\n\nexport const ThresholdAlertTypes = {\n  below_threshold: {\n    id: 'below_threshold',\n    sign: \"<\",\n    name: \"below\"\n  },\n  above_threshold: {\n    id: 'above_threshold',\n    sign: \">\",\n    name: \"exceed\"\n  }\n}\n\nexport default AlertTypes;","import { createContext, useMemo, useState, useContext, useEffect } from 'react';\nimport { DashboardContext } from './DashboardContext';\nimport { fetchDataFromURL } from '../API/ApiFetch';\nimport { getAlertsApiUrl } from '../API/ApiUrls';\nimport { GeneralAPIendpoints } from \"../API/Utils\";\nimport AlertTypes, { ThresholdAlertTypes } from '../Components/AirQuality/AirQualityAlerts/AlertTypes';\nimport { isValidArray } from '../Utils/UtilFunctions';\nimport { DataTypes } from '../Utils/AirQuality/DataTypes';\n\nconst AirQualityAlertContext = createContext();\n\nexport const AirQualityAlertKeys = {\n  id: \"id\",\n  alert_type: \"alert_type\",\n  sensor_id: \"sensor_id\",\n  location_short: \"location_short\",\n  datatypekey: \"datatypekey\",\n  threshold_value: \"threshold_value\",\n  days_of_week: \"days_of_week\",\n  minutespastmidnight: \"minutespastmidnight\",\n  is_enabled: \"is_enabled\",\n  excluded_dates: \"excluded_dates\"\n};\n\nexport const getAlertPlaceholder = (alert_type = AlertTypes.daily.id) => {\n  let localAlertType;\n  if (alert_type === AlertTypes.threshold.id) localAlertType = ThresholdAlertTypes.above_threshold.id;\n\n  return {\n    [AirQualityAlertKeys.id]: '',\n    [AirQualityAlertKeys.alert_type]: localAlertType || alert_type,\n    [AirQualityAlertKeys.sensor_id]: '',\n    [AirQualityAlertKeys.datatypekey]: '',\n    [AirQualityAlertKeys.days_of_week]: [0, 1, 2, 3, 4],\n    [AirQualityAlertKeys.threshold_value]: -1,\n    [AirQualityAlertKeys.minutespastmidnight]: '',\n    [AirQualityAlertKeys.is_enabled]: true,\n    [AirQualityAlertKeys.excluded_dates]: []\n  }\n}\n\nexport function AirQualityAlertProvider({ children }) {\n  const { schoolMetadata, currentSchoolID } = useContext(DashboardContext);\n\n  const [selectedAlert, setSelectedAlert] = useState(getAlertPlaceholder());\n\n  const [editingAlert, setEditingAlert] = useState(selectedAlert);\n\n  const [allowedDataTypesForSensor, setAllowedDataTypesForSensor] = useState([]);\n\n  const [alerts, setAlerts] = useState([]);\n\n  useEffect(() => {\n    setEditingAlert({ ...selectedAlert });\n  }, [selectedAlert]);\n\n  useEffect(() => {\n    const sensor_id = editingAlert[AirQualityAlertKeys.sensor_id];\n    if (sensor_id && sensor_id !== '') {\n      setAllowedDataTypesForSensor(\n        returnAllowedDataTypesForThisSensor(sensor_id)\n      )\n    }\n  }, [editingAlert]);\n\n  const returnAllowedDataTypesForThisSensor = (sensor) => {\n    if (!schoolMetadata) return;\n\n    const { sensors } = schoolMetadata;\n    if (!isValidArray(sensors)) return;\n\n    const sensorData = sensors.find(elem => elem.sensor_id === sensor) || [];\n    const allowedDataTypesForThisSensor = sensorData.allowedDataTypes;\n\n    if (allowedDataTypesForThisSensor) {\n      return allowedDataTypesForThisSensor\n        .map(dataType => ({ value: dataType, label: DataTypes[dataType].name_title }));\n    }\n    else return [];\n  }\n\n  // Fetch alerts for individual school\n  useEffect(() => {\n    if (!currentSchoolID) return;\n\n    fetchDataFromURL({\n      url: getAlertsApiUrl({\n        endpoint: GeneralAPIendpoints.alerts,\n        school_id: currentSchoolID\n      })\n    }).then((data) => {\n      setAlerts(data);\n    }).catch((error) => {\n      console.log(error);\n    });\n\n  }, [currentSchoolID]);\n\n  const contextValue = useMemo(() => ({\n    selectedAlert, setSelectedAlert,\n    editingAlert, setEditingAlert,\n    allowedDataTypesForSensor, setAllowedDataTypesForSensor,\n    alerts, setAlerts\n  }), [selectedAlert, editingAlert, allowedDataTypesForSensor, alerts]);\n\n  return (\n    <AirQualityAlertContext.Provider value={contextValue}>\n      {children}\n    </AirQualityAlertContext.Provider>\n  );\n}\n\n// Custom hook \nexport const useAirQualityAlert = () => useContext(AirQualityAlertContext);","export const returnHoursFromMinutesPastMidnight = (minutes) => {\n  const hoursPastMidnight = Math.floor(minutes / 60);\n  return hoursPastMidnight.toString().padStart(2, '0') + ':00';\n}\n\nexport const CrudTypes = {\n  add: 'ADD',\n  edit: 'EDIT',\n  delete: 'DELETE'\n}\n\nexport const SharedColumnHeader = {\n  location: \"Sensor Location\",\n  dataType: \"Data Type\",\n  selectedDaysOfWeek: \"Days\"\n}","import { CrudTypes } from '../Utils';\n\nexport const DialogData = {\n  [CrudTypes.add]: {\n    title: \"Add A New Alert\",\n    primaryButtonLabel: \"Save Alert\",\n    errorMessage: \"Server error: new alert was not saved. Please try again\",\n    successMessage: \"New alert added successfully\"\n  },\n  [CrudTypes.edit]: {\n    title: \"Edit Alert\",\n    primaryButtonLabel: \"Save Edit\",\n    errorMessage: \"Server error: changes were not saved. Please try again\",\n    successMessage: \"Changes saved successfully\"\n  },\n  [CrudTypes.delete]: {\n    title: \"Delete Alert\",\n    contentText: \"Are you sure you want to delete this alert?\",\n    primaryButtonLabel: \"Delete\",\n    errorMessage: \"Server error: alert not deleted. Please try again.\",\n    successMessage: \"Alert deleted successfully\"\n  }\n};\n","import { ToggleButtonGroup, ToggleButton } from '@mui/material';\nimport { ThresholdAlertTypes } from '../AlertTypes';\n\nexport const ThresholdTypeToggle = ({ thisAlertType, handleChange, disabled, ...others }) => {\n  return (\n    <ToggleButtonGroup\n      color={disabled ? \"standard\" : \"primary\"}\n      disabled={disabled}\n      defaultValue={ThresholdAlertTypes.above_threshold.id}\n      value={thisAlertType}\n      exclusive\n      aria-label=\"toggle to choose alert below or above a threshold\"\n      size=\"small\"\n      onChange={handleChange}\n      {...others}\n    >\n      {Object.keys(ThresholdAlertTypes).map((key) => {\n        const thresholdAlertType = ThresholdAlertTypes[key];\n\n        return (\n          <ToggleButton\n            key={thresholdAlertType.id}\n            size=\"small\"\n            sx={{\n              textTransform: \"capitalize !important\",\n              px: 1.25,\n              py: 0.5\n            }}\n            value={thresholdAlertType.id}\n            aria-label={thresholdAlertType.id}\n          >\n            {thresholdAlertType.sign}&nbsp;{thresholdAlertType.name}\n          </ToggleButton>\n        );\n      })}\n    </ToggleButtonGroup>\n  );\n};\n","import { Box, FormControl, InputLabel, Select, MenuItem, Stack } from '@mui/material';\nimport { useTheme } from '@emotion/react';\nimport { isValidArray } from '../../../../Utils/UtilFunctions';\n\nexport const SimplePicker = (props) => {\n  const { icon, label, value, options, handleChange, disabled } = props;\n  const theme = useTheme();\n\n  return (\n    <Stack\n      direction=\"row\"\n      spacing={1}\n      alignItems=\"center\"\n    >\n      <Box\n        aria-hidden={true}\n        sx={{\n          '& .MuiSvgIcon-root': {\n            color: disabled ? theme.palette.text.secondary : theme.palette.text.primary\n          }\n        }}\n      >\n        {icon}\n      </Box>\n\n      <FormControl\n        fullWidth\n        size='small'\n        disabled={disabled}\n        sx={{ minWidth: \"200px\" }}\n      >\n        <InputLabel id={`${label}-picker-label`}>{label}</InputLabel>\n        <Select\n          labelId={`${label}-picker-label`}\n          id={`${label}-picker`}\n          value={value}\n          label={label}\n          onChange={handleChange}\n        >\n          {isValidArray(options) &&\n            options.map((option) => (\n              <MenuItem key={option.value} value={option.value}>\n                {option.label}\n              </MenuItem>\n            ))}\n        </Select>\n      </FormControl>\n    </Stack>\n\n  );\n};\n","import { returnHoursFromMinutesPastMidnight } from '../Utils';\n\nexport const HOURS = Array.from({ length: 23 }, (_, i) => {\n  const minutesPastMidnight = (i + 1) * 60;\n  return {\n    label: returnHoursFromMinutesPastMidnight(minutesPastMidnight),\n    value: minutesPastMidnight\n  };\n});\n","import { Slider, colors, TextField, Grid, Typography } from '@mui/material';\nimport { useEffect, useState } from 'react';\nimport { useTheme } from '@emotion/react';\n\nexport const ThresholdSlider = (props) => {\n  const {\n    min = 0,\n    max = 100,\n    value,\n    defaultValue,\n    stepsForThreshold = 10,\n    marks = null,\n    handleChange,\n    disabled,\n    backgroundCssGradient,\n    invertSelection = false,\n    showInput = true,\n    inputUnit\n  } = props;\n\n  const theme = useTheme();\n\n  // sliderValue is an array\n  const [sliderRangeMin, setSliderRangeMin] = useState(invertSelection ? value || defaultValue : min);\n  const [sliderRangeMax, setSliderRangeMax] = useState(invertSelection ? max : value || defaultValue);\n  const [nearestDataIndex, setNearestDataIndex] = useState(-1);\n\n  const [error, setError] = useState(false);\n  const [helperText, setHelperText] = useState('');\n\n  useEffect(() => {\n    const localSliderRangeMin = invertSelection ? value : min;\n    const localSliderRangeMax = invertSelection ? max : value;\n    setSliderRangeMin(localSliderRangeMin);\n    setSliderRangeMax(localSliderRangeMax);\n\n    setNearestDataIndex(findNearestDataIndex(invertSelection ? localSliderRangeMin : localSliderRangeMax));\n  }, [invertSelection, value, max, min]);\n\n  const handleSliderChange = (event, newValue) => {\n    const val = newValue[invertSelection ? 0 : 1];\n\n    setSliderRangeMin(invertSelection ? val : min);\n    setSliderRangeMax(invertSelection ? max : val);\n\n    handleChange(val);\n    setNearestDataIndex(findNearestDataIndex(val));\n  };\n\n  const handleInputChange = (event) => {\n    const val = event.target.value === '' ? '' : Number(event.target.value);\n\n    if (val !== '' && (val >= min && val <= max)) {\n      setSliderRangeMin(invertSelection ? val : min);\n      setSliderRangeMax(invertSelection ? max : val);\n\n      handleChange(val);\n      setNearestDataIndex(findNearestDataIndex(val));\n\n      setError(false);\n      setHelperText('');\n    } else {\n      setError(true);\n      setHelperText(`Threshold must be between ${min} and ${max}`);\n    }\n  };\n\n  const findNearestDataIndex = (val) => {\n    if (!marks) return -1;\n\n    // Filter marks to get those with values greater than currentVal\n    const greaterMarks = marks.filter(mark => mark.value >= val);\n\n    // If no marks are greater, return -1\n    if (greaterMarks.length === 0) {\n      return -1;\n    }\n\n    // Find the mark with the nearest value greater than val\n    const nearestMark = greaterMarks.reduce((prev, curr) => {\n      return (curr.value - val) < (prev.value - val) ? curr : prev;\n    });\n\n    // Return the index of the nearest mark in the original marks array\n    const index = marks.indexOf(nearestMark)\n    return invertSelection ? index - 1 : index;\n  }\n\n  const stripedGradient = `repeating-linear-gradient(-45deg, ${colors.grey[800]}, ${colors.grey[800]} 4px, ${colors.common.white} 4px, ${colors.common.white} 8px)`;\n\n  return (\n    <>\n      <Grid container item xs=\"auto\" alignItems=\"end\" spacing={0.5}>\n        <Grid item xs=\"auto\" minWidth=\"4.5rem\">\n          {showInput ? (\n            <TextField\n              variant='standard'\n              type=\"number\"\n              label=\"Threshold\"\n              value={invertSelection ? sliderRangeMin : sliderRangeMax}\n              onChange={handleInputChange}\n              error={error}\n              helperText={helperText}\n              size='small'\n              fullWidth\n              disabled={disabled}\n              inputProps={{\n                step: stepsForThreshold,\n                min,\n                max,\n                type: 'number',\n                'aria-labelledby': 'input-threshold-slider'\n              }}\n            />\n          ) : null}\n        </Grid>\n\n        {\n          inputUnit ? (\n            <Grid item>\n              <Typography variant='body2'>\n                {inputUnit}\n              </Typography>\n            </Grid>\n          ) : null\n        }\n      </Grid>\n\n\n      <Grid item xs={12} sx={{ mt: 2, ml: 6 }}>\n        <Slider\n          aria-label=\"Alert Threshold Slider\"\n          aria-labelledby=\"input-threshold-slider\"\n          value={[sliderRangeMin, sliderRangeMax]}\n          defaultValue={[sliderRangeMin, sliderRangeMax]}\n          step={marks === null ? stepsForThreshold : null} // only allow discrete equal step if marks are not provided\n          marks={marks}\n          disabled={disabled}\n          min={min}\n          max={max}\n          onChange={handleSliderChange}\n          valueLabelDisplay=\"on\"\n          orientation=\"vertical\"\n          sx={{\n            height: \"35vh\",\n            minHeight: \"250px\",\n            maxHeight: \"500px\",\n            cursor: disabled ? 'not-allowed' : 'inherit',\n            pointerEvents: 'all',\n            '& *': {\n              transition: 'none !important'\n            },\n            '& .MuiSlider-thumb': {\n              width: '2rem',\n              height: '4px',\n              borderRadius: 1,\n              color: colors.common.black,\n            },\n            [`& .MuiSlider-thumb[data-index=\"${invertSelection ? 1 : 0}\"]`]: {\n              display: 'none',\n            },\n            '& .MuiSlider-mark, .MuiSlider-markActive': {\n              width: '2rem',\n              height: '3px',\n              background: theme.palette.background.paper,\n              backgroundImage: theme.palette.background.paperBackgroundGradient\n            },\n            '& .MuiSlider-thumb, .MuiSlider-mark': {\n              transform: `translate(-50%,50%})`\n            },\n            '& .MuiSlider-rail, .MuiSlider-track': {\n              width: '1rem',\n              opacity: 0.75,\n              border: 'none'\n            },\n            '& .MuiSlider-rail': {\n              background: disabled ? colors.grey[400] : backgroundCssGradient,\n            },\n            '& .MuiSlider-track': {\n              background: stripedGradient,\n              ...(invertSelection ? {\n                borderBottomLeftRadius: 0,\n                borderBottomRightRadius: 0\n              } : {\n                borderTopLeftRadius: 0,\n                borderTopRightRadius: 0\n              })\n            },\n            [`& .MuiSlider-markLabel, .MuiSlider-markLabel[data-index=\"${nearestDataIndex}\"]`]: {\n              color: theme.palette.text.primary,\n              fontWeight: 500,\n              textDecoration: 'underline',\n            },\n            '& .MuiSlider-markLabelActive': {\n              color: theme.palette.text.secondary,\n              fontWeight: 'inherit',\n              textDecoration: 'inherit',\n            },\n            '& .MuiSlider-valueLabel': {\n              transform: 'translate(-10px, -50%)',\n            }\n          }} />\n      </Grid>\n\n      <Grid item sx={{ mt: 1 }}>\n        <Typography variant='caption' display='block' fontStyle=\"italic\">\n          Move the slider to change the alert's threshold value or use the text input box for more precise control.\n        </Typography>\n      </Grid>\n    </>\n  );\n};\n\n","export const DAYS_OF_WEEK = [\n  { value: 0, label: 'Monday' },\n  { value: 1, label: 'Tuesday' },\n  { value: 2, label: 'Wednesday' },\n  { value: 3, label: 'Thursday' },\n  { value: 4, label: 'Friday' },\n  { value: 5, label: 'Saturday' },\n  { value: 6, label: 'Sunday' }\n];\n","import { Stack, ToggleButton, ToggleButtonGroup, Tooltip } from '@mui/material';\nimport CalendarMonthIcon from '@mui/icons-material/CalendarMonth';\nimport { DAYS_OF_WEEK } from './DAYS_OF_WEEK';\n\nexport default function DaysOfWeekToggle(props) {\n  const { value, handleChange, disabled } = props;\n\n  return (\n    <Stack\n      direction=\"row\"\n      spacing={1}\n      alignItems=\"center\"\n    >\n      <CalendarMonthIcon />\n      <ToggleButtonGroup\n        value={value || [0, 1, 2, 3, 4]}\n        onChange={handleChange}\n        aria-label=\"days of the week to receive alert\"\n        sx={{ display: 'flex', justifyContent: 'center' }} // Center the buttons horizontally\n        size=\"small\"\n        fullWidth\n        disabled={disabled}\n        color={disabled ? \"standard\" : \"primary\"}\n      >\n        {DAYS_OF_WEEK.map((day) => (\n          <Tooltip key={day.value} title={day.label} arrow>\n            <ToggleButton value={day.value} aria-label={day.label} sx={{ textTransform: 'none' }}>\n              {day.label.slice(0, 3)}\n            </ToggleButton>\n          </Tooltip>\n        ))}\n      </ToggleButtonGroup>\n    </Stack>\n\n  );\n}\n","import dayjs from 'dayjs';\nimport { styled } from '@mui/material/styles';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { PickersDay } from '@mui/x-date-pickers/PickersDay';\nimport { DateCalendar } from '@mui/x-date-pickers/DateCalendar';\n\nimport EventBusyIcon from '@mui/icons-material/EventBusy';\nimport { Link, Typography } from '@mui/material';\nimport ExpandableSection from '../../../ExpandableSection/ExpandableSection';\n\n// Custom styling for the selected days\nconst CustomPickersDay = styled(PickersDay, {\n  shouldForwardProp: (prop) => prop !== \"selected\"\n})(({ theme, selected }) => ({\n  ...(selected && {\n    backgroundColor: theme.palette.primary.main,\n    color: theme.palette.common.white,\n    \"&:hover, &:focus\": {\n      backgroundColor: theme.palette.primary.dark\n    },\n    borderRadius: \"50%\",\n  })\n}));\n\n// Custom day component that highlights the selected dates\nconst CustomDayComponent = (props) => {\n  const { day, selectedDates, ...other } = props;\n\n  // Check if the day is selected\n  const isSelected = selectedDates.includes(dayjs(day).format('YYYY-MM-DD'));\n\n  return (\n    <CustomPickersDay {...other} day={day} selected={isSelected} />\n  )\n}\n\nexport default function MultiDaysCalendarPicker(props) {\n  const { selectedDates, handleChange, disabled } = props;\n\n  // Ensure selectedDates is formatted as \"YYYY-MM-DD\"\n  const parsedSelectedDates = selectedDates.map((date) => dayjs(date).format('YYYY-MM-DD'));\n\n  const returnSectionLabelString = () => {\n    const len = selectedDates.length;\n    if (len > 0) {\n      return `Excluded Dates (${len} Days)`\n    } else {\n      return `Excluded Dates`\n    }\n  }\n\n  return (\n    <ExpandableSection\n      title={returnSectionLabelString()}\n      icon={<EventBusyIcon sx={{ fontSize: \"1rem\" }} />}\n      disabled={disabled}\n      content={(\n        <>\n          <Typography color=\"text.secondary\" variant='body2' gutterBottom>\n            Select dates when you do <b>NOT</b> want to receive alerts. Useful for holidays or school breaks.\n          </Typography>\n\n          <Link\n            variant=\"caption\"\n            sx={{\n              cursor: \"pointer\",\n              display: \"block\",\n              textAlign: \"right\"\n            }}\n            onClick={(e) => {\n              e.preventDefault();\n              handleChange(selectedDates);\n            }}\n          >\n            Clear All\n          </Link>\n\n          <LocalizationProvider\n            dateAdapter={AdapterDayjs}\n            localeText={{\n              calendarWeekNumberHeaderText: 'Week',\n              calendarWeekNumberText: (weekNumber) => `${weekNumber}.`,\n            }}\n          >\n            <DateCalendar\n              displayWeekNumber\n              slots={{\n                day: (dayProps) => (\n                  <CustomDayComponent\n                    {...dayProps}\n                    selectedDates={parsedSelectedDates}\n                  />\n                ),\n              }}\n              onChange={(value, selectionState) => {\n                if (selectionState === 'finish') {\n                  handleChange([dayjs(value).format('YYYY-MM-DD')]);\n                }\n              }}\n              disableHighlightToday\n              minDate={dayjs().startOf('month')} // Restrict to dates after the start of the current month\n            />\n          </LocalizationProvider>\n        </>\n      )}\n    />\n  );\n}\n","import { useState } from 'react';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, useTheme } from '@mui/material';\n\nexport default function AlertDeletionDialog(props) {\n  const { onConfirmedDelete } = props;\n\n  const [open, setOpen] = useState(false);\n  const theme = useTheme();\n\n  return (\n    <>\n      <Button\n        variant=\"text\"\n        color=\"error\"\n        onClick={() => {\n          setOpen(true)\n        }}>\n        Delete\n      </Button>\n      <Dialog\n        open={open}\n        onClose={() => {\n          setOpen(false)\n        }}\n        aria-labelledby=\"alert-deletion-confirmation-dialog-title\"\n        aria-describedby=\"alert-deletion-confirmation-dialog-description\"\n        maxWidth=\"xs\"\n      >\n        <DialogTitle id=\"alert-deletion-confirmation-dialog-title\">\n          Are you sure?\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-deletion-confirmation-dialog-description\">\n            Deletion is permanent. If you simply wish to pause this alert, disable it with the toggle switch instead.</DialogContentText>\n        </DialogContent>\n        <DialogActions sx={{ justifyContent: \"end\" }}>\n          <Button\n            onClick={() => {\n              setOpen(false)\n            }}\n            sx={{\n              color: theme.palette.text.secondary\n            }}\n          >\n            Cancel\n          </Button>\n\n          <Button\n            onClick={() => {\n              onConfirmedDelete();\n              setOpen(false);\n            }}\n          >\n            Delete\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}","import { Button, Dialog, DialogTitle, DialogActions, DialogContent, DialogContentText, Stack, useMediaQuery, Typography, Grid, Switch } from '@mui/material';\nimport { useTheme } from '@emotion/react';\nimport AlertTypes from '../AlertTypes';\nimport { ThresholdAlertTypes } from '../AlertTypes';\nimport { CrudTypes, SharedColumnHeader } from '../Utils';\n\nimport { AirQualityAlertKeys, getAlertPlaceholder, useAirQualityAlert } from '../../../../ContextProviders/AirQualityAlertContext';\n\nimport AccessTimeIcon from '@mui/icons-material/AccessTime';\nimport PlaceIcon from '@mui/icons-material/Place';\nimport CategoryIcon from '@mui/icons-material/Category';\n\nimport { capitalizePhrase } from '../../../../Utils/UtilFunctions';\nimport { DataTypeKeys, DataTypes } from '../../../../Utils/AirQuality/DataTypes';\nimport { useContext, useEffect, useState } from 'react';\nimport { DashboardContext } from '../../../../ContextProviders/DashboardContext';\nimport { fetchDataFromURL } from '../../../../API/ApiFetch';\nimport { RESTmethods } from \"../../../../API/Utils\";\nimport { getAlertsApiUrl } from '../../../../API/ApiUrls';\nimport { GeneralAPIendpoints } from \"../../../../API/Utils\";\nimport { generateCssBackgroundGradient } from '../../../../Utils/Gradient/GradientUtils';\nimport { AQI_Database, VOC_Database } from '../../../../Utils/AirQuality/AirQualityIndexHelper';\n\nimport { DialogData } from './DialogData';\nimport { ThresholdTypeToggle } from './ThresholdTypeToggle';\nimport { SimplePicker } from './SimplePicker';\nimport { HOURS } from './HOURS';\nimport { ThresholdSlider } from './ThresholdSlider';\nimport { AlertSeverity, useNotificationContext } from '../../../../ContextProviders/NotificationContext';\n\nimport isEqual from 'lodash.isequal';\nimport DaysOfWeekToggle from './DayOfTheWeekToggle';\nimport MultiDaysCalendarPicker from './MultiDaysCalendarPicker';\nimport AlertDeletionDialog from './AlertDeletionDialog';\n\nconst returnFormattedStatusString = (editingAlert) => {\n  const status = editingAlert[AirQualityAlertKeys.is_enabled] ? \"enabled\" : \"disabled\";\n  const tense = editingAlert[AirQualityAlertKeys.id] ? \"is\" : \"will be\"; // if this alert doesn't have id, it's not saved in DB yet, thus we use future tense \n\n  return `This alert ${tense} ${status}`;\n}\n\nconst AlertModificationDialog = (props) => {\n  const {\n    alertTypeKey,\n    openAlertModificationDialog,\n    crudType,\n    handleClose\n  } = props;\n\n  const { schoolMetadata, currentSchoolID } = useContext(DashboardContext);\n\n  const { selectedAlert, setSelectedAlert, editingAlert, allowedDataTypesForSensor, setEditingAlert, setAlerts } = useAirQualityAlert();\n\n  const [shouldDisableButton, setShouldDisableButton] = useState(false);\n\n  const { setShowNotification, setMessage, setSeverity } = useNotificationContext();\n\n  useEffect(() => {\n    setMessage();\n    setShowNotification(false);\n  }, [crudType, setMessage, setShowNotification]);\n\n  const handleCurrentSensorChange = (event) => {\n    const newSensor = event.target.value;\n    setEditingAlert({\n      ...editingAlert,\n      [AirQualityAlertKeys.sensor_id]: newSensor,\n      [AirQualityAlertKeys.datatypekey]: ''\n    });\n  }\n\n  const handleCurrentDataTypeChange = (event) => {\n    const selectedDataTypeKey = event.target.value;\n    const dataType = DataTypes[selectedDataTypeKey];\n    const dataTypeColorAxis = theme.palette.chart.colorAxes[dataType.color_axis];\n    const { defaultValueForAlert } = dataTypeColorAxis;\n\n    setEditingAlert({\n      ...editingAlert,\n      [AirQualityAlertKeys.datatypekey]: selectedDataTypeKey,\n      [AirQualityAlertKeys.threshold_value]: defaultValueForAlert\n    });\n  }\n\n  const handleCurrentDaysOfWeekChange = (_, newDaysOfWeek) => {\n    const validDaysOfWeek = Array.isArray(newDaysOfWeek) ? newDaysOfWeek : [];\n\n    setEditingAlert({\n      ...editingAlert,\n      [AirQualityAlertKeys.days_of_week]: validDaysOfWeek.sort()\n    });\n  }\n\n  const handleCurrentThresholdValueChange = (value) => {\n    setEditingAlert({\n      ...editingAlert,\n      [AirQualityAlertKeys.threshold_value]: value\n    });\n  }\n\n  const handleCurrentAlertTypeChange = (event) => {\n    setEditingAlert({\n      ...editingAlert,\n      [AirQualityAlertKeys.alert_type]: event.target.value\n    });\n  }\n\n  const handleExcludedDatesChange = (valueArray) => {\n    // Get the current excluded dates or initialize as an empty array\n    const currentExcludedDates = editingAlert[AirQualityAlertKeys.excluded_dates] || [];\n\n    // Create a new array that updates the excluded dates\n    const updatedExcludedDates = valueArray.reduce((acc, date) => {\n      // Check if the date is already excluded\n      if (acc.includes(date)) {\n        // If it exists, filter it out (remove the date)\n        return acc.filter(excludedDate => excludedDate !== date);\n      } else {\n        // If it doesn't exist, add the date to the array\n        return [...acc, date];\n      }\n    }, currentExcludedDates); // Start with the current excluded dates\n\n    // Update the state with the new excluded_dates array\n    setEditingAlert({\n      ...editingAlert,\n      [AirQualityAlertKeys.excluded_dates]: updatedExcludedDates\n    });\n  };\n\n\n  const handleCurrentMinutesPastMidnightChange = (event) => {\n    setEditingAlert({\n      ...editingAlert,\n      [AirQualityAlertKeys.minutespastmidnight]: event.target.value\n    });\n  }\n\n  const handleIsEnabledChange = (event) => {\n    setEditingAlert({\n      ...editingAlert,\n      [AirQualityAlertKeys.is_enabled]: event.target.checked\n    });\n  }\n\n  const theme = useTheme();\n\n  const locations = schoolMetadata?.sensors?.map(sensor => (\n    {\n      value: sensor.sensor_id,\n      label: capitalizePhrase(sensor.location_short)\n    }\n  ));\n\n  const returnDialogContent = () => {\n\n    // Helper function to check if the previous field has a value to disable this field\n    const isDisabled = (key) => {\n      const dependencies = {\n        [AirQualityAlertKeys.sensor_id]: null,\n        [AirQualityAlertKeys.datatypekey]: AirQualityAlertKeys.sensor_id,\n        [AirQualityAlertKeys.days_of_week]: AirQualityAlertKeys.datatypekey,\n        [AirQualityAlertKeys.excluded_dates]: AirQualityAlertKeys.datatypekey,\n        [AirQualityAlertKeys.alert_type]: AirQualityAlertKeys.datatypekey,\n        [AirQualityAlertKeys.threshold_value]: AirQualityAlertKeys.datatypekey,\n        [AirQualityAlertKeys.minutespastmidnight]: AirQualityAlertKeys.datatypekey\n      };\n\n      const dependentKey = dependencies[key];\n\n      if (!dependentKey) return false; // if this datatypekey doesnt depend on another one, always return disabled == false\n\n      const placeholder = getAlertPlaceholder(alertTypeKey);\n      return editingAlert[dependentKey] === placeholder[dependentKey];\n    };\n\n    let alertTypeSpecificData = null;\n\n    switch (alertTypeKey) {\n      case AlertTypes.daily.id:\n        alertTypeSpecificData = (\n          <SimplePicker\n            icon={<AccessTimeIcon />}\n            label={AlertTypes.daily.tableColumnHeader}\n            value={editingAlert[AirQualityAlertKeys.minutespastmidnight]}\n            options={HOURS}\n            disabled={isDisabled(AirQualityAlertKeys.minutespastmidnight)}\n            handleChange={handleCurrentMinutesPastMidnightChange}\n          />\n        );\n        break;\n      case AlertTypes.threshold.id:\n        let thresholdSlider = null;\n\n        const currentDataTypeKey = editingAlert[AirQualityAlertKeys.datatypekey];\n        if (currentDataTypeKey && currentDataTypeKey !== \"\") {\n          const dataType = DataTypes[currentDataTypeKey];\n          const dataTypeColorAxis = theme.palette.chart.colorAxes[dataType.color_axis];\n          const { colors, minValue, maxValue, defaultValueForAlert, stepsForThreshold } = dataTypeColorAxis;\n\n          const backgroundCssGradient = generateCssBackgroundGradient({\n            gradientDirection: 'to top',\n            colors: colors\n          });\n\n          // Check if this dataType exists in the AQI_Database\n          // If yes, return value and label accordingly to the marks\n          let marks, database;\n          const invertSelection = editingAlert[AirQualityAlertKeys.alert_type] === ThresholdAlertTypes.below_threshold.id;\n\n          if (currentDataTypeKey === DataTypeKeys.voc) {\n            database = VOC_Database;\n          } else if ([DataTypeKeys.aqi, DataTypeKeys.pm2_5, DataTypeKeys.pm10_raw, DataTypeKeys.co2].includes(currentDataTypeKey)) {\n            database = AQI_Database;\n          }\n\n          if (database) {\n            marks = database\n              .filter((_, index) => index !== 0) // do not return the lowest category\n              .map((elem) => {\n                const val = elem[dataType.threshold_mapping_name].low;\n                return {\n                  value: val,\n                  label: elem.category\n                }\n              })\n          }\n\n          const inputUnit = Object.keys(DataTypes)\n            .filter(key => key === editingAlert[AirQualityAlertKeys.datatypekey])\n            .map(key => DataTypes[key].unit)[0]\n\n          thresholdSlider = (\n            <ThresholdSlider\n              min={minValue}\n              max={maxValue}\n              marks={marks}\n              defaultValue={defaultValueForAlert}\n              value={editingAlert[AirQualityAlertKeys.threshold_value]}\n              stepsForThreshold={stepsForThreshold}\n              disabled={isDisabled(AirQualityAlertKeys.threshold_value)}\n              backgroundCssGradient={backgroundCssGradient}\n              invertSelection={invertSelection}\n              handleChange={handleCurrentThresholdValueChange}\n              inputUnit={inputUnit}\n            />\n          )\n        } else {\n          thresholdSlider = (\n            <ThresholdSlider\n              min={0}\n              max={100}\n              defaultValue={50}\n              value={50}\n              disabled={true}\n              showInput={false}\n            />\n          )\n        }\n\n        alertTypeSpecificData = (\n          <Grid\n            container\n            alignItems=\"stretch\"\n          >\n            <Grid item xs={12}>\n              <Typography\n                variant='body1'\n                fontWeight={500}\n                color=\"text.secondary\"\n                sx={{ mb: 1 }}\n              >\n                Alert me if {DataTypes[currentDataTypeKey]?.name_title || 'selected data type'} is:\n              </Typography>\n            </Grid>\n\n            <Grid item sx={{ mr: 2 }}>\n              <ThresholdTypeToggle\n                thisAlertType={editingAlert[AirQualityAlertKeys.alert_type]}\n                handleChange={handleCurrentAlertTypeChange}\n                disabled={isDisabled(AirQualityAlertKeys.alert_type)}\n                sx={{\n                  height: \"100%\"\n                }}\n              />\n            </Grid>\n\n            {thresholdSlider}\n          </Grid>\n        )\n        break;\n      default:\n        break;\n\n    }\n    return (\n      <Stack\n        direction=\"column\"\n        spacing={3}\n        mt={1}\n        width=\"100%\"\n      >\n        {\n          DialogData[crudType]?.contentText ?\n            (\n              <DialogContentText fontWeight=\"500\">\n                {DialogData[crudType].contentText}\n              </DialogContentText>\n            ) : null\n        }\n\n        <Stack\n          direction=\"row\"\n          spacing={1}\n          alignItems=\"center\"\n        >\n          <Switch\n            size='small'\n            checked={editingAlert[AirQualityAlertKeys.is_enabled]}\n            onChange={handleIsEnabledChange}\n            disabled={isDisabled(AirQualityAlertKeys.is_enabled)}\n          />\n          <Typography\n            fontWeight={500}\n            color=\"text.secondary\"\n          >\n            {returnFormattedStatusString(editingAlert)}\n          </Typography>\n        </Stack>\n\n        <SimplePicker\n          icon={<PlaceIcon />}\n          label={SharedColumnHeader.location}\n          value={editingAlert[AirQualityAlertKeys.sensor_id]}\n          options={locations}\n          disabled={isDisabled(AirQualityAlertKeys.sensor_id)}\n          handleChange={handleCurrentSensorChange}\n        />\n\n        <SimplePicker\n          icon={<CategoryIcon />}\n          label={SharedColumnHeader.dataType}\n          value={editingAlert[AirQualityAlertKeys.datatypekey]}\n          options={allowedDataTypesForSensor}\n          disabled={isDisabled(AirQualityAlertKeys.datatypekey)}\n          handleChange={handleCurrentDataTypeChange}\n        />\n\n        <DaysOfWeekToggle\n          value={editingAlert[AirQualityAlertKeys.days_of_week]}\n          disabled={isDisabled(AirQualityAlertKeys.days_of_week)}\n          handleChange={handleCurrentDaysOfWeekChange}\n        />\n\n        <MultiDaysCalendarPicker\n          selectedDates={editingAlert[AirQualityAlertKeys.excluded_dates] || []}\n          disabled={isDisabled(AirQualityAlertKeys.excluded_dates)}\n          handleChange={handleExcludedDatesChange}\n        />\n\n        {alertTypeSpecificData}\n\n      </Stack>\n    );\n  }\n\n  const handleAlertModification = ({ passedCrudType }) => {\n    const handleFetchError = (error) => {\n      setSeverity(AlertSeverity.error);\n      setMessage(DialogData[passedCrudType].errorMessage);\n      setShowNotification(true);\n    };\n\n    const handleFetchSuccess = () => {\n      setSeverity(AlertSeverity.success);\n      setMessage(DialogData[passedCrudType].successMessage);\n      setShowNotification(true);\n      handleClose();\n    }\n\n    switch (passedCrudType) {\n      case CrudTypes.add:\n        fetchDataFromURL({\n          url: getAlertsApiUrl({\n            endpoint: GeneralAPIendpoints.alerts,\n            school_id: currentSchoolID\n          }),\n          restMethod: RESTmethods.POST,\n          body: editingAlert\n        }).then((data) => {\n          setAlerts(prevAlerts => [...prevAlerts, data]);\n          handleFetchSuccess();\n\n          const placeholder = getAlertPlaceholder(alertTypeKey);\n          setSelectedAlert(placeholder);\n          setEditingAlert(placeholder);\n        }).catch((error) => handleFetchError(error));\n\n        break;\n      case CrudTypes.edit:\n        const alert_id = selectedAlert[AirQualityAlertKeys.id];\n        fetchDataFromURL({\n          url: getAlertsApiUrl({\n            endpoint: GeneralAPIendpoints.alerts,\n            school_id: currentSchoolID,\n            alert_id: alert_id\n          }),\n          restMethod: RESTmethods.PUT,\n          body: editingAlert\n        }).then((data) => {\n          setAlerts(prevAlerts =>\n            prevAlerts.map(alert =>\n              alert.id === alert_id ? data : alert\n            )\n          );\n          handleFetchSuccess();\n        }).catch((error) => handleFetchError(error));\n\n        break;\n      case CrudTypes.delete:\n        fetchDataFromURL({\n          url: getAlertsApiUrl({\n            endpoint: GeneralAPIendpoints.alerts,\n            school_id: currentSchoolID,\n            alert_id: selectedAlert.id\n          }),\n          restMethod: RESTmethods.DELETE\n        }).then(() => {\n          setAlerts(prevAlerts => prevAlerts.filter(alert => alert.id !== selectedAlert.id));\n          handleFetchSuccess();\n        }).catch((error) => handleFetchError(error));\n\n        break;\n      default:\n        break;\n    }\n  }\n\n  // Disable / Enable save button depends on context\n  useEffect(() => {\n    switch (crudType) {\n      case CrudTypes.add:\n        const placeholder = getAlertPlaceholder(alertTypeKey);\n\n        if (editingAlert[AirQualityAlertKeys.sensor_id] === placeholder[AirQualityAlertKeys.sensor_id] ||\n          editingAlert[AirQualityAlertKeys.datatypekey] === placeholder[AirQualityAlertKeys.datatypekey]) {\n          if (alertTypeKey === AlertTypes.daily.id) {\n            setShouldDisableButton(editingAlert[AirQualityAlertKeys.minutespastmidnight] === placeholder[AirQualityAlertKeys.minutespastmidnight]);\n          } else {\n            setShouldDisableButton(true);\n          }\n        } else {\n          if (alertTypeKey === AlertTypes.daily.id) {\n            setShouldDisableButton(editingAlert[AirQualityAlertKeys.minutespastmidnight] === placeholder[AirQualityAlertKeys.minutespastmidnight]);\n          } else {\n            setShouldDisableButton(false);\n          }\n        }\n        break;\n\n      case CrudTypes.edit:\n        setShouldDisableButton(isEqual(selectedAlert, editingAlert));\n        break;\n      default:\n        setShouldDisableButton(false);\n        break;\n    }\n  }, [crudType, selectedAlert, editingAlert, alertTypeKey]);\n\n  const smallScreen = useMediaQuery((theme) => theme.breakpoints.down('sm'));\n\n  return (\n    <Dialog\n      open={openAlertModificationDialog}\n      onClose={handleClose}\n      aria-labelledby=\"alert-modification-dialog\"\n      maxWidth=\"xs\"\n      fullWidth\n      fullScreen={smallScreen}\n    >\n      <DialogTitle id=\"alert-modification-dialog\">\n        {DialogData[crudType]?.title}\n      </DialogTitle>\n\n      <DialogContent>\n        {returnDialogContent()}\n      </DialogContent>\n      <DialogActions sx={{\n        justifyContent: \"space-between\"\n      }}>\n        {\n          crudType === CrudTypes.edit ? (\n            <AlertDeletionDialog\n              onConfirmedDelete={() => {\n                handleAlertModification({ passedCrudType: CrudTypes.delete })\n              }}\n            />\n          ) : null\n        }\n\n        <Stack direction=\"row\" width=\"100%\" justifyContent=\"end\">\n          <Button\n            onClick={handleClose}\n            sx={{\n              color: theme.palette.text.secondary\n            }}\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={() => {\n              handleAlertModification({ passedCrudType: crudType })\n            }}\n            color=\"primary\"\n            disabled={shouldDisableButton}\n          >\n            Save Edit\n          </Button>\n        </Stack>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default AlertModificationDialog;\n\n\n","import { useContext, useState } from 'react';\nimport { Box, Button, IconButton, Stack, Table, TableBody, TableCell, TableHead, TableRow, Tooltip, Alert, Grow, Switch } from '@mui/material';\n\nimport EditIcon from '@mui/icons-material/Edit';\nimport AddAlarmIcon from '@mui/icons-material/AddAlarm';\n\nimport { useTheme } from '@emotion/react';\nimport { AirQualityAlertKeys, getAlertPlaceholder, useAirQualityAlert } from '../../../ContextProviders/AirQualityAlertContext';\n\nimport AlertTypes from './AlertTypes';\nimport { ThresholdAlertTypes } from './AlertTypes';\n\nimport { isValidArray } from '../../../Utils/UtilFunctions';\nimport AlertModificationDialog from './AlertModificationDialog/AlertModificationDialog';\n\nimport { returnHoursFromMinutesPastMidnight, CrudTypes, SharedColumnHeader } from './Utils';\nimport { TransitionGroup } from 'react-transition-group';\nimport { DataTypes } from '../../../Utils/AirQuality/DataTypes';\nimport { DAYS_OF_WEEK } from './AlertModificationDialog/DAYS_OF_WEEK';\nimport { fetchDataFromURL } from '../../../API/ApiFetch';\nimport { GeneralAPIendpoints, RESTmethods } from '../../../API/Utils';\nimport { DashboardContext } from '../../../ContextProviders/DashboardContext';\nimport { AlertSeverity, useNotificationContext } from '../../../ContextProviders/NotificationContext';\nimport { getAlertsApiUrl } from '../../../API/ApiUrls';\n\nconst returnDaysOfWeekString = (days_of_week) => {\n  if (!days_of_week || !isValidArray(days_of_week)) return \"N/A\";\n\n  // Case where all days are selected\n  if (days_of_week.length === DAYS_OF_WEEK.length) return \"Everyday\";\n\n  // Check if two days are missing and if both are weekend days\n  const missingDays = DAYS_OF_WEEK.filter(d => !days_of_week.includes(d.value));\n  if (missingDays.length === 2 && missingDays.every(d => [5, 6].includes(d.value))) {\n    return \"Only weekdays\";\n  }\n\n  // Default case: map the selected days to their short labels\n  return days_of_week\n    .map(day => DAYS_OF_WEEK.find(d => d.value === day)?.label.slice(0, 2))\n    .join(', ');\n};\n\nconst AlertsTable = (props) => {\n\n  const { selectedAlert, setSelectedAlert, setAlerts } = useAirQualityAlert();\n  const { currentSchoolID } = useContext(DashboardContext);\n  const { setShowNotification, setMessage, setSeverity } = useNotificationContext();\n\n  const { alertTypeKey, alertsForTable } = props;\n\n  const theme = useTheme();\n\n  const [openAlertModificationDialog, setOpenAlertModificationDialog] = useState(false);\n  const [crudType, setCrudType] = useState(null);\n\n  const handleModifyClick = ({ alert, crudType }) => {\n    setSelectedAlert(alert);\n    setCrudType(crudType);\n    setOpenAlertModificationDialog(true);\n  };\n\n  const handleClose = () => {\n    setOpenAlertModificationDialog(false);\n    setSelectedAlert(getAlertPlaceholder(alertTypeKey));\n  }\n\n  const handleEnableClick = ({ alert }) => {\n    const currentIsEnabled = alert[AirQualityAlertKeys.is_enabled];\n    const newIsEnabled = !currentIsEnabled;\n\n    fetchDataFromURL({\n      url: getAlertsApiUrl({\n        endpoint: GeneralAPIendpoints.alerts,\n        school_id: currentSchoolID,\n        alert_id: alert[AirQualityAlertKeys.id]\n      }),\n      restMethod: RESTmethods.PUT,\n      body: {\n        ...alert,\n        [AirQualityAlertKeys.is_enabled]: newIsEnabled\n      }\n    }).then((data) => {\n      setAlerts(prevAlerts =>\n        prevAlerts.map(prevAlert =>\n          prevAlert[AirQualityAlertKeys.id] === alert[AirQualityAlertKeys.id] ? data : prevAlert\n        )\n      );\n      setSeverity(AlertSeverity.success);\n      setMessage(`This alert will be ${newIsEnabled ? \"enabled\" : \"disabled\"}`);\n      setShowNotification(true);\n    }).catch((error) => {\n      setSeverity(AlertSeverity.error);\n      setMessage(`There was an error ${newIsEnabled ? \"enabling\" : \"disabling\"} this alert, try again!`);\n      setShowNotification(true);\n    });\n  }\n\n  return (\n    <>\n      <Stack spacing={2} alignItems=\"center\">\n        <Box sx={{ width: \"100%\" }}>\n          {\n            isValidArray(alertsForTable) ?\n              (\n                <Table size=\"small\" sx={{ my: 1 }}>\n                  <TableHead>\n                    <TableRow>\n                      <TableCell sx={{ px: 0 }} />\n\n                      <TableCell>\n                        {SharedColumnHeader.location}\n                      </TableCell>\n\n                      <TableCell>\n                        {SharedColumnHeader.dataType}\n                      </TableCell>\n\n                      <TableCell>\n                        {SharedColumnHeader.selectedDaysOfWeek}\n                      </TableCell>\n\n                      <TableCell>\n                        {AlertTypes[alertTypeKey]?.tableColumnHeader || \"\"}\n                      </TableCell>\n\n                      <TableCell sx={{ px: 0 }} />\n                    </TableRow>\n                  </TableHead>\n\n                  <TransitionGroup component={TableBody}>\n                    {isValidArray(alertsForTable) ? alertsForTable.map((alert, index) => (\n                      <Grow key={index}>\n                        <TableRow\n                          sx={{\n                            background: alert[AirQualityAlertKeys.id] === selectedAlert[AirQualityAlertKeys.id] && theme.palette.background.NYUpurpleLight,\n                            textDecoration: alert[AirQualityAlertKeys.is_enabled] === false ? \"line-through\" : \"none\"\n                          }}\n                        >\n                          <TableCell sx={{ px: 0 }}>\n                            <Tooltip\n                              title={`Click to ${alert[AirQualityAlertKeys.is_enabled] ? \"disable\" : \"enable\"} alert`}\n                            >\n                              <Switch\n                                size='small'\n                                checked={alert[AirQualityAlertKeys.is_enabled]}\n                                onClick={() => {\n                                  handleEnableClick({ alert })\n                                }}\n                              />\n                            </Tooltip>\n\n                            <Tooltip title=\"Edit Alert\">\n                              <IconButton\n                                aria-label=\"edit\"\n                                size=\"small\"\n                                sx={{ \"&:hover,:focus\": { color: theme.palette.primary.main } }}\n                                onClick={() => handleModifyClick({ alert, crudType: CrudTypes.edit })}\n                              >\n                                <EditIcon />\n                              </IconButton>\n                            </Tooltip>\n                          </TableCell>\n\n                          <TableCell sx={{ textTransform: 'capitalize' }}>\n                            {alert[AirQualityAlertKeys.location_short]}\n                          </TableCell>\n\n                          <TableCell>\n                            {\n                              Object.keys(DataTypes)\n                                .filter(key => key === alert[AirQualityAlertKeys.datatypekey])\n                                .map(key => DataTypes[key].name_title)[0]\n                            }\n                          </TableCell>\n\n                          <TableCell>\n                            {returnDaysOfWeekString(alert[AirQualityAlertKeys.days_of_week])}\n                          </TableCell>\n\n                          {alertTypeKey === AlertTypes.threshold.id ? (\n                            <TableCell>\n                              {ThresholdAlertTypes[alert[AirQualityAlertKeys.alert_type]].sign}{alert[AirQualityAlertKeys.threshold_value]}\n                              &nbsp;\n                              {\n                                Object.keys(DataTypes)\n                                  .filter(key => key === alert[AirQualityAlertKeys.datatypekey])\n                                  .map(key => DataTypes[key].unit)[0]\n                              }\n                            </TableCell>\n                          ) : null}\n\n                          {alertTypeKey === AlertTypes.daily.id ? (\n                            <TableCell>\n                              {returnHoursFromMinutesPastMidnight(alert[AirQualityAlertKeys.minutespastmidnight])}\n                            </TableCell>\n                          ) : null}\n\n                          <TableCell sx={{ px: 0 }}>\n\n                          </TableCell>\n                        </TableRow>\n                      </Grow>\n\n                    )) : null\n                    }\n                  </TransitionGroup>\n                </Table>\n              ) : (\n                <Alert\n                  severity='warning'\n                  sx={{\n                    mt: 2\n                  }}>\n                  No {AlertTypes[alertTypeKey].name.toLowerCase()} alert has been set up\n                </Alert>\n              )\n          }\n        </Box>\n\n        <Button\n          variant=\"outlined\"\n          startIcon={<AddAlarmIcon />}\n          fullWidth\n          sx={{ maxWidth: \"sm\", textTransform: 'uppercase' }}\n          onClick={() => handleModifyClick({\n            alert: getAlertPlaceholder(alertTypeKey), crudType: CrudTypes.add\n          })}\n        >\n          Add Alert\n        </Button>\n      </Stack>\n\n      <AlertModificationDialog\n        alertTypeKey={alertTypeKey}\n        crudType={crudType}\n        openAlertModificationDialog={openAlertModificationDialog}\n        handleClose={handleClose}\n      />\n    </>\n  );\n};\n\nexport default AlertsTable;","import { useState } from 'react';\nimport { Box, Tab, useMediaQuery } from '@mui/material';\n\nimport StyledTabs from '../../StyledTabs';\nimport AlertsTable from './AlertsTable';\n\nimport { getAlertPlaceholder, useAirQualityAlert } from '../../../ContextProviders/AirQualityAlertContext';\nimport AlertTypes from './AlertTypes';\nimport { isValidArray } from '../../../Utils/UtilFunctions';\n\nfunction AlertTab(props) {\n  const { children, value, index, alertType, alertsArray, ...other } = props;\n\n  return (\n    <Box\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`alert-tabpanel-${alertType.id}`}\n      aria-labelledby={`alert-tab-${alertType.id}`}\n      width=\"100%\"\n      {...other}\n    >\n      <AlertsTable\n        alertTypeKey={alertType.id}\n        alertsForTable={alertsArray}\n      />\n    </Box>\n  );\n}\n\nexport default function AlertsTabs() {\n  const smallScreen = useMediaQuery((theme) => theme.breakpoints.down('sm'));\n  const [currentTab, setCurrentTab] = useState(0);\n\n  const { setSelectedAlert } = useAirQualityAlert();\n\n  const handleTabChange = (_, newVal) => {\n    setCurrentTab(newVal);\n    setSelectedAlert(\n      getAlertPlaceholder(AlertTypes[Object.keys(AlertTypes)?.[newVal]]?.id)\n    );\n  };\n\n  const { alerts } = useAirQualityAlert();\n\n  const returnFilteredAlertsBasedOnAlertType = (alertTypeKey) => {\n    const filteredAlerts = alerts.filter((alert) => {\n      const alertType = alert?.alert_type?.toLowerCase();\n      if (alertType.includes(alertTypeKey)) return alert;\n      else return null;\n    });\n\n    const alertsLength = isValidArray(filteredAlerts) ? filteredAlerts.length : \"0\";\n\n    return {\n      array: filteredAlerts,\n      alertsLength\n    }\n  }\n\n  return (\n    <Box>\n      <StyledTabs\n        value={currentTab}\n        onChange={handleTabChange}\n        variant={smallScreen ? 'fullWidth' : 'standard'}\n        smallFontSize=\"0.825rem\"\n      >\n        {Object.values(AlertTypes).map((type) => {\n          const filteredAlerts = returnFilteredAlertsBasedOnAlertType(type.id);\n          return (\n            <Tab\n              key={type.id}\n              value={type.index}\n              icon={type.icon}\n              label={`${type.name} (${filteredAlerts?.alertsLength})`}\n              iconPosition=\"start\"\n              sx={{ py: 0 }}\n            />\n          )\n        }\n        )}\n      </StyledTabs>\n\n      {Object.values(AlertTypes).map((type) => {\n        const filteredAlerts = returnFilteredAlertsBasedOnAlertType(type.id);\n        return (\n          <AlertTab\n            key={type.id}\n            alertType={type}\n            value={currentTab}\n            index={type.index}\n            alertsArray={filteredAlerts.array}\n          />\n        )\n      }\n      )}\n    </Box>\n  );\n}\n","import { Stack } from '@mui/material';\n\nimport NotificationImportantIcon from '@mui/icons-material/NotificationImportant';\nimport * as Tracking from '../../../Utils/Tracking';\n\nimport CustomDialog from '../../CustomDialog/CustomDialog';\nimport EmailsInput from './EmailsInput';\nimport AlertsTabs from './AlertsTabs';\nimport { AirQualityAlertProvider } from '../../../ContextProviders/AirQualityAlertContext';\n\nexport default function AirQualityAlerts() {\n  return (\n    <CustomDialog\n      buttonIcon={<NotificationImportantIcon sx={{ fontSize: '1rem' }} />}\n      buttonLabel=\"Alerts\"\n      trackingEvent={Tracking.Events.rawDatasetButtonClicked}\n      dialogTitle=\"Air quality alerts\"\n    >\n      <Stack width=\"100%\" spacing={5}>\n        <AirQualityAlertProvider>\n          <AlertsTabs />\n        </AirQualityAlertProvider>\n\n        <EmailsInput />\n      </Stack>\n\n    </CustomDialog>\n  );\n}","// disable eslint for this file\n/* eslint-disable */\nimport { useState, useEffect, useContext } from 'react';\nimport parse from 'html-react-parser';\nimport ChartComponentWrapper from '../Graphs/ChartComponentWrapper';\nimport UppercaseTitle from '../Components/UppercaseTitle';\nimport CommentSection from '../Components/CommentSection';\nimport { HYVOR_PAGE_NAME } from '../Utils/GlobalVariables';\nimport { Button, Box, Typography, Container, Divider, Chip, Grid, Tooltip, Stack, Skeleton } from '@mui/material';\n\nimport { useTheme } from '@mui/material/styles';\n\nimport ThemePreferences from '../Themes/ThemePreferences';\n\nimport AirQualityIndexLegendQuickGlance from '../Components/AirQuality/AirQualityIndexLegendQuickGlance';\n\nimport jsonData from '../section_data.json';\n\nimport PersonIcon from '@mui/icons-material/Person';\nimport EmailIcon from '@mui/icons-material/Email';\nimport PublishedWithChangesIcon from '@mui/icons-material/PublishedWithChanges';\nimport BarChartIcon from '@mui/icons-material/BarChart';\nimport CommentIcon from '@mui/icons-material/Comment';\n\nimport { replacePlainHTMLWithMuiComponents } from '../Utils/UtilFunctions';\nimport DatasetDownloadDialog from '../Components/DatasetDownload/DatasetDownloadDialog';\nimport ScreenDropDownMenu from '../Components/AirQuality/AirQualityScreen/ScreenDropDownMenu';\n\nimport { scrollToSection } from '../Components/Header/MenuItemAsNavLink';\nimport FullWidthBox from '../Components/FullWidthBox';\n\nimport * as Tracking from '../Utils/Tracking';\n\nimport CurrentAQIGrid from '../Components/AirQuality/CurrentAQIGrid';\nimport SchoolSelector from '../Components/SchoolSelector';\n\nimport LoadingAnimation from '../Components/LoadingAnimation';\n\nimport { MetadataContext } from '../ContextProviders/MetadataContext';\n\nimport NYUADbanner from './Embeds/NYUADbanner';\n\nimport { DashboardContext } from '../ContextProviders/DashboardContext';\nimport { PreferenceContext } from '../ContextProviders/PreferenceContext';\n\nimport AQIexplanation from '../Components/AirQuality/AQIexplanation';\nimport { DateRangePickerProvider } from '../ContextProviders/DateRangePickerContext';\nimport { AxesPickerProvider } from '../ContextProviders/AxesPickerContext';\nimport AirQualityAlerts from '../Components/AirQuality/AirQualityAlerts/AirQualityAlert';\nimport { NYUAD } from '../Utils/GlobalVariables';\n\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\n\n// Custom Chip component to display metadata\nexport const CustomChip = (props) => {\n  const { tooltipTitle, label, ...otherProps } = props;\n  return (\n    <Tooltip title={tooltipTitle} enterDelay={0} leaveDelay={200}>\n      <Chip\n        size=\"small\"\n        label={label || <Skeleton variant=\"text\" sx={{ minWidth: '5rem' }} />}\n        {...otherProps}\n      />\n    </Tooltip>\n  );\n}\n\nconst Project = () => {\n  let lastUpdate;\n\n  const { commentCounts, fetchCommentCounts, setCommentCounts, setChartsTitlesList } = useContext(MetadataContext);\n\n  const { schoolMetadata, current, allChartsData, loadMoreCharts, currentSchoolID, setLoadMoreCharts } = useContext(DashboardContext);\n  const { themePreference, temperatureUnitPreference } = useContext(PreferenceContext);\n\n  const [displayCommentSection, setDisplayCommentSection] = useState(false);\n  const [displayMapOfSensors, setDisplayMapOfSensors] = useState(false);\n\n  // If NYUAD, display comment section and map of sensors\n  useEffect(() => {\n    if (!schoolMetadata) return;\n\n    const isNYUAD = schoolMetadata.school_id === NYUAD;\n    setDisplayCommentSection(isNYUAD);\n    setDisplayMapOfSensors(isNYUAD);\n\n    // Fetch comment count for NYUAD\n    if (isNYUAD && !commentCounts) {\n      fetchCommentCounts().then((data) => {\n        setCommentCounts(data);\n      });\n    }\n  }, [schoolMetadata])\n\n  // Update the chart title list for quick navigation\n  useEffect(() => {\n    if (!allChartsData) return;\n\n    const chartsTitles = Object.keys(allChartsData).map((key, index) => ({ chartTitle: allChartsData[key]?.title || \"\", chartID: `chart-${index + 1}` }));\n\n    setChartsTitlesList(chartsTitles);\n  }, [allChartsData]);\n\n  const theme = useTheme();\n\n  const getDashboardTitle = () => {\n    if (schoolMetadata?.school_id) return `Air Quality | ${schoolMetadata?.school_id}`\n  }\n\n  const displayProjectDescription = () => {\n    if (schoolMetadata) return (\n      <Typography\n        component=\"div\"\n        variant=\"body1\"\n        color=\"text.secondary\"\n        sx={{\n          textAlign: 'justify', pb: 2, mb: 0, \"& table *\": {\n            color: `${theme.palette.text.secondary}`\n          }\n        }}\n        gutterBottom\n      >\n        {\n          parse(schoolMetadata.description || '', {\n            replace: replacePlainHTMLWithMuiComponents,\n          })\n        }\n      </Typography>\n    )\n    else {\n      return (\n        Array.from({ length: 3 }).map((_, index) => (\n          <Skeleton key={index} variant='text' />\n        ))\n      )\n    }\n  };\n\n  const displayCharts = () => {\n    // Display if there are at least one chart\n    if (Object.keys(allChartsData).length > 0) {\n      return (\n        <>\n          {Object.keys(allChartsData).map((chartID, index) => (\n            <FullWidthBox\n              key={chartID}\n              backgroundColor={index % 2 !== 0 ? 'customAlternateBackground' : ''}\n            >\n              <Container\n                sx={{ pt: 4, pb: 4 }}\n                height=\"auto\"\n                className={themePreference === ThemePreferences.dark ? 'dark' : ''}\n                id={`chart-${index + 1}`}\n              >\n\n                <AxesPickerProvider>\n                  <DateRangePickerProvider>\n                    <ChartComponentWrapper\n                      chartTitle={allChartsData[chartID].title}\n                      generalChartSubtitle={allChartsData[chartID].subtitle}\n                      generalChartReference={allChartsData[chartID].reference}\n                      chartData={{\n                        chartIndex: index,\n                        ...allChartsData[chartID],\n                      }}\n                      chartID={chartID}\n                      chartIndex={index}\n                    />\n                  </DateRangePickerProvider>\n                </AxesPickerProvider>\n                {\n                  // Optionally display the button to load more charts at the bottom of the last chart\n                  // (if not already fetched every chart)\n                  displayLoadMoreButton(index === Object.keys(allChartsData).length - 1)\n                }\n              </Container>\n            </FullWidthBox>\n          ))}\n\n        </>\n      );\n    } else {\n      // Else display loading animation\n      return <LoadingAnimation optionalText=\"Loading Visualizations\" />;\n    }\n  };\n\n  const displayLoadMoreButton = (isLastChartInList) => {\n    if (isLastChartInList === true && loadMoreCharts === false) {\n      return (\n        <Stack sx={{ mt: 6, mx: 'auto', maxWidth: 'sm' }}>\n          <Button\n            variant=\"contained\"\n            onClick={() => {\n              setLoadMoreCharts(true);\n            }}\n          >\n            <KeyboardArrowDownIcon sx={{ fontSize: '1rem' }} />&nbsp;Load More Charts\n          </Button>\n        </Stack>\n      )\n    }\n    else {\n      return null;\n    }\n  }\n\n  const GridOfMetadataChips = () => {\n    return (\n      <Grid container spacing={1} sx={{ mt: -3, pb: 3 }}>\n        <Grid item>\n          <SchoolSelector />\n        </Grid>\n\n        <Grid item>\n          <CustomChip\n            icon={<PersonIcon />}\n            label={schoolMetadata?.contactPerson}\n            tooltipTitle=\"Contact Person\"\n          />\n        </Grid>\n\n        <Grid item>\n          <CustomChip\n            icon={<EmailIcon />}\n            label={schoolMetadata?.contactEmail}\n            tooltipTitle=\"Contact Email\"\n            component=\"a\"\n            href={`mailto:${schoolMetadata?.contactEmail}`}\n            clickable\n          />\n        </Grid>\n\n        <Grid item>\n          <CustomChip\n            icon={<BarChartIcon />}\n            label={`${Object.keys(allChartsData).length || \"...\"} Chart${Object.keys(allChartsData).length !== 1 ? 's' : ''}`}\n            tooltipTitle=\"Number of Charts\"\n            onClick={() => {\n              scrollToSection(jsonData.charts.id);\n              Tracking.sendEventAnalytics(Tracking.Events.internalNavigation,\n                {\n                  destination_id: jsonData.charts.id,\n                  destination_label: jsonData.chartData?.toString(),\n                  origin_id: 'chip'\n                });\n            }}\n          />\n        </Grid>\n\n        {\n          lastUpdate &&\n          <Grid item>\n            <CustomChip\n              icon={<PublishedWithChangesIcon />}\n              label={`Last update: ${lastUpdate}`}\n              tooltipTitle=\"Last Update\" />\n          </Grid>\n        }\n\n        {(displayCommentSection === true && commentCounts !== null) ?\n          (\n            <Grid item>\n              <CustomChip\n                icon={<CommentIcon />}\n                label={`${commentCounts[HYVOR_PAGE_NAME]} Comment${commentCounts[HYVOR_PAGE_NAME] > 1 ? \"s\" : \"\"}`}\n                tooltipTitle=\"Number of Comments\"\n                onClick={() => {\n                  scrollToSection(jsonData.commentSection.id);\n                  Tracking.sendEventAnalytics(Tracking.Events.internalNavigation,\n                    {\n                      destination_id: jsonData.commentSection.id,\n                      destination_label: jsonData.commentSection.toString(),\n                      origin_id: 'chip'\n                    })\n                }}\n              />\n            </Grid>\n          ) : null}\n      </Grid>\n    )\n  }\n\n  return (\n    <Box width=\"100%\">\n      <AirQualityIndexLegendQuickGlance />\n\n      <FullWidthBox backgroundColor='customAlternateBackground'>\n        <Container sx={{ pt: 2, pb: 2 }}>\n          <UppercaseTitle text={getDashboardTitle()} />\n          <GridOfMetadataChips />\n\n          {displayMapOfSensors === true &&\n            (\n              <NYUADbanner\n                initialNyuadCurrentData={current}\n                isOnBannerPage={false}\n                themePreference={themePreference}\n                minMapHeight={\"250px\"}\n              />\n            )\n          }\n\n          {displayMapOfSensors === false &&\n            (<Box textAlign=\"center\" sx={{ mb: 2 }}>\n              <CurrentAQIGrid\n                currentSensorsData={current}\n                isScreen={false}\n                temperatureUnitPreference={temperatureUnitPreference}\n              />\n            </Box>)\n          }\n\n          {displayProjectDescription()}\n\n          <Grid container spacing={1}>\n            <Grid item>\n              <ScreenDropDownMenu />\n            </Grid>\n            <Grid item>\n              <DatasetDownloadDialog />\n            </Grid>\n            {\n              // only show Air Quality Alerts for schools other than nyuad at the moment\n              (currentSchoolID && currentSchoolID !== NYUAD) ? <Grid item>\n                <AirQualityAlerts />\n              </Grid> : null\n            }\n\n          </Grid>\n\n          <AQIexplanation />\n\n        </Container>\n      </FullWidthBox>\n\n      <Box id={jsonData.charts.id}>\n        {displayCharts(allChartsData)}\n      </Box>\n      <Divider />\n\n      {displayCommentSection === true &&\n        <FullWidthBox id={jsonData.commentSection.id} sx={{ pt: 3, pb: 4 }}>\n          <CommentSection pageID={HYVOR_PAGE_NAME} />\n        </FullWidthBox>\n      }\n    </Box >\n  );\n};\n\nexport default Project;\n","// disable eslint for this file\n/* eslint-disable */\n\nimport { useEffect, useContext } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\n\nimport { fetchDataFromURL } from \"../API/ApiFetch\";\nimport Project from \"./Project\";\nimport { getApiUrl, getChartApiUrl, getHistoricalChartApiUrl } from \"../API/ApiUrls\";\nimport { ChartAPIendpointsOrder, GeneralAPIendpoints } from \"../API/Utils\";\nimport { fetchAndProcessCurrentSensorsData } from \"../API/ApiFetch\";\nimport { MetadataContext } from \"../ContextProviders/MetadataContext\";\nimport { DashboardContext } from \"../ContextProviders/DashboardContext\";\n\nimport { UserContext } from \"../ContextProviders/UserContext\";\nimport { LocalStorage } from \"../Utils/LocalStorage\";\nimport { AppRoutes } from \"../Utils/AppRoutes\";\nimport { CITIESair, NUMBER_OF_CHARTS_TO_LOAD_INITIALLY, NYUAD } from \"../Utils/GlobalVariables\";\nimport { AlertSeverity, useNotificationContext } from \"../ContextProviders/NotificationContext\";\n\nconst Dashboard = () => {\n  const { school_id_param } = useParams();\n  const navigate = useNavigate();\n\n  const location = useLocation();\n  const locationPath = location.pathname;\n\n  // Update the page's title based on school_id_param\n  useEffect(() => {\n    if (!school_id_param) return;\n\n    document.title = `${CITIESair} | ${school_id_param.toUpperCase()}`;\n  }, [school_id_param]);\n\n  // Update current page type\n  const { setCurrentPage } = useContext(MetadataContext);\n  useEffect(() => {\n    setCurrentPage(AppRoutes.dashboard);\n  }, []);\n\n  const {\n    currentSchoolID, setCurrentSchoolID,\n    schoolMetadata, setSchoolMetadata,\n    current, setCurrent,\n    allChartsData, setIndividualChartData,\n    loadMoreCharts\n  } = useContext(DashboardContext);\n  const { user } = useContext(UserContext);\n\n  const { setShowNotification, setMessage, setSeverity } = useNotificationContext();\n\n  useEffect(() => {\n    // NYUAD is public --> skip authentication and just fetch data\n    if (school_id_param === NYUAD) {\n      fetchInitialDataForDashboard(NYUAD);\n      setCurrentSchoolID(NYUAD);\n      return;\n    };\n\n    if (user.checkedAuthentication === true && user.authenticated === false) {\n      navigate(`${AppRoutes.login}?${AppRoutes.redirectQuery}=${locationPath}`);\n    }\n\n    const allowedSchools = user.allowedSchools;\n\n    if (Array.isArray(allowedSchools) && allowedSchools.length > 0) {\n      // If no school_id_param is given\n      if (!school_id_param) {\n        let school_id;\n\n        // If there has been a previouslySelectedSchoolID, then load dashboard data for this one\n        const previouslySelectedSchoolID = localStorage.getItem(LocalStorage.schoolID);\n\n        if (allowedSchools.map((school) => school.school_id).includes(previouslySelectedSchoolID)) {\n          school_id = previouslySelectedSchoolID;\n        }\n        // If not existed yet, then just get the first school in the list\n        else {\n          school_id = allowedSchools[0].school_id;\n          setCurrentSchoolID(school_id);\n          localStorage.setItem(LocalStorage.schoolID, school_id);\n        }\n\n        navigate(school_id, { replace: true }); // navigate to the correct url: /dashboard/:school_id_param\n\n        // If there is no schoolMetadata or current or chartData, then fetch them\n        if (!(!schoolMetadata && !current && !allChartsData)) fetchInitialDataForDashboard(school_id);\n      }\n      // If there is school_id_param, check if school_id_param is in the allowedSchools\n      else {\n        if (allowedSchools.map((school) => school.school_id).includes(school_id_param)) {\n          setCurrentSchoolID(school_id_param);\n          fetchInitialDataForDashboard(school_id_param);\n          localStorage.setItem(LocalStorage.schoolID, school_id_param);\n        }\n        // If the school_id_param is not in the allowedSchools\n        else {\n          navigate(AppRoutes[404], { replace: true });\n          setShowNotification(true);\n          setMessage(\"You don't have permission to view this school or this school does not exist.\");\n          setSeverity(AlertSeverity.error);\n        }\n      }\n    }\n  }, [user, school_id_param]);\n\n  const fetchInitialDataForDashboard = async (school_id) => {\n    try {\n      setSchoolMetadata();\n      setCurrent();\n\n      const response = await Promise.all([\n        fetchDataFromURL({\n          url: getApiUrl({\n            endpoint: GeneralAPIendpoints.schoolmetadata,\n            school_id: school_id\n          })\n        }),\n        fetchAndProcessCurrentSensorsData(getApiUrl({\n          endpoint: GeneralAPIendpoints.current,\n          school_id: school_id\n        }))\n      ])\n\n      setSchoolMetadata(response[0]);\n      setCurrent(response[1]);\n\n    } catch (error) {\n      console.log(error);\n    }\n\n    const chartsToFetch = loadMoreCharts ? ChartAPIendpointsOrder : ChartAPIendpointsOrder.slice(0, NUMBER_OF_CHARTS_TO_LOAD_INITIALLY);\n    chartsToFetch.forEach((endpoint, index) => {\n      setIndividualChartData(index, {}); // set empty chartData to create a placeholder for this chart\n\n      fetchDataFromURL({\n        url: getChartApiUrl({\n          endpoint: endpoint,\n          school_id: school_id\n        })\n      })\n        .then(data => {\n          setIndividualChartData(index, data);\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n    });\n  }\n\n  useEffect(() => {\n    if (loadMoreCharts === true) {\n      const restOfCharts = ChartAPIendpointsOrder.slice(NUMBER_OF_CHARTS_TO_LOAD_INITIALLY);\n      restOfCharts.forEach((endpoint, index) => {\n        const chartIndexInPage = NUMBER_OF_CHARTS_TO_LOAD_INITIALLY + index;\n        setIndividualChartData(chartIndexInPage, {}); // set empty chartData to create a placeholder for this chart\n\n        fetchDataFromURL({\n          url: getChartApiUrl({\n            endpoint: endpoint,\n            school_id: currentSchoolID\n          })\n        })\n          .then(data => {\n            setIndividualChartData(chartIndexInPage, data);\n          })\n          .catch((error) => {\n            console.log(error);\n          })\n      });\n    }\n\n  }, [loadMoreCharts]);\n\n  return (\n    <Project />\n  )\n};\n\nexport default Dashboard;"],"names":["Explanation","AQIexplanation","themePreference","useContext","PreferenceContext","_jsx","ExpandableSection","title","icon","InfoIcon","sx","fontSize","content","_jsxs","Box","children","AirQualityIndexTable","Typography","component","variant","color","mt","parse","replace","replacePlainHTMLWithMuiComponents","StyledTable","styled","Table","shouldForwardProp","prop","_ref","theme","tiny","minWidth","palette","text","secondary","breakpoints","down","fontWeight","primary","lineHeight","props","hideAQIDescription","returnFormattedBreakpoints","low","high","Infinity","concat","_Fragment","overflow","size","TableHead","TableRow","TableCell","pr","width","height","pl","align","CITIESair","TableBody","AQI_Database","map","element","index","border","backgroundColor","category","whiteSpace","aqiUS","rawPM2_5","description","healthSuggestions","outdoors","StyledAccordion","MuiAccordion","expanded","backgroundImage","background","default","boxShadow","shadows","transition","StyledAccordionSummary","MuiAccordionSummary","_ref2","marginTop","spacing","flexDirection","paddingLeft","textDecoration","main","marginBottom","TooltipText","disabled","setExpanded","useState","undefined","onChange","panel","event","isExpanded","Tracking","expandSection","collapseSection","section","expandIcon","ArrowDropDownIcon","id","Tooltip","enterDelay","leaveDelay","ml","MuiAccordionDetails","pt","UppercaseTitle","display","textTransform","pb","Skeleton","SELECT_ALL","ITEM_HEIGHT","ITEM_PADDING_TOP","SeriesSelector","items","itemsFromChart","selectorID","allowMultiple","seriesLabel","onSeriesSelection","displayChip","useTheme","MenuProps","PaperProps","style","maxHeight","customAlternateBackground","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","setItems","selectAll","setSelectAll","useEffect","every","item","selected","handleChange","target","value","includes","updatedItems","newDataColumns","selectedItems","filter","label","some","selectedItem","handleItemToggle","existingItem","Stack","direction","alignItems","FormControl","borderRadius","shape","Select","labelId","multiple","renderValue","VisibilityIcon","length","renderedLabel","MenuItem","Checkbox","checked","onClick","p","transform","Radio","borderTop","borderColor","position","bottom","zIndex","justifyContent","Switch","Grid","container","Chip","onDelete","ChartControlType","CategoryFilter","stackDirection","DateRangeFilter","ChartRangeFilter","NumberRangeFilter","generateRandomID","Math","random","toString","substr","hideAnnotations","stem","textStyle","opacity","boxStyle","returnResponsiveFontSizeInPixels","isPortrait","isSmaller","returnGenericOptions","_chartData$subcharts","_chartData$options","_chartData$options2","_chartData$options2$b","_chartData$options3","_chartData$options4","_chartData$options4$c","_chartData$options4$c2","_chartData$options5","_chartData$options5$c","_chartData$options5$c2","_chartData$options6","_chartData$options6$c","_chartData$options6$c2","_chartData$options7","_chartData$options7$c","_chartData$options7$c2","_chartData$options8","_chartData$options8$w","_chartData$options9","_chartData$options9$w","_chartData$options$le","_chartData$options10","_chartData$options10$","_options$vAxis$format","_options$vAxis","_options$vAxis$title","_options$vAxis2","_options$vAxis$viewWi","_options$vAxis3","_options$vAxis3$viewW","_options$vAxis$viewWi2","_options$vAxis4","_options$vAxis4$viewW","_options$vAxis$viewWi3","_options$vAxis5","_options$vAxis5$viewW","_options$hAxis$title","_options$hAxis","_options$vAxis6","_options$vAxis7","_options$vAxis7$gridl","_options$hAxis2","_options$hAxis3","_options$hAxis3$gridl","_options$hAxis4","_options$hAxis5","_options$hAxis5$gridl","_options$annotations","chartData","subchartIndex","axisTitleTextStyle","italic","bold","chart","axisTitle","axisTextStyle","axisText","options","subcharts","curveType","crosshair","orientation","trigger","fill","chartArea","portrait","landscape","tooltip","isHtml","showColorCode","legend","alignment","scrollArrows","activeColor","inactiveColor","pagingTextStyle","vAxis","format","viewWindow","min","max","hAxis","slantedText","slantedTextAngle","colors","optionsColors","series","Object","values","forEach","_serie","serie","trendlines","_item","colorAxis","colorAxisFirstColor","multiColor","colorIndex","NYUpurple","colorAxes","titleTextStyle","gridlines","minorGridlines","count","annotations","highContrast","contrastText","thickness","rx","ry","annotationBoxFill","fillOpacity","returnChartControlUI","_chartControl$options","chartControl","mainChartData","mainChartOptions","chartControlUI","ui","snapToData","controlType","chartType","chartView","columns","chartOptions","textPosition","addTouchEventListenerForChartControl","controlWrapper","chartID","touchHandler","first","changedTouches","type","simulatedEvent","MouseEvent","bubbles","cancelable","view","window","detail","screenX","screenY","clientX","clientY","button","relatedTarget","dispatchEvent","preventDefault","isMounted","controlDOM","document","querySelector","touchEvent","addEventListener","capture","removeEventListener","gradientBackgroundId","maxWidth","padding","mozBoxShadow","webkitBoxShadow","secondaryRGB","margin","verticalAlign","paper","paddingTop","paddingBottom","paddingRight","borderWidth","top","left","right","stroke","strokeWidth","cursor","normalizeColorStops","optionalMinValue","optionalMaxValue","isValidArray","offset","totalColors","clampedStops","colorStop","offsets","normalizedOffsets","minOffset","maxOffset","normalizeColorStopOffsets","generateDiscreteColorGradientArray","_ref3","numSteps","rgbToHex","r","g","b","x","hex","join","interpolateColor","color1","color2","factor","result","slice","i","round","normalizedColors","m","exec","parseInt","hexToRgb","colorArray","stepPositions","Array","from","_","pos","offset1","offset2","j","interpolatedColor","push","generateCssBackgroundGradient","_ref4","gradientDirection","generateSvgFillGradient","_ref5","BackgroundGradient","_ref6","visibility","x1","y1","x2","y2","stopColor","valueRange","minValue","maxValue","rangeBoxMinValue","rangeBoxMaxValue","calculateMarkerPositionOnRangeBox","labelStyle","textAlign","bottomLabelStyle","triangleStyle","borderLeft","borderRight","topTriangleStyle","bottomTriangleStyle","borderBottom","my","float","day","tooltipText","dateRange","inFirstTwoRowsOfChart","tooltipBoxRef","useRef","current","parentDiv","parentElement","ref","className","mr","getCalendarChartMargin","_options$legend","_options$colorAxis","_options$colorAxis2","_options$colorAxis3","_options$colorAxis4","dataArray","valueRangeBoxTitle","windowSize","setDateRange","setValueRange","calendarHeight","setCalendarHeight","thisDateRange","dateStrings","reduce","getDateRangeForCalendarChart","getValueRangeForCalendarChart","numberOfYears","Date","getFullYear","calendarChartMargin","totalHeight","displayLegend","dateStr","date","dayOfWeek","getDay","isFirstTwoDaysOfWeek","firstYear","isInFirstYear","calendarCellColors","gradientSteps","GoogleChartStyleWrapper","ValueRangeBox","overflowY","ResponsiveCalendar","data","to","emptyColor","yearSpacing","monthBorderColor","monthBorderWidth","daySpacing","dayBorderWidth","tooltipData","find","DOMParser","parseFromString","body","innerHTML","TooltipCalendarChart","returnCustomStaticRanges","today","minDateOfDataset","aggregationType","hourlyReturn","range","startDate","startOfDay","addDays","endDate","endOfDay","dailyReturn","AggregationType","hourly","StyledDateRangePicker","Paper","showPickerPanel","smallScreen","action","customBackground","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","returnFormattedDates","startDateObject","endDateObject","AggregationTypeToggle","setAggregationType","ToggleButtonGroup","exclusive","newType","ToggleButton","px","py","daily","DateRangePickerContext","createContext","initDateRange","key","DateRangePickerProvider","contextValue","useMemo","Provider","useDateRangePicker","InvalidRangeMessages","historicalChartIndex","ChartAPIendpointsOrder","findIndex","endpoint","ChartAPIendpoints","historical","displayErrorMessage","invalidRangeMessage","Alert","severity","dataType","currentSchoolID","setIndividualChartData","DashboardContext","setInvalidRangeMessage","shouldDisableApplyButton","setShouldDisableApplyButton","useMediaQuery","chartUrl","setChartUrl","setShowPickerPanel","paperRef","isFetchingData","setIsFetchingData","handleClickOutside","contains","checkValidRange","selectedRange","isSameDay","invalidRange","differenceInDays","elevation","DateRangePicker","ranges","selection","staticRanges","createStaticRanges","inputRanges","rangeColors","minDate","maxDate","months","showMonthAndYearPickers","fixedHeight","preventSnapRefocus","calendarFocus","startDatePlaceholder","endDatePlaceholder","editableDateInputs","showMonthArrow","Button","stopPropagation","formattedDates","newUrl","getHistoricalChartApiUrl","school_id","fetchDataFromURL","url","then","catch","error","console","log","CircularProgress","disableShrink","AxesPickerContext","AxesPickerProvider","setHAxis","setVAxis","useAxesPicker","correlationChartIndex","correlationDailyAverage","LeftSelect","RightSelect","allowedAxes","selectedAxes","receivedHAxis","receivedVAxis","shouldDisableOption","option","allowedDataTypes","xs","sm","fullWidth","InputLabel","newHAxis","autoWidth","sensor","applyChanges","getCorrelationChartApiUrl","sensorX","sensorY","NoChartToRender","selectableAxes","messagePrefix","messageSuffix","SubChart","selectedDataType","google","GoogleContext","dataTable","setDataTable","chartWrapper","setChartWrapper","setControlWrapper","previousChartData","setPreviousChartData","isFirstRender","setIsFirstRender","shouldRenderChart","setShouldRenderChart","renderChartNow","setRenderChartNow","allInitialColumns","setAllInitialColumns","dataColumns","setDataColumns","initialVAxisRange","setInitialVAxisRage","__","calendarDataArray","setCalendarDataArray","NivoCalendarChart","returnSelectedDataType","dataTypeKey","dataTypes","showUnit","LoadingAnimation","chartControlOptions","hasChartControl","control","seriesSelector","dateRangePicker","formatters","handleSeriesSelection","setOptions","draw","method","setInitialColumnsColors","col","_options$series2","seriesIndex","serieAttribute","getInitialVAxisRange","vAxisMin","vAxisMax","getColumnRange","sourceColumn","isNaN","useCallback","_allInitialColumns","_chartWrapper","_controlWrapper","hiddenSeriesObject","enableInteractivity","visibleInLegend","currentControlOptions","getOptions","newViewColumns","dataColumn","indexIn_","role","setView","newOptions","selectedSeriesCount","JSON","stringify","_shouldRenderChart","visualization","arrayToDataTable","hasOwnProperty","numberFormat","NumberFormat","numberFormatter","reconstructedColumns","evaluatedColumns","column","calc","calcFunction","Function","reconstructFunctionFromJSONstring","thisChartWrapper","ChartWrapper","containerId","thisControlWrapper","thisDashboardWrapper","Dashboard","getElementById","events","addListener","onChartReady","ControlWrapper","bind","initAllInitialColumns","initDataColumns","initialView","getView","viewFromDataTable","DataView","shouldAssignDomainRoleToFistColumn","dataSeriesIndex","getColumnLabel","indexInAllInitialColumns","defaultSeriesToDisplayInitially","_options$series","_options$series$col$s","getInitialColumns","gradientBackgroundColor","svgFillGradient","_options$vAxis2$viewW","minHeight","gap","CustomDateRangePicker","AxesPicker","renderChart","chartContainer","_ChartControlType$cha","parseFloat","wordLimit","reference","setIsExpanded","isMobile","subtitleRef","words","split","displayText","lastFullStop","lastIndexOf","ClickAwayListener","onClickAway","subtitleParent","closest","chartElements","Set","has","tagName","parentNode","isClickWithinSharedParent","fetchChartDataType","anchorEl","setAnchorEl","name_title","open","Boolean","handleClose","currentTarget","Menu","onClose","MenuListProps","handleMenuItemClick","Tabs","smallFontSize","ChartStyleWrapper","mode","overflowX","scrollbarGutter","StyledMenuItem","chartTitle","generalChartSubtitle","generalChartReference","passedChartData","chartHeight","passedChartHeight","chartIndex","isSmallWidth","setIsPortrait","matchMedia","matches","setWindowSize","innerWidth","innerHeight","chartMaxHeight","currentTab","setCurrentTab","previousTab","setPreviousTab","dropdownMenuTabIndex","setDropdownMenuTabIndex","dropdownMenuCurrentTitle","setDropdownMenuCurrentTitle","setAllowedDataTypes","setSelectedDataType","dataTypesArr","name_short","unit","DataTypes","timeoutID","handleWindowResize","clearTimeout","setTimeout","DataTypeDropDownMenu","async","getChartApiUrl","renderMultipleSubcharts","needsDropdownMenu","MAX_NUM_TABS_TO_DISPLAY","subchartsDataForTabs","subchartsDataForDropDownMenu","shouldDisplayThisSubchart","StyledTabs","handleTabChange","newIndex","Tab","subchartTitle","flex","ExpandMoreIcon","subchartTitleShort","handleDropdownMenuSelection","WebkitOverflowScrolling","pointerEvents","currentSubchart","mb","CollapsibleSubtitle","getSubtitles","_chartData$subcharts$","subchartSubtitle","getReferences","_chartData$subcharts$2","StyledHyvorTalk","pageID","Container","capitalizePhrase","jsonData","Comments","HYVOR_WEBSITE_ID","loading","AirQualityIndexLegendQuickGlance","handlePopperOpen","airQualityIndexLegendQuickGlance","handlePopperClose","FadeInButtonForSpeedDial","distanceFromBottomOfWindow","Fab","onMouseEnter","onMouseLeave","AirIcon","Popper","placement","keepMounted","TransitionProps","Fade","timeout","mx","buttonIcon","buttonIconAria","buttonLabel","trackingEvent","dialogTitle","dialogOpenHandler","dialogCloseHandler","displaySchoolID","iconOnly","setOpen","onOpen","IconButton","Dialog","fullScreen","DialogActions","ChevronLeftIcon","DialogTitle","toUpperCase","DialogContent","DatasetDownloadDialog","sensorsDatasets","updateSensorsDatasets","previewingDataset","setPreviewingDataset","acc","location_short","location_type","location_long","last_seen","rawDatasets","keys","RawDatasetType","datasetAcc","datasetKey","sample","full","CustomDialog","DataObjectIcon","rawDatasetButtonClicked","DatasetSelectorAndPreviewer","schoolID","fontStyle","Link","href","firstSensor","initialDatasetType","datasetType","getRawDatasetUrl","sensor_location_short","isSample","extension","SupportedFetchExtensions","csv","needsAuthorization","tmp","md","DatasetsTable","PreviewDataset","tableLayout","Dataset","isPreviewing","selectedDatasetType","setSelectedDatasetType","fetchThisDataset","NYUpurpleLight","setThisSensorToPreview","selectedVal","disablePortal","reverse","charAt","toLowerCase","previewingDatasetName","setPreviewingDatasetName","csvFileName","setCsvFileName","isDatasetLoading","setIsDatasetLoading","convertCSVforDownload","dataset","blob","Blob","URL","createObjectURL","downloadLink","createElement","download","appendChild","click","revokeObjectURL","removeChild","formattedData","setFormattedData","rowNumber","setRowNumber","_sensorsDatasets$prev","_sensorsDatasets$prev2","csvData","lines","headers","rows","dateString","row","fontFamily","gutterBottom","userSelect","optionalText","downloadPreviewingDataset","fetchedDataset","rawDatasetDownloaded","dataset_type","DownloadIcon","ScreenDropDownMenu","schoolMetadata","screens","TvIcon","screen","screen_name","SchoolSelector","user","UserContext","isArray","allowedSchools","CustomChip","PlaceIcon","name","tooltipTitle","navigate","useNavigate","marginLeft","ArrowDropUpIcon","clickable","MenuList","dense","school","newSchoolID","localStorage","setItem","LocalStorage","internalNavigation","origin_school","destination_school_id","origin_id","AppRoutes","dashboard","EmailsInput","setShowNotification","setMessage","setSeverity","useNotificationContext","serverEmails","setServerEmails","localEmails","setLocalEmails","emailsListChanged","setEmailsListChanged","currentEmail","setCurrentEmail","menuAnchor","setMenuAnchor","saveButtonTooltipTitle","setSaveButtonTooltipTitle","getApiUrl","GeneralAPIendpoints","alertsEmails","AlertSeverity","compareArrays","arr1","arr2","handleAddEmail","passedEmail","email","trim","String","match","validateEmail","newEmails","warning","handleDeleteEmail","handleMenuClose","handleBeforeUnload","returnValue","wrap","lg","flexWrap","handleMenuOpen","TextField","e","onKeyUp","onPaste","pastedText","clipboardData","getData","placeholder","InputProps","disableUnderline","enterTouchDelay","_emails","emailsToSave","restMethod","RESTmethods","POST","success","AlertTypes","threshold","tableColumnHeader","SpeedIcon","CalendarMonthIcon","ThresholdAlertTypes","below_threshold","sign","above_threshold","AirQualityAlertContext","AirQualityAlertKeys","alert_type","sensor_id","datatypekey","threshold_value","days_of_week","minutespastmidnight","is_enabled","excluded_dates","getAlertPlaceholder","localAlertType","arguments","AirQualityAlertProvider","selectedAlert","setSelectedAlert","editingAlert","setEditingAlert","allowedDataTypesForSensor","setAllowedDataTypesForSensor","alerts","setAlerts","returnAllowedDataTypesForThisSensor","sensors","allowedDataTypesForThisSensor","elem","getAlertsApiUrl","useAirQualityAlert","returnHoursFromMinutesPastMidnight","minutes","floor","padStart","CrudTypes","SharedColumnHeader","DialogData","primaryButtonLabel","errorMessage","successMessage","contentText","ThresholdTypeToggle","thisAlertType","others","defaultValue","thresholdAlertType","SimplePicker","HOURS","minutesPastMidnight","ThresholdSlider","stepsForThreshold","marks","backgroundCssGradient","invertSelection","showInput","inputUnit","sliderRangeMin","setSliderRangeMin","sliderRangeMax","setSliderRangeMax","nearestDataIndex","setNearestDataIndex","setError","helperText","setHelperText","localSliderRangeMin","localSliderRangeMax","findNearestDataIndex","val","greaterMarks","mark","nearestMark","prev","curr","indexOf","stripedGradient","white","Number","inputProps","step","Slider","handleSliderChange","newValue","valueLabelDisplay","black","paperBackgroundGradient","DAYS_OF_WEEK","DaysOfWeekToggle","arrow","CustomPickersDay","PickersDay","common","dark","CustomDayComponent","selectedDates","other","isSelected","dayjs","MultiDaysCalendarPicker","parsedSelectedDates","returnSectionLabelString","len","EventBusyIcon","LocalizationProvider","dateAdapter","AdapterDayjs","localeText","calendarWeekNumberHeaderText","calendarWeekNumberText","weekNumber","DateCalendar","displayWeekNumber","slots","dayProps","selectionState","disableHighlightToday","startOf","AlertDeletionDialog","onConfirmedDelete","DialogContentText","returnFormattedStatusString","status","tense","_schoolMetadata$senso","_DialogData$crudType2","alertTypeKey","openAlertModificationDialog","crudType","shouldDisableButton","setShouldDisableButton","handleCurrentSensorChange","newSensor","handleCurrentDataTypeChange","selectedDataTypeKey","dataTypeColorAxis","color_axis","defaultValueForAlert","handleCurrentDaysOfWeekChange","newDaysOfWeek","validDaysOfWeek","sort","handleCurrentThresholdValueChange","handleCurrentAlertTypeChange","handleExcludedDatesChange","valueArray","currentExcludedDates","updatedExcludedDates","excludedDate","handleCurrentMinutesPastMidnightChange","handleIsEnabledChange","locations","handleAlertModification","passedCrudType","handleFetchError","handleFetchSuccess","prevAlerts","alert_id","PUT","alert","DELETE","isEqual","returnDialogContent","_DataTypes$currentDat","_DialogData$crudType","isDisabled","dependentKey","alertTypeSpecificData","AccessTimeIcon","thresholdSlider","currentDataTypeKey","database","DataTypeKeys","voc","VOC_Database","aqi","pm2_5","pm10_raw","co2","threshold_mapping_name","CategoryIcon","returnDaysOfWeekString","missingDays","d","_DAYS_OF_WEEK$find","_AlertTypes$alertType","alertsForTable","setOpenAlertModificationDialog","setCrudType","handleModifyClick","TransitionGroup","Grow","newIsEnabled","prevAlert","handleEnableClick","EditIcon","startIcon","AddAlarmIcon","AlertModificationDialog","AlertTab","alertType","alertsArray","hidden","AlertsTable","AlertsTabs","returnFilteredAlertsBasedOnAlertType","filteredAlerts","_alert$alert_type","array","alertsLength","newVal","_AlertTypes$Object$ke","_Object$keys","iconPosition","AirQualityAlerts","NotificationImportantIcon","otherProps","Project","lastUpdate","commentCounts","fetchCommentCounts","setCommentCounts","setChartsTitlesList","MetadataContext","allChartsData","loadMoreCharts","setLoadMoreCharts","temperatureUnitPreference","displayCommentSection","setDisplayCommentSection","displayMapOfSensors","setDisplayMapOfSensors","isNYUAD","NYUAD","chartsTitles","_allChartsData$key","displayLoadMoreButton","isLastChartInList","KeyboardArrowDownIcon","GridOfMetadataChips","PersonIcon","contactPerson","EmailIcon","contactEmail","BarChartIcon","_jsonData$chartData","scrollToSection","destination_id","destination_label","CommentIcon","HYVOR_PAGE_NAME","FullWidthBox","getDashboardTitle","NYUADbanner","initialNyuadCurrentData","isOnBannerPage","minMapHeight","CurrentAQIGrid","currentSensorsData","isScreen","ThemePreferences","ChartComponentWrapper","subtitle","Divider","CommentSection","school_id_param","useParams","locationPath","useLocation","pathname","setCurrentPage","setCurrentSchoolID","setSchoolMetadata","setCurrent","fetchInitialDataForDashboard","checkedAuthentication","authenticated","login","redirectQuery","previouslySelectedSchoolID","getItem","response","Promise","all","schoolmetadata","fetchAndProcessCurrentSensorsData","NUMBER_OF_CHARTS_TO_LOAD_INITIALLY","chartIndexInPage"],"sourceRoot":""}